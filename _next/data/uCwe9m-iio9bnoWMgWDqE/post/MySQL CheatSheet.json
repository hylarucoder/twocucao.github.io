{"pageProps":{"post":{"tags":["MySQL"],"path":"20160912_MySQLCheatSheet.md","title":"MySQL CheatSheet","slug":"MySQL CheatSheet","date":"2016-09-02","category":"DevOps","lastMod":"2020-01-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"<h1 id=\"mysql-cheatsheet\"><a class=\"v-toc-item\" href=\"#mysql-cheatsheet\">#</a> MySQL CheatSheet</h1>\n<h2 id=\"0x00-前言\"><a class=\"v-toc-item\" href=\"#0x00-前言\">#</a> 0x00 前言</h2>\n<p>本文为 Cheatsheet 类型文章，用于记录我在日常编程中经常使用的 MySQL 相关命令。主要包含：</p>\n<ul>\n<li>MySQL Shell, 其实就是 SQL 命令。</li>\n<li>MySQL 配套工具</li>\n<li>Python API</li>\n</ul>\n<p>不定期更新。</p>\n<!-- more -->\n<h2 id=\"0x01-安装配置基本-shell-命令\"><a class=\"v-toc-item\" href=\"#0x01-安装配置基本-shell-命令\">#</a> 0x01 安装，配置，基本 shell 命令</h2>\n<h3 id=\"字符编码\"><a class=\"v-toc-item\" href=\"#字符编码\">#</a> 字符编码</h3>\n<blockquote>\n<p>UTF-8 , Please</p>\n</blockquote>\n<p>真的很讨厌那些用 GBK 的程序员啊！</p>\n<pre><code class=\"language-bash\"># 注意，下面的设置 MySQL 是无法保存 emoji 的 <span class=\"token operator\">/</span>\n<span class=\"token punctuation\">[</span>mysql<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">default</span><span class=\"token operator\">-</span>character<span class=\"token operator\">-</span>set<span class=\"token operator\">=</span>utf8\n\n<span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span>\ncollation<span class=\"token operator\">-</span>server <span class=\"token operator\">=</span> utf8_general_ci\ninit<span class=\"token operator\">-</span>connect<span class=\"token operator\">=</span><span class=\"token string\">'SET NAMES utf8'</span>\ncharacter<span class=\"token operator\">-</span>set<span class=\"token operator\">-</span>server <span class=\"token operator\">=</span> utf8\n</code></pre>\n<p>然后在 mysql console 执行：</p>\n<pre><code class=\"language-bash\">show variables like <span class=\"token string\">\"%character%\"</span><span class=\"token punctuation\">;</span>show variables like <span class=\"token string\">\"%collation%\"</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>如下即可</p>\n<h2 id=\"0x02-mysql-配套工具\"><a class=\"v-toc-item\" href=\"#0x02-mysql-配套工具\">#</a> 0x02 MySQL 配套工具</h2>\n<ul>\n<li>JetBrain 的 Datagrip 作为 编写大段 SQL 语句的 IDE</li>\n<li>通过网络或者 Dash 查看文档</li>\n<li>强烈推荐 mycli 作为正常情况下的 MySQL 命令的替代品。</li>\n<li>MySQL 官方自带工具</li>\n</ul>\n<p>只挑选几个重要的，常用的说一说。</p>\n<pre><code class=\"language-bash\"># 启动 <span class=\"token constant\">MYSQL</span>\n\n# 常规 mysql\nmysql <span class=\"token operator\">-</span>u username <span class=\"token operator\">-</span>p password\n## 命令的用户名和密码最好与命令合在一起\nmysqlshow <span class=\"token operator\">-</span>uroot <span class=\"token operator\">-</span>psomepass some_db<span class=\"token punctuation\">;</span>\n# 导入数据\nmysql <span class=\"token operator\">-</span>u username <span class=\"token operator\">-</span>p password <span class=\"token operator\">&lt;</span> filename\n# 优雅的导入数据，可以查看进度条的 Hacks\npv <span class=\"token operator\">-</span>i <span class=\"token number\">1</span> <span class=\"token operator\">-</span>p <span class=\"token operator\">-</span>t <span class=\"token operator\">-</span>e <span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>twocucao<span class=\"token operator\">/</span>Codes<span class=\"token operator\">/</span>update_new_date<span class=\"token punctuation\">.</span>sql <span class=\"token operator\">|</span> mysql <span class=\"token operator\">-</span>uadmin <span class=\"token operator\">-</span>p123456 <span class=\"token operator\">-</span>h <span class=\"token number\">192.168</span><span class=\"token number\">.2</span><span class=\"token number\">.254</span> <span class=\"token operator\">--</span>port<span class=\"token operator\">=</span><span class=\"token number\">3306</span> some_db\n# 导出数据\nmysqldump <span class=\"token operator\">-</span>u username <span class=\"token operator\">-</span>p password database <span class=\"token punctuation\">[</span>tables<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> filename\nmysqldump database table_bame <span class=\"token operator\">--</span>where<span class=\"token operator\">=</span><span class=\"token string\">\"date_column BETWEEN '2012-07-01 00:00:00' and '2012-12-01 00:00:00'\"</span>\n\n# ref <span class=\"token operator\">:</span> http<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>dev<span class=\"token punctuation\">.</span>mysql<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>doc<span class=\"token operator\">/</span>refman<span class=\"token operator\">/</span><span class=\"token number\">5.7</span><span class=\"token operator\">/</span>en<span class=\"token operator\">/</span>mysqldump<span class=\"token punctuation\">.</span>html#option_mysqldump_where\n</code></pre>\n<h2 id=\"0x03-mysql-常用代码\"><a class=\"v-toc-item\" href=\"#0x03-mysql-常用代码\">#</a> 0x03 MySQL 常用代码</h2>\n<pre><code class=\"language-bash\"><span class=\"token constant\">SHOW</span> <span class=\"token constant\">DATABASES</span><span class=\"token punctuation\">;</span>\n<span class=\"token constant\">CREATE</span> <span class=\"token constant\">DATABASE</span> database<span class=\"token punctuation\">;</span>\n<span class=\"token constant\">USE</span> database<span class=\"token punctuation\">;</span>\n<span class=\"token constant\">SHOW</span> <span class=\"token constant\">TABLES</span><span class=\"token punctuation\">;</span>\n<span class=\"token constant\">DESCRIBE</span> table<span class=\"token punctuation\">;</span>\n<span class=\"token constant\">SHOW</span> <span class=\"token constant\">COLUMN</span> <span class=\"token constant\">FROM</span> table<span class=\"token punctuation\">;</span>\n<span class=\"token constant\">DROP</span> <span class=\"token constant\">DATEBASE</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2 id=\"0x04-常用代码片段\"><a class=\"v-toc-item\" href=\"#0x04-常用代码片段\">#</a> 0x04 常用代码片段</h2>\n<h3 id=\"1-数据清洗常用脚本\"><a class=\"v-toc-item\" href=\"#1-数据清洗常用脚本\">#</a> 1. 数据清洗常用脚本</h3>\n<pre><code class=\"language-sql\"><span class=\"token operator\">--</span> 少量去重\n<span class=\"token constant\">CREATE</span> <span class=\"token constant\">TABLE</span> everyday_info_temp <span class=\"token constant\">AS</span> <span class=\"token constant\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token constant\">FROM</span>  everyday_info <span class=\"token constant\">GROUP</span> <span class=\"token constant\">BY</span> id<span class=\"token punctuation\">,</span>date<span class=\"token punctuation\">,</span>numbers<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">--</span> 大量去重\n<span class=\"token constant\">CREATE</span> <span class=\"token constant\">TABLE</span> everyday_info_temp <span class=\"token constant\">AS</span> <span class=\"token constant\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token constant\">FROM</span>  everyday_info <span class=\"token constant\">GROUP</span> <span class=\"token constant\">BY</span> id<span class=\"token punctuation\">,</span>date<span class=\"token punctuation\">,</span>numbers <span class=\"token constant\">ORDER</span> <span class=\"token constant\">BY</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><a href=\"http://stackoverflow.com/questions/16568228/how-to-transpose-mysql-table-rows-into-columns\">http://stackoverflow.com/questions/16568228/how-to-transpose-mysql-table-rows-into-columns</a></p>\n<pre><code>  SELECT @max := MAX(ID)+ 1 FROM ABC;\n\n  PREPARE stmt FROM 'ALTER TABLE ABC AUTO_INCREMENT = ?';\n  EXECUTE stmt USING @max;\n\n  DEALLOCATE PREPARE stmt;\n</code></pre>\n<p>mysql&gt; delete from shophtml;<br>\nQuery OK, 117141 rows affected (4 min 2.92 sec)<br>\nTRUNCATE shophtml;</p>\n<h3 id=\"2-用户管理常用脚本\"><a class=\"v-toc-item\" href=\"#2-用户管理常用脚本\">#</a> 2. 用户管理常用脚本</h3>\n<pre><code class=\"language-bash\"><span class=\"token constant\">SELECT</span> User <span class=\"token constant\">FROM</span> mysql<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"3-备份迁移常用脚本\"><a class=\"v-toc-item\" href=\"#3-备份迁移常用脚本\">#</a> 3. 备份迁移常用脚本</h3>\n<pre><code>#! /bin/bash\n\nTIMESTAMP=$(date +&quot;%F&quot;)\nBACKUP_DIR=&quot;/mnt/$TIMESTAMP&quot;\nMYSQL_USER=&quot;root&quot;\nMYSQL=/usr/bin/mysql\nMYSQL_PASSWORD=&quot;password&quot;\nMYSQLDUMP=/usr/bin/mysqldump\nDATABASE=&quot;cyjoycity&quot;\n\nmkdir -p &quot;$BACKUP_DIR/mysql&quot;\n\nfor t in $($MYSQL -NBA -u $MYSQL_USER -p$MYSQL_PASSWORD -D $DATABASE -e 'show tables')\ndo\n    echo &quot;DUMPING TABLE: $DB.$t&quot;\n    $MYSQLDUMP --force --opt --user=$MYSQL_USER -p$MYSQL_PASSWORD $DATABASE $t | gzip &gt; &quot;$BACKUP_DIR/mysql/$t.sql.gz&quot;\ndone\n\n</code></pre>\n<h3 id=\"4-性能优化常用脚本\"><a class=\"v-toc-item\" href=\"#4-性能优化常用脚本\">#</a> 4. 性能优化常用脚本</h3>\n<p>SHOW FULL PROCESSLIST;</p>\n<h3 id=\"6-远程连接\"><a class=\"v-toc-item\" href=\"#6-远程连接\">#</a> 6. 远程连接</h3>\n<pre><code class=\"language-mysql\">\n<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>mysql<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf\n\n# bind<span class=\"token operator\">-</span>address <span class=\"token operator\">=</span> <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>\n\n<span class=\"token constant\">GRANT</span> <span class=\"token constant\">ALL</span> <span class=\"token constant\">PRIVILEGES</span> <span class=\"token constant\">ON</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token constant\">TO</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'%'</span> <span class=\"token constant\">IDENTIFIED</span> <span class=\"token constant\">BY</span> <span class=\"token string\">'password'</span> <span class=\"token constant\">WITH</span> <span class=\"token constant\">GRANT</span> <span class=\"token constant\">OPTION</span><span class=\"token punctuation\">;</span>\n<span class=\"token constant\">FLUSH</span> <span class=\"token constant\">PRIVILEGES</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"5-其他脚本\"><a class=\"v-toc-item\" href=\"#5-其他脚本\">#</a> 5. 其他脚本</h3>\n<pre><code class=\"language-sql\">\n# <span class=\"token number\">6.</span> 随机选择 <span class=\"token number\">10</span> 组记录\n<span class=\"token operator\">--</span> 慢速\n<span class=\"token constant\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token constant\">FROM</span> Table_Name <span class=\"token constant\">ORDER</span> <span class=\"token constant\">BY</span> <span class=\"token constant\">RAND</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token constant\">LIMIT</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">--</span> 快速\n<span class=\"token constant\">SELECT</span> name\n  <span class=\"token constant\">FROM</span> random <span class=\"token constant\">AS</span> r1 <span class=\"token constant\">JOIN</span>\n       <span class=\"token punctuation\">(</span><span class=\"token constant\">SELECT</span> <span class=\"token constant\">CEIL</span><span class=\"token punctuation\">(</span><span class=\"token constant\">RAND</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span>\n                     <span class=\"token punctuation\">(</span><span class=\"token constant\">SELECT</span> <span class=\"token constant\">MAX</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n                        <span class=\"token constant\">FROM</span> random<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token constant\">AS</span> id<span class=\"token punctuation\">)</span>\n        <span class=\"token constant\">AS</span> r2\n <span class=\"token constant\">WHERE</span> r1<span class=\"token punctuation\">.</span>id <span class=\"token operator\">>=</span> r2<span class=\"token punctuation\">.</span>id\n <span class=\"token constant\">ORDER</span> <span class=\"token constant\">BY</span> r1<span class=\"token punctuation\">.</span>id <span class=\"token constant\">ASC</span>\n <span class=\"token constant\">LIMIT</span> <span class=\"token number\">1</span>\n</code></pre>\n<pre><code class=\"language-sql\">\n# <span class=\"token number\">1.</span> 查询时间\nselect <span class=\"token function\">date_format</span><span class=\"token punctuation\">(</span>create_time<span class=\"token punctuation\">,</span> <span class=\"token string\">'%Y-%m-%d'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> day from table_name\nselect <span class=\"token function\">from_unixtime</span><span class=\"token punctuation\">(</span>create_time<span class=\"token punctuation\">,</span> <span class=\"token string\">'%Y-%m-%d'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> day from table_name\n\n# <span class=\"token number\">2.</span> <span class=\"token constant\">CASE</span> <span class=\"token constant\">WHEN</span> 案例\n\n## <span class=\"token number\">2.1</span> 返回同一列多个结果\n\n## <span class=\"token number\">2.2</span> 行列值颠倒\n\n# <span class=\"token number\">3.</span> 替换某字段内容\nupdate table_name <span class=\"token keyword\">set</span> content <span class=\"token operator\">=</span> <span class=\"token constant\">REPLACE</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">,</span> <span class=\"token string\">'aaa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bbb'</span><span class=\"token punctuation\">)</span>  <span class=\"token function\">where</span> <span class=\"token punctuation\">(</span>content like <span class=\"token string\">'%aaa%'</span><span class=\"token punctuation\">)</span>\n\n# <span class=\"token number\">4.</span> 获取表中某字段包含某字符串的数据\n<span class=\"token constant\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token constant\">FROM</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">表名</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token constant\">WHERE</span> <span class=\"token constant\">LOCATE</span><span class=\"token punctuation\">(</span><span class=\"token string\">'关键字'</span><span class=\"token punctuation\">,</span> 字段名）\n\n# <span class=\"token number\">5.</span> 字符串处理\n<span class=\"token constant\">SELECT</span> <span class=\"token constant\">SUBSTRING</span>（字段名，<span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token constant\">FROM</span> 表名\n\n# <span class=\"token number\">6.</span> 求解数字的连续范围\n\nselect <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span> start_range<span class=\"token punctuation\">,</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span> end_range\n<span class=\"token function\">from</span>\n<span class=\"token punctuation\">(</span>\n    select number<span class=\"token punctuation\">,</span>rn<span class=\"token punctuation\">,</span>number<span class=\"token operator\">-</span>rn diff <span class=\"token function\">from</span>\n    <span class=\"token punctuation\">(</span>\n        select number<span class=\"token punctuation\">,</span>@number<span class=\"token operator\">:</span><span class=\"token operator\">=</span>@number<span class=\"token operator\">+</span><span class=\"token number\">1</span> rn from test_number<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>select @number<span class=\"token operator\">:</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> number\n    <span class=\"token punctuation\">)</span> b\n<span class=\"token punctuation\">)</span> c group by diff<span class=\"token punctuation\">;</span>\n\n</code></pre>\n<h2 id=\"0x05-性能优化切入点\"><a class=\"v-toc-item\" href=\"#0x05-性能优化切入点\">#</a> 0x05 性能优化切入点</h2>\n<p>应用的切入点也比较简单和暴力：</p>\n<ol>\n<li>优化应用层面的查询。</li>\n<li>优化数据库的 SQL 查询。</li>\n<li>优化数据库的存储结构。</li>\n<li>优化单个数据库服务器的性能。</li>\n<li>遵循『机多运算大』的原则，上几台机器。</li>\n<li>更好的机器，即加内存条，上好的 CPU。</li>\n</ol>\n<p>优化前三点，则需要理解取数据的客户端从发送 SQL 语句到接受数据之间都发生了什么？流程如下：</p>\n<ol>\n<li>开启连接</li>\n<li>发送查询给服务器</li>\n<li>分析查询</li>\n<li>执行查询</li>\n<li>传输数据</li>\n<li>关闭连接</li>\n</ol>\n<h3 id=\"优化应用层面的查询\"><a class=\"v-toc-item\" href=\"#优化应用层面的查询\">#</a> 优化应用层面的查询</h3>\n<p>在同样工作量的情况下不断的减少数据库的连接，将多个动作放在一起使用 TRANSACTION 可以显著提高速度。</p>\n<ol>\n<li>对于 OLTP 类型的数据库设计的数据库，一些耗时查询往往是可以在应用层面查询进行优化的，比如在手写代码应用级缓存，借助外部组件 (redis) 应用内缓存。</li>\n<li>对于一些有性能要求的场景，不要使用 select * from xxx 这种查询，服务器到客户端传输也是需要时间的，而是要选择需要的字段。</li>\n<li>如果有必要，不要在循环内部进行数据库查询，而是直接取出来放在内存中进行运算。学过的算法与数据结构用起来！!</li>\n</ol>\n<h3 id=\"优化数据库的-sql-查询\"><a class=\"v-toc-item\" href=\"#优化数据库的-sql-查询\">#</a> 优化数据库的 SQL 查询</h3>\n<p>如同前文所见，到了 SQL 命令这层切入点能够优化的地方只有步骤 4.</p>\n<p>对于查找，效率取决于：</p>\n<ol>\n<li>取记录数量</li>\n<li>搜索到这些记录的时间。</li>\n</ol>\n<p>对于插入，执行查询则插入记录和更新索引两个部分，也是插入的瓶颈所在：</p>\n<ol>\n<li>插入记录 速度取决于记录数量，记录大小</li>\n<li>更新索引 速度取决于索引数量。</li>\n</ol>\n<p>对于更新，执行查询则有查找，更新记录和更新索引两个部分，也是更新的瓶颈所在：</p>\n<ol>\n<li>查找 需要参考查找</li>\n<li>更新记录 速度取决于记录数量，记录大小</li>\n<li>更新索引 速度取决于更新索引字段的数量。</li>\n</ol>\n<p>对于删除，执行查询则有查找，删除记录和删除索引两个部分，也是删除的瓶颈所在：</p>\n<ol>\n<li>查找 需要参考查找</li>\n<li>删除记录 速度取决于记录数量，记录大小</li>\n<li>更新索引 速度取决于更新索引字段的数量。</li>\n</ol>\n<h4 id=\"查询的优化\"><a class=\"v-toc-item\" href=\"#查询的优化\">#</a> 查询的优化</h4>\n<h4 id=\"索引的代价\"><a class=\"v-toc-item\" href=\"#索引的代价\">#</a> 索引的代价</h4>\n<blockquote>\n<p>在计算机这个神奇的世界里面，没有一个算法与数据结构的挑选是没有代价的。便于查询，则不便于插入更新。</p>\n</blockquote>\n<p>有的人把索引比作字典。说字典的索引页面就好像是数据表中的索引。</p>\n<p>这个比方很贴切，可以用在索引的比方上，也可以用在索引的代价上。</p>\n<ul>\n<li>一个没有索引的页面，即是一个只有页码，编号的字典。当我们查询一个新字的时候，只能从第一页翻到结尾，效率很低。</li>\n<li>一个有一个索引的页面，即是一个有页码，编号，拼音索引的字典。当我们查询一个新字的时候，先查询索引，然后从索引查页码，于是很快找到字。当我们<strong>增加 / 删除 / 更新</strong>一个字之后，还需要更新拼音索引。</li>\n<li>一个有多个索引的页面，即是一个有页码，编号，拼音索引和部首索引以及其他索引的字典。当我们<strong>增加 / 删除 / 更新</strong>一个字之后，还需要更新拼音索引，部首索引等等索引。</li>\n</ul>\n<blockquote>\n<p><strong>计算机世界就是这样，没有完美的算法，也没有完美的模型。</strong></p>\n</blockquote>\n<h3 id=\"数据存储结构\"><a class=\"v-toc-item\" href=\"#数据存储结构\">#</a> 数据存储结构</h3>\n<h3 id=\"硬件优化\"><a class=\"v-toc-item\" href=\"#硬件优化\">#</a> 硬件优化</h3>\n<p>留空，这个可能比较接近运维或者 DBA 的工作</p>\n<h3 id=\"配置优化\"><a class=\"v-toc-item\" href=\"#配置优化\">#</a> 配置优化</h3>\n<p>留空，这个可能比较接近运维或者 DBA 的工作</p>\n<h2 id=\"0x06-常见问题\"><a class=\"v-toc-item\" href=\"#0x06-常见问题\">#</a> 0x06 常见问题</h2>\n<h3 id=\"密码忘了怎么办\"><a class=\"v-toc-item\" href=\"#密码忘了怎么办\">#</a> 密码忘了怎么办？</h3>\n<pre><code class=\"language-bash\"><span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>init<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>mysql stop\nmysqld_safe <span class=\"token operator\">--</span>skip<span class=\"token operator\">-</span>grant<span class=\"token operator\">-</span>tables <span class=\"token operator\">&amp;</span>\n# 在另一个终端 输入 mysql 进入终端\n在另一端执行 <span class=\"token constant\">SQL</span> 命令\n<span class=\"token constant\">UPDATE</span> mysql<span class=\"token punctuation\">.</span>user <span class=\"token constant\">SET</span> password<span class=\"token operator\">=</span><span class=\"token constant\">PASSWORD</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nouveau'</span><span class=\"token punctuation\">)</span> <span class=\"token constant\">WHERE</span> user<span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\n## Kill mysqld_safe from the terminal<span class=\"token punctuation\">,</span> using Control <span class=\"token operator\">+</span> \\\n<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>init<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>mysql start\n</code></pre>\n<h2 id=\"0xee-参考链接\"><a class=\"v-toc-item\" href=\"#0xee-参考链接\">#</a> 0xEE 参考链接</h2>\n<p>关于 SQL 与数据库的有趣解释</p>\n<ol>\n<li><a href=\"http://stackoverflow.com/questions/38549/what-is-the-difference-between-inner-join-and-outer-join\">Inner Join 和 Outer Join</a></li>\n<li><a href=\"http://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php\">如何防止 SQL 注入</a></li>\n<li><a href=\"http://stackoverflow.com/questions/1108/how-does-database-indexing-work\">索引是怎么工作的</a></li>\n<li><a href=\"https://gold.xitu.io/post/584e7b298d6d81005456eb53\">Mysql 常用 SQL 语句集锦（本文部分 SQL 语句取自此博文）</a></li>\n</ol>\n<p><a href=\"http://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string\">http://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string</a></p>\n","toc":"<ul class=\"v-article-toc\">\n<li><a href=\"#mysql-cheatsheet\">MySQL CheatSheet</a>\n<ul>\n<li><a href=\"#0x00-%E5%89%8D%E8%A8%80\">0x00 前言</a></li>\n<li><a href=\"#0x01-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%9F%BA%E6%9C%AC-shell-%E5%91%BD%E4%BB%A4\">0x01 安装，配置，基本 shell 命令</a>\n<ul>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81\">字符编码</a></li>\n</ul>\n</li>\n<li><a href=\"#0x02-mysql-%E9%85%8D%E5%A5%97%E5%B7%A5%E5%85%B7\">0x02 MySQL 配套工具</a></li>\n<li><a href=\"#0x03-mysql-%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81\">0x03 MySQL 常用代码</a></li>\n<li><a href=\"#0x04-%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5\">0x04 常用代码片段</a>\n<ul>\n<li><a href=\"#1-%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC\">1. 数据清洗常用脚本</a></li>\n<li><a href=\"#2-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC\">2. 用户管理常用脚本</a></li>\n<li><a href=\"#3-%E5%A4%87%E4%BB%BD%E8%BF%81%E7%A7%BB%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC\">3. 备份迁移常用脚本</a></li>\n<li><a href=\"#4-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC\">4. 性能优化常用脚本</a></li>\n<li><a href=\"#6-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5\">6. 远程连接</a></li>\n<li><a href=\"#5-%E5%85%B6%E4%BB%96%E8%84%9A%E6%9C%AC\">5. 其他脚本</a></li>\n</ul>\n</li>\n<li><a href=\"#0x05-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%87%E5%85%A5%E7%82%B9\">0x05 性能优化切入点</a>\n<ul>\n<li><a href=\"#%E4%BC%98%E5%8C%96%E5%BA%94%E7%94%A8%E5%B1%82%E9%9D%A2%E7%9A%84%E6%9F%A5%E8%AF%A2\">优化应用层面的查询</a></li>\n<li><a href=\"#%E4%BC%98%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84-sql-%E6%9F%A5%E8%AF%A2\">优化数据库的 SQL 查询</a>\n<ul>\n<li><a href=\"#%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%BC%98%E5%8C%96\">查询的优化</a></li>\n<li><a href=\"#%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BB%A3%E4%BB%B7\">索引的代价</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84\">数据存储结构</a></li>\n<li><a href=\"#%E7%A1%AC%E4%BB%B6%E4%BC%98%E5%8C%96\">硬件优化</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96\">配置优化</a></li>\n</ul>\n</li>\n<li><a href=\"#0x06-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\">0x06 常见问题</a>\n<ul>\n<li><a href=\"#%E5%AF%86%E7%A0%81%E5%BF%98%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E\">密码忘了怎么办？</a></li>\n</ul>\n</li>\n<li><a href=\"#0xee-%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\">0xEE 参考链接</a></li>\n</ul>\n</li>\n</ul>\n"}},"__N_SSG":true}