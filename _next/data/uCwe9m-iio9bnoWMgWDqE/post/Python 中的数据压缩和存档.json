{"pageProps":{"post":{"tags":["Python"],"path":"20180123_PythonCompression.md","title":"Python 中的数据压缩和存档","slug":"Python 中的数据压缩和存档","date":"2018-01-23","category":"Python","lastMod":"2020-01-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"<h2 id=\"0x00-前言\"><a class=\"v-toc-item\" href=\"#0x00-前言\">#</a> 0x00 前言</h2>\n<p>在一次数据分析过程中，对方扔过来 40GB 的数据 – data.tar.gz .</p>\n<p>我想着能不能直接用 pandas 直接读取这个文件呢？查找了一些资料，于是有了本文。</p>\n<p>Python 中支持如下：</p>\n<ul>\n<li>数据压缩算法：zlib, gzip, bzip2 and lzma</li>\n<li>存档格式：zip 以及 tar</li>\n</ul>\n<h2 id=\"0x01-压缩是怎么回事\"><a class=\"v-toc-item\" href=\"#0x01-压缩是怎么回事\">#</a> 0x01 压缩是怎么回事？</h2>\n<h2 id=\"0x02-zlib-与-gzip\"><a class=\"v-toc-item\" href=\"#0x02-zlib-与-gzip\">#</a> 0x02 zlib 与 gzip</h2>\n<p>gzip 依赖于 zlib</p>\n<pre><code># 读取压缩文件\nimport gzip\nwith gzip.open('/home/joe/file.txt.gz', 'rb') as f:\n    file_content = f.read()\n\n# 写入压缩文件\nimport gzip\ncontent = b&quot;Lots of content here&quot;\nwith gzip.open('/home/joe/file.txt.gz', 'wb') as f:\n    f.write(content)\n\n# 拷贝压缩文件\nimport gzip\nimport shutil\nwith open('/home/joe/file.txt', 'rb') as f_in:\n    with gzip.open('/home/joe/file.txt.gz', 'wb') as f_out:\n        shutil.copyfileobj(f_in, f_out)\n\n# 压缩二进制字符串\nimport gzip\ns_in = b&quot;Lots of content here&quot;\ns_out = gzip.compress(s_in)\n</code></pre>\n<hr>\n<p>ChangeLog:</p>\n<ul>\n<li><strong>2017-12-20</strong> 初始化本文</li>\n</ul>\n","toc":"<ul class=\"v-article-toc\">\n<li>\n<ul>\n<li><a href=\"#0x00-%E5%89%8D%E8%A8%80\">0x00 前言</a></li>\n<li><a href=\"#0x01-%E5%8E%8B%E7%BC%A9%E6%98%AF%E6%80%8E%E4%B9%88%E5%9B%9E%E4%BA%8B\">0x01 压缩是怎么回事？</a></li>\n<li><a href=\"#0x02-zlib-%E4%B8%8E-gzip\">0x02 zlib 与 gzip</a></li>\n</ul>\n</li>\n</ul>\n"}},"__N_SSG":true}