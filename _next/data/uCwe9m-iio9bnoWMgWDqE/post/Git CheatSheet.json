{"pageProps":{"post":{"tags":["Git"],"path":"20170615_GitCheatSheet.md","title":"Git CheatSheet","slug":"Git CheatSheet","date":"2017-06-15","category":"善用佳软","lastMod":"2020-10-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"<h2 id=\"0x00-前言\"><a class=\"v-toc-item\" href=\"#0x00-前言\">#</a> 0x00 前言</h2>\n<p>Git 是一种分布式版本管理工具。</p>\n<h2 id=\"0x01-git-命令范论\"><a class=\"v-toc-item\" href=\"#0x01-git-命令范论\">#</a> 0x01 Git 命令范论</h2>\n<ol>\n<li>基础命令 （本地修改类）</li>\n<li>合作命令 （本地与仓库类）</li>\n<li>综合命令</li>\n<li>管理命令</li>\n</ol>\n<h3 id=\"基础命令\"><a class=\"v-toc-item\" href=\"#基础命令\">#</a> 基础命令</h3>\n<ul>\n<li>git-init(1) to create a new repository.</li>\n<li>git-log(1) to see what happened.</li>\n<li>git-checkout(1) and git-branch(1) to switch branches.</li>\n<li>git-add(1) to manage the index file.</li>\n<li>git-diff(1) and git-status(1) to see what you are in the middle of doing.</li>\n<li>git-commit(1) to advance the current branch.</li>\n<li>git-reset(1) and git-checkout(1) (with pathname parameters) to undo changes.</li>\n<li>git-merge(1) to merge between local branches.</li>\n<li>git-rebase(1) to maintain topic branches.</li>\n<li>git-tag(1) to mark a known point.</li>\n</ul>\n<pre><code class=\"language-bash\">$ tar zxf frotz<span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>gz\n$ cd frotz\n$ git init\n$ git add <span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n$ git commit <span class=\"token operator\">-</span>m <span class=\"token string\">\"import of frotz source tree.\"</span>\n$ git tag v2<span class=\"token punctuation\">.</span><span class=\"token number\">43</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n$ git checkout <span class=\"token operator\">-</span>b alsa<span class=\"token operator\">-</span><span class=\"token function\">audio</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n$ edit<span class=\"token operator\">/</span>compile<span class=\"token operator\">/</span>test\n$ git checkout <span class=\"token operator\">--</span> curses<span class=\"token operator\">/</span>ux_audio_oss<span class=\"token punctuation\">.</span><span class=\"token function\">c</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> # 恢复文件\n$ git add curses<span class=\"token operator\">/</span>ux_audio_alsa<span class=\"token punctuation\">.</span><span class=\"token function\">c</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n$ edit<span class=\"token operator\">/</span>compile<span class=\"token operator\">/</span>test\n$ git diff <span class=\"token constant\">HEAD</span> <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> # 查看提交了哪些修改\n$ git commit <span class=\"token operator\">-</span>a <span class=\"token operator\">-</span><span class=\"token function\">s</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> # 提交所有\n$ edit<span class=\"token operator\">/</span>compile<span class=\"token operator\">/</span>test\n$ git diff <span class=\"token constant\">HEAD</span><span class=\"token operator\">^</span> <span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> # 查看所有变化，包含之前的 commit\n$ git commit <span class=\"token operator\">-</span>a <span class=\"token operator\">--</span><span class=\"token function\">amend</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span> # 修订前一个 commit<span class=\"token punctuation\">,</span> 把所有的新变化提交到\n$ git checkout <span class=\"token function\">master</span> <span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span>\n$ git merge alsa<span class=\"token operator\">-</span><span class=\"token function\">audio</span> <span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span>\n$ git log <span class=\"token operator\">--</span>since<span class=\"token operator\">=</span><span class=\"token string\">'3 days ago'</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n$ git log v2<span class=\"token punctuation\">.</span><span class=\"token number\">43.</span><span class=\"token punctuation\">.</span> curses<span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h3 id=\"合作命令\"><a class=\"v-toc-item\" href=\"#合作命令\">#</a> 合作命令</h3>\n<ul>\n<li>git-clone(1) from the upstream to prime your local repository.</li>\n<li>git-pull(1) and git-fetch(1) from “origin” to keep up-to-date with the upstream.</li>\n<li>git-push(1) to shared repository, if you adopt CVS style shared repository workflow.</li>\n<li>git-format-patch(1) to prepare e-mail submission, if you adopt Linux kernel-style public forum workflow.</li>\n<li>git-send-email(1) to send your e-mail submission without corruption by your MUA.</li>\n<li>git-request-pull(1) to create a summary of changes for your upstream to pull.</li>\n</ul>\n<pre><code class=\"language-bash\">## clone 修改 提交\n$ git clone git<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>git<span class=\"token punctuation\">.</span>kernel<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>pub<span class=\"token operator\">/</span>scm<span class=\"token operator\">/</span><span class=\"token operator\">...</span><span class=\"token operator\">/</span>torvalds<span class=\"token operator\">/</span>linux<span class=\"token operator\">-</span><span class=\"token number\">2.6</span> my2<span class=\"token punctuation\">.</span><span class=\"token number\">6</span>\n$ cd my2<span class=\"token punctuation\">.</span><span class=\"token number\">6</span>\n$ git checkout <span class=\"token operator\">-</span>b mine <span class=\"token function\">master</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n$ edit<span class=\"token operator\">/</span>compile<span class=\"token operator\">/</span>test<span class=\"token punctuation\">;</span> git commit <span class=\"token operator\">-</span>a <span class=\"token operator\">-</span><span class=\"token function\">s</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n$ git format<span class=\"token operator\">-</span>patch <span class=\"token function\">master</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n$ git send<span class=\"token operator\">-</span>email <span class=\"token operator\">--</span>to<span class=\"token operator\">=</span><span class=\"token string\">\"person &lt;email@example.com>\"</span> <span class=\"token number\">00</span><span class=\"token operator\">*</span><span class=\"token punctuation\">.</span><span class=\"token function\">patch</span> <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n$ git checkout <span class=\"token function\">master</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n$ git <span class=\"token function\">pull</span> <span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n$ git log <span class=\"token operator\">-</span>p <span class=\"token constant\">ORIG_HEAD</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> arch<span class=\"token operator\">/</span>i386 include<span class=\"token operator\">/</span>asm<span class=\"token operator\">-</span><span class=\"token function\">i386</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span> # 查看感兴趣的部分\n$ git ls<span class=\"token operator\">-</span>remote <span class=\"token operator\">--</span>heads http<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">git.kernel.org</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token operator\">...</span><span class=\"token operator\">/</span>jgarzik<span class=\"token operator\">/</span>libata<span class=\"token operator\">-</span>dev<span class=\"token punctuation\">.</span><span class=\"token function\">git</span> <span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> # 查看分支\n$ git pull git<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>git<span class=\"token punctuation\">.</span>kernel<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>pub<span class=\"token operator\">/</span><span class=\"token operator\">...</span><span class=\"token operator\">/</span>jgarzik<span class=\"token operator\">/</span>libata<span class=\"token operator\">-</span>dev<span class=\"token punctuation\">.</span>git <span class=\"token constant\">ALL</span> <span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span> # 从一个特地\n$ git reset <span class=\"token operator\">--</span>hard <span class=\"token constant\">ORIG_HEAD</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> # 撤销 pull\n$ git <span class=\"token function\">gc</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> # garbage collect leftover objects from reverted pull\n# 推送到其他 repo\n\nsatellite$ git clone mothership<span class=\"token operator\">:</span>frotz <span class=\"token function\">frotz</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nsatellite$ cd frotz\nsatellite$ git config <span class=\"token operator\">--</span>get<span class=\"token operator\">-</span>regexp <span class=\"token string\">'^(remote|branch)\\.'</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\nremote<span class=\"token punctuation\">.</span>origin<span class=\"token punctuation\">.</span>url mothership<span class=\"token operator\">:</span>frotz\nremote<span class=\"token punctuation\">.</span>origin<span class=\"token punctuation\">.</span>fetch refs<span class=\"token operator\">/</span>heads<span class=\"token comment\">/*:refs/remotes/origin/*\nbranch.master.remote origin\nbranch.master.merge refs/heads/master\nsatellite$ git config remote.origin.push \\\n            +refs/heads/*:refs/remotes/satellite/* (3)\nsatellite$ edit/compile/test/commit\nsatellite$ git push origin (4)\n\nmothership$ cd frotz\nmothership$ git checkout master\nmothership$ git merge satellite/master (5)\n\n           1. mothership machine has a frotz repository under your home directory; clone from it to start a repository on the satellite machine.\n           2. clone sets these configuration variables by default. It arranges git pull to fetch and store the branches of mothership machine to local remotes/origin/* remote-tracking\n           branches.\n           3. arrange git push to push all local branches to their corresponding branch of the mothership machine.\n           4. push will stash all our work away on remotes/satellite/* remote-tracking branches on the mothership machine. You could use this as a back-up method. Likewise, you can\n           pretend that mothership \"fetched\" from you (useful when access is one sided).\n           5. on mothership machine, merge the work done on the satellite machine into the master branch.\n\n       Branch off of a specific tag.\n\n               $ git checkout -b private2.6.14 v2.6.14 (1)\n               $ edit/compile/test; git commit -a\n               $ git checkout master\n               $ git cherry-pick v2.6.14..private2.6.14 (2)\n\n           1. create a private branch based on a well known (but somewhat behind) tag.\n           2. forward port all changes in private2.6.14 branch to master branch without a formal \"merging\". Or longhand git format-patch -k -m --stdout v2.6.14..private2.6.14 | git am -3\n           -k\n\n</span></code></pre>\n<h3 id=\"综合个体\"><a class=\"v-toc-item\" href=\"#综合个体\">#</a> 综合个体</h3>\n<h3 id=\"仓库管理\"><a class=\"v-toc-item\" href=\"#仓库管理\">#</a> 仓库管理</h3>\n<p>安装完毕之后，cmd-s-p shell command install</p>\n<h2 id=\"0x02-常见操作\"><a class=\"v-toc-item\" href=\"#0x02-常见操作\">#</a> 0x02 常见操作</h2>\n<pre><code class=\"language-bash\"># 搜索代码的变化\ngit log <span class=\"token operator\">-</span><span class=\"token constant\">S</span><span class=\"token string\">'&lt;a term in the source>'</span>\n# 放弃本地修改，与远程同步\ngit fetch origin <span class=\"token operator\">&amp;&amp;</span> git reset <span class=\"token operator\">--</span>hard origin<span class=\"token operator\">/</span>master <span class=\"token operator\">&amp;&amp;</span> git clean <span class=\"token operator\">-</span>f <span class=\"token operator\">-</span>d\n# 列出所有冲突文件\ngit diff <span class=\"token operator\">--</span>name<span class=\"token operator\">-</span>only <span class=\"token operator\">--</span>diff<span class=\"token operator\">-</span>filter<span class=\"token operator\">=</span><span class=\"token constant\">U</span>\n\n# 手贱错误提交，但是没有 push\ngit commit <span class=\"token operator\">-</span>m <span class=\"token string\">\"Something terribly misguided\"</span>              <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\ngit reset <span class=\"token constant\">HEAD</span><span class=\"token operator\">~</span>                                           <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n# edit needing changed files\ngit add needing changed <span class=\"token function\">files</span>                             <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\ngit commit <span class=\"token operator\">-</span>c <span class=\"token constant\">ORIG_HEAD</span>                                   <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n\n# Delete all changes <span class=\"token keyword\">in</span> the Git repository<span class=\"token punctuation\">,</span> but leave unstaged things\ngit checkout <span class=\"token punctuation\">.</span>\n# Delete all changes <span class=\"token keyword\">in</span> the Git repository<span class=\"token punctuation\">,</span> including untracked files\ngit clean <span class=\"token operator\">-</span>f\n</code></pre>\n<h2 id=\"0x03-常见问题\"><a class=\"v-toc-item\" href=\"#0x03-常见问题\">#</a> 0x03 常见问题</h2>\n<pre><code>\n</code></pre>\n<h2 id=\"0x04-hub\"><a class=\"v-toc-item\" href=\"#0x04-hub\">#</a> 0x04 Hub</h2>\n<h2 id=\"0x05-workflow\"><a class=\"v-toc-item\" href=\"#0x05-workflow\">#</a> 0x05 Workflow</h2>\n<h2 id=\"0xee-扩展阅读\"><a class=\"v-toc-item\" href=\"#0xee-扩展阅读\">#</a> 0xEE 扩展阅读</h2>\n<hr>\n<p>ChangeLog:</p>\n<ul>\n<li><strong>2020-12-15</strong> 重修文字</li>\n</ul>\n","toc":"<ul class=\"v-article-toc\">\n<li>\n<ul>\n<li><a href=\"#0x00-%E5%89%8D%E8%A8%80\">0x00 前言</a></li>\n<li><a href=\"#0x01-git-%E5%91%BD%E4%BB%A4%E8%8C%83%E8%AE%BA\">0x01 Git 命令范论</a>\n<ul>\n<li><a href=\"#%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4\">基础命令</a></li>\n<li><a href=\"#%E5%90%88%E4%BD%9C%E5%91%BD%E4%BB%A4\">合作命令</a></li>\n<li><a href=\"#%E7%BB%BC%E5%90%88%E4%B8%AA%E4%BD%93\">综合个体</a></li>\n<li><a href=\"#%E4%BB%93%E5%BA%93%E7%AE%A1%E7%90%86\">仓库管理</a></li>\n</ul>\n</li>\n<li><a href=\"#0x02-%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C\">0x02 常见操作</a></li>\n<li><a href=\"#0x03-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\">0x03 常见问题</a></li>\n<li><a href=\"#0x04-hub\">0x04 Hub</a></li>\n<li><a href=\"#0x05-workflow\">0x05 Workflow</a></li>\n<li><a href=\"#0xee-%E6%89%A9%E5%B1%95%E9%98%85%E8%AF%BB\">0xEE 扩展阅读</a></li>\n</ul>\n</li>\n</ul>\n"}},"__N_SSG":true}