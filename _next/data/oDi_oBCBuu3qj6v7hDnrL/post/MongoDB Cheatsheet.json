{"pageProps":{"post":{"tags":["PostgreSQL"],"path":"20161209_MongoCheatSheet.md","title":"MongoDB Cheatsheet","slug":"MongoDB Cheatsheet","date":"2016-12-09","category":"DevOps","lastMod":"2020-01-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"<h1 id=\"mongodb-cheatsheet\"><a class=\"v-toc-item\" href=\"#mongodb-cheatsheet\">#</a> MongoDB Cheatsheet</h1>\n<h2 id=\"0x01-前言\"><a class=\"v-toc-item\" href=\"#0x01-前言\">#</a> 0x01 前言</h2>\n<p>本文为 Cheatsheet 类型文章，用于记录我在日常编程中经常使用的 MongoDB 相关命令。</p>\n<ul>\n<li>Mongo Shell</li>\n<li>Mongo 配套工具</li>\n<li>Python API</li>\n</ul>\n<p>不定期更新。</p>\n<!-- more -->\n<h2 id=\"0x02-安装\"><a class=\"v-toc-item\" href=\"#0x02-安装\">#</a> 0x02 安装</h2>\n<pre><code class=\"language-bash\"># MacOS 安装\nbrew install mongodb\nbrew services start mongodb\n# Ubuntu Server <span class=\"token number\">16.04</span>\nsudo apt<span class=\"token operator\">-</span>key adv <span class=\"token operator\">--</span>keyserver hkp<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>keyserver<span class=\"token punctuation\">.</span>ubuntu<span class=\"token punctuation\">.</span>com<span class=\"token operator\">:</span><span class=\"token number\">80</span> <span class=\"token operator\">--</span>recv <span class=\"token constant\">EA312927</span>\necho <span class=\"token string\">\"deb http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.2 multiverse\"</span> <span class=\"token operator\">|</span> sudo tee <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>apt<span class=\"token operator\">/</span>sources<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>mongodb<span class=\"token operator\">-</span>org<span class=\"token operator\">-</span><span class=\"token number\">3.2</span><span class=\"token punctuation\">.</span>list\napt<span class=\"token operator\">-</span><span class=\"token keyword\">get</span> update <span class=\"token operator\">-</span>y\napt<span class=\"token operator\">-</span><span class=\"token keyword\">get</span> install <span class=\"token operator\">-</span>y mongodb<span class=\"token operator\">-</span>org\nservice mongod start\n</code></pre>\n<h2 id=\"0x03-配置\"><a class=\"v-toc-item\" href=\"#0x03-配置\">#</a> 0x03 配置</h2>\n<h3 id=\"ip-地址\"><a class=\"v-toc-item\" href=\"#ip-地址\">#</a> IP 地址</h3>\n<h2 id=\"mongodb-配套工具\"><a class=\"v-toc-item\" href=\"#mongodb-配套工具\">#</a> MongoDB 配套工具</h2>\n<ul>\n<li>RoboMongo</li>\n<li>通过网络或者 Dash 查看文档</li>\n<li>Mongo 官方自带工具</li>\n</ul>\n<h2 id=\"mongodb-shell\"><a class=\"v-toc-item\" href=\"#mongodb-shell\">#</a> MongoDB Shell</h2>\n<h2 id=\"基本查询\"><a class=\"v-toc-item\" href=\"#基本查询\">#</a> 基本查询</h2>\n<p>db.users.find({“name”: /.<em>m.</em>/})<br>\ndb.users.find({‘name’: {‘$regex’: ‘sometext’}})</p>\n<p><a href=\"https://docs.mongodb.com/manual/\">https://docs.mongodb.com/manual/</a></p>\n<h3 id=\"增删改查\"><a class=\"v-toc-item\" href=\"#增删改查\">#</a> 增删改查</h3>\n<p>use myNewDatabase<br>\ndb.myCollection.insert( { x: 1 } );</p>\n<h3 id=\"聚合操作\"><a class=\"v-toc-item\" href=\"#聚合操作\">#</a> 聚合操作</h3>\n<h2 id=\"pymongo\"><a class=\"v-toc-item\" href=\"#pymongo\">#</a> PyMongo</h2>\n<pre><code class=\"language-bash\"># 建索引的时候，会阻塞当前的操作，甚至是查询操作\n# 据说转为 background 方式不会阻塞但是，没有实践过\n<span class=\"token string\">\"msg\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"Index Build Index Build: 167413/751748 22%\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"progress\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token string\">\"done\"</span> <span class=\"token operator\">:</span> <span class=\"token number\">167413</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"total\"</span> <span class=\"token operator\">:</span> <span class=\"token number\">751748</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre>\n","toc":"<ul class=\"v-article-toc\">\n<li><a href=\"#mongodb-cheatsheet\">MongoDB Cheatsheet</a>\n<ul>\n<li><a href=\"#0x01-%E5%89%8D%E8%A8%80\">0x01 前言</a></li>\n<li><a href=\"#0x02-%E5%AE%89%E8%A3%85\">0x02 安装</a></li>\n<li><a href=\"#0x03-%E9%85%8D%E7%BD%AE\">0x03 配置</a>\n<ul>\n<li><a href=\"#ip-%E5%9C%B0%E5%9D%80\">IP 地址</a></li>\n</ul>\n</li>\n<li><a href=\"#mongodb-%E9%85%8D%E5%A5%97%E5%B7%A5%E5%85%B7\">MongoDB 配套工具</a></li>\n<li><a href=\"#mongodb-shell\">MongoDB Shell</a></li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2\">基本查询</a>\n<ul>\n<li><a href=\"#%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5\">增删改查</a></li>\n<li><a href=\"#%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C\">聚合操作</a></li>\n</ul>\n</li>\n<li><a href=\"#pymongo\">PyMongo</a></li>\n</ul>\n</li>\n</ul>\n"}},"__N_SSG":true}