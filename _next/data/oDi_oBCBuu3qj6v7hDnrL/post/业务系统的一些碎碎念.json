{"pageProps":{"post":{"tags":["业务系统"],"path":"20201222_BusinessLogic.md","title":"业务系统的一些碎碎念","slug":"业务系统的一些碎碎念","date":"2020-12-22","category":"系统设计","lastMod":"2020-01-01","description":"Odoo","thumbnail":"","content":"<h1 id=\"业务系统的一些碎碎念\"><a class=\"v-toc-item\" href=\"#业务系统的一些碎碎念\">#</a> 业务系统的一些碎碎念</h1>\n<h2 id=\"0x00-前言\"><a class=\"v-toc-item\" href=\"#0x00-前言\">#</a> 0x00 前言</h2>\n<h2 id=\"0x01-业务逻辑从不讲逻辑\"><a class=\"v-toc-item\" href=\"#0x01-业务逻辑从不讲逻辑\">#</a> 0x01 业务逻辑从不讲逻辑</h2>\n<h2 id=\"0x02-基于字段开发-or-基于业务开发\"><a class=\"v-toc-item\" href=\"#0x02-基于字段开发-or-基于业务开发\">#</a> 0x02 基于字段开发 or 基于业务开发</h2>\n<p>加字段本质是加业务 加表来加字段</p>\n<h2 id=\"0x04-扩展内容\"><a class=\"v-toc-item\" href=\"#0x04-扩展内容\">#</a> 0x04 扩展内容</h2>\n<p>这个时候需要来了一个需求，要统计上报接口错误率和延迟。所有协议的所有实现，都要修改一遍，添加上统计上报的代码。这里包括遍历所有的业务方法，找到 HTTP 调用的地方。</p>\n<p>然后又来了一个需求，要对接口进行容错，对故障节点进行自动摘除。然后又要全文遍历一遍。</p>\n<p>然后又来了一个需求，因为下游接入了弹性的云服务，不能使用域名进行服务发现，因为端口号会变化。于是又要改一遍所有的地方加上服务发现的代码。</p>\n<p>然后又来了一个需求，需要对 RPC 调用进行染色，支持流量镜像等。需要在 RPC 协议中都加入一个 trace id 以及透传的字段，于是所有的 RPC 调用都要改一遍。</p>\n<p>我们可以总结出以下规律：</p>\n<p>非功能性需求有很强的复用性，不仅是可以独立出来，而且是必须独立出来。 破坏了 consistency，导致的就是重复实现，重复修改 本质上仍然是分工问题，破坏了 autonomy。如果所有的 RPC<br>\n框架都由基础架构负责，稳定性也有基础架构负责。那么可以由基础架构团队一方自主完成所有的工作。</p>\n<h2 id=\"0xee-扩展阅读\"><a class=\"v-toc-item\" href=\"#0xee-扩展阅读\">#</a> 0xEE 扩展阅读</h2>\n<ul>\n<li><a href=\"https://github.com/taowen/modularization-examples\">https://github.com/taowen/modularization-examples</a></li>\n</ul>\n<hr>\n<p>ChangeLog:</p>\n<ul>\n<li><strong>2020-12-15</strong> 重修文字</li>\n</ul>\n","toc":"<ul class=\"v-article-toc\">\n<li><a href=\"#%E4%B8%9A%E5%8A%A1%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%A2%8E%E7%A2%8E%E5%BF%B5\">业务系统的一些碎碎念</a>\n<ul>\n<li><a href=\"#0x00-%E5%89%8D%E8%A8%80\">0x00 前言</a></li>\n<li><a href=\"#0x01-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E4%BB%8E%E4%B8%8D%E8%AE%B2%E9%80%BB%E8%BE%91\">0x01 业务逻辑从不讲逻辑</a></li>\n<li><a href=\"#0x02-%E5%9F%BA%E4%BA%8E%E5%AD%97%E6%AE%B5%E5%BC%80%E5%8F%91-or-%E5%9F%BA%E4%BA%8E%E4%B8%9A%E5%8A%A1%E5%BC%80%E5%8F%91\">0x02 基于字段开发 or 基于业务开发</a></li>\n<li><a href=\"#0x04-%E6%89%A9%E5%B1%95%E5%86%85%E5%AE%B9\">0x04 扩展内容</a></li>\n<li><a href=\"#0xee-%E6%89%A9%E5%B1%95%E9%98%85%E8%AF%BB\">0xEE 扩展阅读</a></li>\n</ul>\n</li>\n</ul>\n"}},"__N_SSG":true}