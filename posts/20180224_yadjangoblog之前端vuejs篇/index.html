<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>YaDjangoBlog 之 前端 VueJS 篇 - 海拉鲁编程客</title><meta name="Description" content="这篇文章展示了基本的 Markdown 语法和格式."><meta property="og:title" content="YaDjangoBlog 之 前端 VueJS 篇" />
<meta property="og:description" content="这篇文章展示了基本的 Markdown 语法和格式." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://twocucao.xyz/posts/20180224_yadjangoblog%E4%B9%8B%E5%89%8D%E7%AB%AFvuejs%E7%AF%87/" />
<meta property="article:published_time" content="2018-02-25T21:57:40+08:00" />
<meta property="article:modified_time" content="2020-01-01T16:45:40+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="YaDjangoBlog 之 前端 VueJS 篇"/>
<meta name="twitter:description" content="这篇文章展示了基本的 Markdown 语法和格式."/>
<meta name="application-name" content="海拉鲁编程客">
<meta name="apple-mobile-web-app-title" content="海拉鲁编程客"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://twocucao.xyz/posts/20180224_yadjangoblog%E4%B9%8B%E5%89%8D%E7%AB%AFvuejs%E7%AF%87/" /><link rel="prev" href="http://twocucao.xyz/posts/20180224_yadjangoblog%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%9D%E6%AD%A5%E8%AE%BE%E8%AE%A1/" /><link rel="next" href="http://twocucao.xyz/posts/20180309_flask%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "YaDjangoBlog 之 前端 VueJS 篇",
        "inLanguage": "zh-cn",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/twocucao.xyz\/posts\/20180224_yadjangoblog%E4%B9%8B%E5%89%8D%E7%AB%AFvuejs%E7%AF%87\/"
        },"genre": "posts","keywords": "Django","wordcount":  851 ,
        "url": "http:\/\/twocucao.xyz\/posts\/20180224_yadjangoblog%E4%B9%8B%E5%89%8D%E7%AB%AFvuejs%E7%AF%87\/","datePublished": "2018-02-25T21:57:40+08:00","dateModified": "2020-01-01T16:45:40+08:00","publisher": {
            "@type": "Organization",
            "name": "twocucao"},"author": {
                "@type": "Person",
                "name": "twocucao"
            },"description": "这篇文章展示了基本的 Markdown 语法和格式."
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="海拉鲁编程客">海拉鲁编程客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/posts/"> 存档 </a><a class="menu-item" href="/tags/"> 标签 </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="海拉鲁编程客">海拉鲁编程客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/posts/" title="">存档</a><a class="menu-item" href="/tags/" title="">标签</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">YaDjangoBlog 之 前端 VueJS 篇</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="http://twocucao.xyz" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas"></i>twocucao</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/django/"><i class="far fa-folder fa-fw"></i>Django</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2018-02-25">2018-02-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 851 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 4 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#0x00-前言">0x00 前言</a></li>
    <li><a href="#0x01-为什么是-vuejs">0x01 为什么是 VueJS</a></li>
    <li><a href="#0x02-vue-项目的一些注意点">0x02 Vue 项目的一些注意点</a></li>
    <li><a href="#0x03-项目结构">0x03 项目结构</a></li>
    <li><a href="#0x04-静态资源管理">0x04 静态资源管理</a></li>
    <li><a href="#0x04-路由">0x04 路由</a></li>
    <li><a href="#0x05-组件">0x05 组件</a></li>
    <li><a href="#0x06-扩展">0x06. 扩展</a></li>
    <li><a href="#0xee-参考链接">0xEE. 参考链接</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="0x00-前言">0x00 前言</h2>
<p>本文是 Django 全栈开发教程的第四篇</p>
<p>目录在这里，已经更新的文章如下</p>
<ul>
<li>Django 全栈开发教程 - 2018 年不容错过的 Django 全栈项目 &ndash; 目录篇</li>
<li>Django 全栈开发教程 - YaDjangoBlog 的开发环境配置</li>
</ul>
<p>本文需要完成三件事情：</p>
<ul>
<li>第一件事情，介绍为什么选择 VueJS？</li>
<li>第二件事情，介绍 Vue 项目的一些注意点。</li>
<li>第三件事情，蜻蜓点水搬的带大家过一编，YaDjangoBlog 前端的项目结构，静态资源管理，路由以及组件。</li>
</ul>
<h2 id="0x01-为什么是-vuejs">0x01 为什么是 VueJS</h2>
<p>国产框架 + 语法简洁是我入坑 VueJS 初衷。</p>
<p>后来却是 Vue 的丰富的生态和简洁的语法吸引了继续用下去。</p>
<p>这里要感谢为 VueJS 持续贡献代码的人，从 Vue 本身，到 VueCLI, 到 Router, 到 VueX, 如果没有那么多人为之贡献代码，可能今天这一小节就变成了，『为什么是 React 了』逃。</p>
<p>Vue 自称为 Vue 渐进式 JavaScript 框架。</p>
<p>什么是渐进式？</p>
<p>就是你可以逐步按照 Vue 的方式逐渐引入一些 Vue 的组件到项目中。没有必要上来就是 Vue 全家桶，依据场景逐步引入。</p>
<p>参考链接 <a href="https://www.zhihu.com/question/51907207">https://www.zhihu.com/question/51907207</a></p>
<p>然而，依据我的经验，vue 全家桶用起来还是很舒服的。这里必须要感谢 Vue 社区。</p>
<p>模板语法，数据驱动，双向绑定。写起代码来简直就是一个字，爽。</p>
<h2 id="0x02-vue-项目的一些注意点">0x02 Vue 项目的一些注意点</h2>
<p>从项目角度，我们想想前端项目有哪些地方是需要注意的：</p>
<ol>
<li>开发环境和线上环境区分</li>
<li>前端资源打包</li>
</ol>
<ul>
<li>Vue 项目资源打包</li>
<li>DLL 打包</li>
<li>字体文件打包</li>
</ul>
<ol start="3">
<li>CSS/JS 如何管理</li>
<li>有哪些必要的依赖，如何引入第三方库</li>
<li>有哪些页面级组件，有哪些小组件？应该安排这些组件？组件与组件应该怎么通讯？</li>
<li>路由怎么管理</li>
<li>状态怎么管理</li>
<li>登录，鉴权怎么做</li>
</ol>
<p>限于篇幅，我就不一一讲解了。挑在 YaDjangoBlog 中使用到的技术简单介绍一下。</p>
<p>再次感谢 Vue 社区出品的 VueCLI 以及 Webpack 模板。</p>
<p>下面依次介绍：</p>
<ol>
<li>项目结构</li>
<li>静态资源管理</li>
<li>路由</li>
<li>组件</li>
</ol>
<h2 id="0x03-项目结构">0x03 项目结构</h2>
<p>首先，YaDjangoBlog 文件的前端目录如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">.
├── README.md
├── build
│   ├── build.js
│   ├── build_iconfont.js <span class="c1"># 构建 iconfont 脚本</span>
│   ├── check-versions.js
│   ├── logo.png
│   ├── utils.js
│   ├── vue-loader.conf.js
│   ├── webpack.base.conf.js
│   ├── webpack.dev.conf.js <span class="c1"># 增加了 AutoDllPlugin 用于自动打包 DLL</span>
│   └── webpack.prod.conf.js
├── config
│   ├── dev.env.js <span class="c1"># 可以在这里添加开发环境的环境变脸</span>
│   ├── index.js
│   ├── prod.env.js
│   └── test.env.js
├── extra
│   └── svg-icon <span class="c1"># 这里存放需要生成 iconfont 的字体文件。</span>
├── index.html
├── package.json <span class="c1"># 这里添加了一些构建脚本</span>
├── packages
│   └── theme-future <span class="c1"># 注意，这里是另一个子项目，使用 Gulp 构建的纯 CSS 子项目。</span>
├── src
│   ├── App.vue
│   ├── api <span class="c1"># 对 axios 进行初步封装</span>
│   ├── assets <span class="c1"># 从使用 Gulp 生成的 CSS 可以放在这里。</span>
│   ├── components <span class="c1"># 跨页面的组件放在这里</span>
│   ├── directives <span class="c1"># 指令</span>
│   ├── filters    <span class="c1"># 过滤器</span>
│   ├── main.js    <span class="c1"># 初始化 Vue 实例</span>
│   ├── pages      <span class="c1"># 页面</span>
│   ├── router     <span class="c1"># 路由</span>
│   ├── store      <span class="c1"># vuex</span>
│   └── utils      <span class="c1"># 常用工具类</span>
├── static
│   ├── hightlight <span class="c1"># hightlight 脚本</span>
│   ├── iconfont   <span class="c1"># 本地构建的 iconfont</span>
│   ├── images
│   └── js
├── <span class="nb">test</span>           <span class="c1"># 没写测试，大家开源项目不要学我.... 逃</span>
│   ├── e2e
│   └── unit
└── yarn.lock
</code></pre></div><h2 id="0x04-静态资源管理">0x04 静态资源管理</h2>
<p>静态资源管理，主要涉及到 JS/CSS/ 图片 / 字体</p>
<p>首先，由于使用了 VueCli 的模板，所以大可以按照 VueCli 提供的写法来写。</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Header</span><span class="p">&gt;&lt;/</span><span class="nt">Header</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">router-view</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Footer</span><span class="p">&gt;&lt;/</span><span class="nt">Footer</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;app&#39;</span><span class="p">,</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Header</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;./pages/commons/Header.vue&#39;</span><span class="p">),</span>
    <span class="nx">Footer</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;./pages/commons/Footer.vue&#39;</span><span class="p">),</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
  <span class="o">$</span><span class="nt">primary-color</span><span class="o">:</span> <span class="p">#</span><span class="nn">37b24d</span><span class="o">;</span>
  <span class="o">$</span><span class="nt">dark-color</span><span class="o">:</span> <span class="p">#</span><span class="nn">2b5732</span><span class="o">;</span>
  <span class="o">$</span><span class="nt">body-bg</span><span class="o">:</span> <span class="p">#</span><span class="nn">f9f9f9</span><span class="o">;</span>
  <span class="p">@</span><span class="k">import</span> <span class="s1">&#39;~spectre.css/src/spectre-icons.scss&#39;</span><span class="p">;</span>
  <span class="p">@</span><span class="k">import</span> <span class="s1">&#39;~spectre.css/src/spectre.scss&#39;</span><span class="p">;</span>
  <span class="p">@</span><span class="k">import</span> <span class="s1">&#39;~spectre.css/src/spectre-exp.scss&#39;</span><span class="p">;</span>
  <span class="p">@</span><span class="k">import</span> <span class="s1">&#39;./assets/theme-future/index.css&#39;</span><span class="p">;</span>
  <span class="nt">a</span> <span class="p">{</span>
    <span class="err">&amp;:focus,</span>
    <span class="err">&amp;:hover,</span>
    <span class="err">&amp;:active,</span>
    <span class="err">&amp;.active</span> <span class="err">{</span>
      <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
      <span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="err">}</span>
  <span class="p">#</span><span class="nn">app</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></div><p>依据我个人经验，做了一部分的微调：</p>
<p><strong>第一</strong> 在代码中新建一个主题 CSS, 单独用于处理 SCSS 编译 CSS. 即除了 App.vue, 其他地方的 CSS 直接写在同一个地方。</p>
<p><strong>第二</strong> 对于字体文件，不引入 IconFont 在线字体，而是使用 SVG 本地编译字体。这样减少对 iconfont cdn 的依赖，可以以后直接迁移这个字体到其他 CDN 上。</p>
<p><strong>第三</strong> 对于依赖库管理，分为 npm 依赖库和外部 JS 依赖库两种</p>
<p>对于 NPM 依赖库，如果有使用过 ECharts3.0 的 SPA 开发者应该对于万恶的 DLL 非常熟悉了。最早的时候，我们是这样做的：</p>
<ul>
<li>先写一个编译脚本，指定相关依赖包，打包出 dll 和一个 manifest 文件</li>
<li>然后从 index.html 里引入打包好的 dll.</li>
<li>再从 webpack 的配置文件中引入这个文件。</li>
</ul>
<p>这种恶心的配置随着 autodll-webpack-plugin 的出现从而得到缓解，于是现在的你只需要配置：</p>
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript">    <span class="k">new</span> <span class="nx">AutoDllPlugin</span><span class="p">({</span>
      <span class="nx">inject</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// will inject the DLL bundles to index.html
</span><span class="c1"></span>      <span class="nx">debug</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name]_[hash].js&#39;</span><span class="p">,</span>
      <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">vendor</span><span class="o">:</span> <span class="p">[</span>
          <span class="s1">&#39;@antv/data-set&#39;</span><span class="p">,</span>
          <span class="s1">&#39;@antv/g2&#39;</span><span class="p">,</span>
          <span class="s1">&#39;@antv/g6&#39;</span><span class="p">,</span>
          <span class="s1">&#39;highlight.js&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-abbr&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-deflist&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-emoji&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-footnote&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-ins&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-katex&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-mark&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-sub&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-sup&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-task-lists&#39;</span><span class="p">,</span>
          <span class="s1">&#39;markdown-it-toc-and-anchor&#39;</span><span class="p">,</span>
          <span class="s1">&#39;typed.js&#39;</span><span class="p">,</span>
          <span class="s1">&#39;vue&#39;</span><span class="p">,</span>
          <span class="s1">&#39;vue-router&#39;</span><span class="p">,</span>
          <span class="s1">&#39;vuex&#39;</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">UglifyJsPlugin</span><span class="p">()],</span>
    <span class="p">})</span>
</code></pre></div><p>当然，如果你用了 ECharts, 有的时候会出现莫名其妙的</p>
<pre><code>__DEV__ is not defined
</code></pre><p>解决方法就是在这上面的插件里面加个插件定义一个 Global 的变量</p>
<pre><code>  new webpack.DefinePlugin({
    __DEV__: false
  }),
</code></pre><blockquote>
<p>PS: 去年的版本由于依赖库的一个路径问题导致 autodll-webpack-plugin 不能在 Windows 上使用，今年可以啦。还不快快用起来？</p>
</blockquote>
<p>对于外部的 JS/CSS 依赖库：</p>
<ol>
<li>直接拷贝到 static 下面，然后从 index.html 引入即可。</li>
<li>动态创建 script 标签（比如动态引入高德地图）</li>
</ol>
<h2 id="0x04-路由">0x04 路由</h2>
<p>博客项目，实际上路由比较简单。</p>
<pre><code>export default new Router({
  mode: 'history',
  base: '/',
  // 注释掉这里是因为和引入的 smooth-scroll 冲突
  // scrollBehavior (to, from, savedPosition) {
  //   return { x: 0, y: 0 }
  // },
  routes: [
    {
      path: '/',
      name: 'home',
      component: () =&gt; import('../pages/Home.vue')
    },
    // 解决手贱带来的问题
    {
      path: '/index:suffix*',
      name: 'index',
      component: () =&gt; import('../pages/Home.vue')
    },
    {
      path: '/blog',
      name: 'blog',
      component: () =&gt; import('../pages/Blog.vue')
    },
    {
      path: '/blog/post/:title',
      name: 'post',
      component: () =&gt; import('../pages/Blog/ArticlePost.vue')
    },
    {
      path: '/blog/:category(category/\\d+)?/:tags(tags/\\d+)?/:page(page/\\d+)?',
      name: 'blogposts',
      component: () =&gt; import('../pages/Blog.vue')
    },
    {
      path: '/archive',
      name: 'archive',
      component: () =&gt; import('../pages/Archive.vue')
    },
    {
      path: '/gallery',
      name: 'gallery',
      component: () =&gt; import('../pages/Gallery.vue')
    },
    {
      path: '/works',
      name: 'works',
      component: () =&gt; import('../pages/Works.vue')
    },
    {
      path: '/about',
      name: 'about',
      component: () =&gt; import('../pages/About.vue')
    }
  ]
})
</code></pre><p>除了 import 语法之外，需要注意的就是 &lsquo;/blog/:category(category/\d+)?/:tags(tags/\d+)?/:page(page/\d+)?&rsquo; 这个奇怪的表达式。</p>
<p>这个表达式可以用于匹配下面的路由</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">/blog/category/1/tags/2/page/3
/blog/category/1/page/3
/blog/tags/3/page/3
/blog/page/3
</code></pre></div><p>匹配完毕之后，就可以拿到 categroy tags page 的值然后提交数据库拿数据咯。</p>
<h2 id="0x05-组件">0x05 组件</h2>
<p>博客里面需要注意的就三个组件</p>
<ul>
<li>ArticlePost 组件</li>
<li>分页组件</li>
<li>打字终端组件</li>
</ul>
<p>第一个，ArticlePost 组件</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;p-article-post&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;columns&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;col-1 hide-xl&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;col-2 col-xl-3&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;g-sidebar&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>本文目录<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-html</span><span class="o">=</span><span class="s">&#34;articleToc&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;col-6 col-xl-8&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ArticleCard</span> <span class="na">:article</span><span class="o">=</span><span class="s">&#34;article&#34;</span> <span class="err">@</span><span class="na">articleTocReady</span><span class="o">=</span><span class="s">&#34;initArticleToc&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">ArticleCard</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;col-2 col-xl-3&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;g-sidebar&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>公告<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
              MG 的编程小屋，其实就是我整理笔记，写写文章的地方。
            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
              专注 Python / JavaScript , 爱折腾的全干工程师 (Full Stuff Engineer)
            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
              如果我的文章给您的日常开发带来很大帮助的话
            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
              您可以关注我的公众号
            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/static/images/mp_wechat.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 200px&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
              也可以扫描二维码进行投喂
            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/static/images/tips_wechat.jpeg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 200px&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
              听说关注或者进行投喂的人，技术都越来越牛咯。
            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;col-1 hide-xl&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kr">import</span> <span class="p">{</span><span class="nx">fetchBlogPost</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../api/blog&#39;</span><span class="p">;</span>
  <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogPage&#39;</span><span class="p">,</span>
    <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">ArticleCard</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;../../components/Common/ArticleCard.vue&#39;</span><span class="p">),</span>
    <span class="p">},</span>
    <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">article</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">articleToc</span><span class="o">:</span> <span class="kc">undefined</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
      <span class="s1">&#39;$route.params&#39;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">initArticle</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">initArticle</span><span class="p">()</span>
    <span class="p">},</span>
    <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">},</span>
    <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">initArticleToc</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">articleToc</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">initArticle</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
        <span class="nx">fetchBlogPost</span><span class="p">(</span><span class="nx">title</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">article</span> <span class="o">=</span> <span class="nx">res</span><span class="p">;</span>
        <span class="p">})</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div><p>嗯，其实就是监听 url, 如果匹配上 url 的话，从 url 中取 title, 然后发送请求，接着取回响应的内容交给子组件处理。子组件处理完毕会 emit 出一个 toc 的值，将这个值赋值给左侧 toc 即可。</p>
<ul>
<li>分页组件</li>
</ul>
<p>见地址吧  <a href="https://github.com/twocucao/YaVueBlog/blob/master/src/components/Common/Pagination.vue">https://github.com/twocucao/YaVueBlog/blob/master/src/components/Common/Pagination.vue</a></p>
<ul>
<li>打字终端组件</li>
</ul>
<p>终端的样式，当然是抄别人的 CSS, 打字效果，来源于 typed.js 依赖库</p>
<h2 id="0x06-扩展">0x06. 扩展</h2>
<p>对于其他的实现，自然是要多多看代码咯。</p>
<p>其实前端工程化是一个很广的概念，本文没有提到代码风格、团队开发工作流、CSS 编写规范、组件优化、Webpack 详细配置等等。这都需要在日常开发中多多练习的。</p>
<p>笔者最近换了份工作，以 React 为技术栈。 加上篇幅和精力有限，也就是不在以 Vue 为前端这一块详细展开了。</p>
<p>下面的文章还是聚焦在后端上面。</p>
<h2 id="0xee-参考链接">0xEE. 参考链接</h2>
<p>还犹豫啥，Django 前后端分离最佳实践，点赞后，快上车吧</p>
<ul>
<li>前端代码 <a href="https://github.com/twocucao/YaVueBlog">https://github.com/twocucao/YaVueBlog</a></li>
<li>后端代码 <a href="https://github.com/twocucao/YaDjangoBlog">https://github.com/twocucao/YaDjangoBlog</a></li>
</ul>
<hr>
<p>ChangeLog:</p>
<ul>
<li><strong>2018-03-18</strong> 重修文字</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2020-01-01</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/django/">Django</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/20180224_yadjangoblog%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%9D%E6%AD%A5%E8%AE%BE%E8%AE%A1/" class="prev" rel="prev" title="YaDjangoBlog 的前后端设计"><i class="fas fa-angle-left fa-fw"></i>YaDjangoBlog 的前后端设计</a>
            <a href="/posts/20180309_flask%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" class="next" rel="next" title="Flask 源码初步解读">Flask 源码初步解读<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.79.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="http://twocucao.xyz" target="_blank">twocucao</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
