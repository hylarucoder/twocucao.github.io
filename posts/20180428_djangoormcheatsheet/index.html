<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>DjangoORM CheatSheet - 海拉鲁编程客</title><meta name="Description" content="这篇文章展示了基本的 Markdown 语法和格式."><meta property="og:title" content="DjangoORM CheatSheet" />
<meta property="og:description" content="这篇文章展示了基本的 Markdown 语法和格式." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://twocucao.xyz/posts/20180428_djangoormcheatsheet/" />
<meta property="article:published_time" content="2018-04-28T21:57:40+08:00" />
<meta property="article:modified_time" content="2020-01-01T16:45:40+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="DjangoORM CheatSheet"/>
<meta name="twitter:description" content="这篇文章展示了基本的 Markdown 语法和格式."/>
<meta name="application-name" content="海拉鲁编程客">
<meta name="apple-mobile-web-app-title" content="海拉鲁编程客"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://twocucao.xyz/posts/20180428_djangoormcheatsheet/" /><link rel="prev" href="http://twocucao.xyz/posts/20180331_sqlalchemycheatsheet/" /><link rel="next" href="http://twocucao.xyz/posts/20180516_pycondjango/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "DjangoORM CheatSheet",
        "inLanguage": "zh-cn",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/twocucao.xyz\/posts\/20180428_djangoormcheatsheet\/"
        },"genre": "posts","keywords": "ORM","wordcount":  741 ,
        "url": "http:\/\/twocucao.xyz\/posts\/20180428_djangoormcheatsheet\/","datePublished": "2018-04-28T21:57:40+08:00","dateModified": "2020-01-01T16:45:40+08:00","publisher": {
            "@type": "Organization",
            "name": "twocucao"},"author": {
                "@type": "Person",
                "name": "twocucao"
            },"description": "这篇文章展示了基本的 Markdown 语法和格式."
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="海拉鲁编程客">海拉鲁编程客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/posts/"> 存档 </a><a class="menu-item" href="/tags/"> 标签 </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="海拉鲁编程客">海拉鲁编程客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/posts/" title="">存档</a><a class="menu-item" href="/tags/" title="">标签</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">DjangoORM CheatSheet</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="http://twocucao.xyz" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas"></i>twocucao</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/django/"><i class="far fa-folder fa-fw"></i>Django</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2018-04-28">2018-04-28</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 741 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 4 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#0x00-前言">0x00 前言</a></li>
    <li><a href="#0x01-如何快速上手">0x01 如何快速上手</a></li>
    <li><a href="#0x02-djangoorm-的基本功能">0x02 DjangoORM 的基本功能</a>
      <ul>
        <li><a href="#21-模型定义-model">2.1 模型定义 Model</a></li>
        <li><a href="#22-queryset">2.2 QuerySet</a></li>
        <li><a href="#22-model-instances">2.2 Model Instances</a></li>
        <li><a href="#23-模型实例">2.3 模型实例</a></li>
        <li><a href="#24-迁移机制">2.4 迁移机制</a></li>
      </ul>
    </li>
    <li><a href="#0x03-django-orm-的高级功能">0x03 Django ORM 的高级功能</a>
      <ul>
        <li><a href="#maneger">maneger</a></li>
        <li><a href="#raw-sql">raw sql</a></li>
      </ul>
    </li>
    <li><a href="#0x04-database-access-optimization">0x04 Database Access Optimization</a>
      <ul>
        <li><a href="#41-使用连接池">4.1 使用连接池</a></li>
        <li><a href="#42-减少对-mysql-的访问">4.2 减少对 MySQL 的访问</a></li>
        <li><a href="#before">Before</a></li>
        <li><a href="#profile-first">Profile First</a></li>
      </ul>
    </li>
    <li><a href="#0x05-django-orm-under-the-hood">0x05 Django ORM Under The Hood</a>
      <ul>
        <li><a href="#理解-queryset">理解 QuerySet</a></li>
        <li><a href="#理解-cached-attributes">理解 cached attributes</a></li>
      </ul>
    </li>
    <li><a href="#0xee-参考链接">0xEE 参考链接</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>本文是《Python ORM 三部曲的第二部 - Django ORM 的用法 / 原理 / 优化》</p>
<p>上一部的地址为《Python ORM 三部曲的第一部 - Python ORM 的三种实现模式》</p>
<p>本文基于最新 Django 版本</p>
<ol>
<li>模型定义</li>
<li>Create/Update/Delete</li>
<li>各种查询 / 链式调用 / F 表达式 / Window 函数 /Lazy Loading / Eager Loading</li>
<li>Join</li>
<li>DEBUG 和 Profile 技巧</li>
</ol>
<p>本文是《Python ORM 三部曲的第一部 - Python 的三种数据源架构模式》</p>
<p>本文适用于：</p>
<ol>
<li>好奇 or 喜欢折腾的程序员</li>
<li>想深入了解 ORM 的程序员</li>
</ol>
<p>本文将解决你以下的疑惑：</p>
<ol>
<li>能不能不用 ORM?</li>
<li>ORM 为什么在某些场景下会胜于写 SQL</li>
<li>不同的 ORM 实现机制会带来什么差异？</li>
</ol>
<h2 id="0x00-前言">0x00 前言</h2>
<p>新工作的技术栈是以 Flask 为主，SQLAlchemy 是 许多玩 Flask 的人的标配。好，文档读起来，笔记搞起来。</p>
<blockquote>
<p>所以，本文记录的是 Django ORM</p>
</blockquote>
<p>逃。</p>
<p>这篇文章也是我对比 SqlAlchemy 以及 DjangoORM 的产物</p>
<h2 id="0x01-如何快速上手">0x01 如何快速上手</h2>
<p>Django 世界里面，Django 的文档每次刷都会有新的发现。</p>
<h2 id="0x02-djangoorm-的基本功能">0x02 DjangoORM 的基本功能</h2>
<h3 id="21-模型定义-model">2.1 模型定义 Model</h3>
<pre><code>from django.db import models

class Musician(models.Model):
    first_name = models.CharField(max_length=50) # Field
    last_name = models.CharField(max_length=50)
    instrument = models.CharField(max_length=100)

class Album(models.Model):
    artist = models.ForeignKey(Musician, on_delete=models.CASCADE)
    name = models.CharField(max_length=100)
    release_date = models.DateField()
    num_stars = models.IntegerField()

    class Meta: # Model Meta
        order_with_respect_to = 'question'
</code></pre><p>可以看出，包含如下的部分：</p>
<ol>
<li>Model 与 Model 内部的 Meta</li>
<li>Field 与 Field 内部的 Options</li>
<li>Model 与 Model 之间的关系</li>
<li>其他，比如索引</li>
</ol>
<h4 id="models-与-meta">Models 与 Meta</h4>
<blockquote>
<p>DjangoORM 是 ActivityRecord 模式的一种实现，在该模式下，Model 与 session 耦合。</p>
</blockquote>
<h4 id="field-与-field-options">Field 与 Field Options</h4>
<h5 id="field">Field</h5>
<ul>
<li>AutoField</li>
<li>BigAutoField</li>
<li>BigIntegerField</li>
<li>BinaryField</li>
<li>BooleanField</li>
<li>CharField</li>
<li>DateField</li>
<li>DateTimeField</li>
<li>DecimalField</li>
<li>DurationField</li>
<li>EmailField</li>
<li>FileField</li>
<li>FileField and FieldFile</li>
<li>FilePathField</li>
<li>FloatField</li>
<li>ImageField</li>
<li>IntegerField</li>
<li>GenericIPAddressField</li>
<li>NullBooleanField</li>
<li>PositiveIntegerField</li>
<li>PositiveSmallIntegerField</li>
<li>SlugField</li>
<li>SmallIntegerField</li>
<li>TextField</li>
<li>TimeField</li>
<li>URLField</li>
<li>UUIDField</li>
</ul>
<p>虽然有这么多东东，其实常用的如下</p>
<ul>
<li>BigIntegerField</li>
<li>BooleanField</li>
<li>CharField</li>
<li>DateField</li>
<li>DateTimeField</li>
<li>DecimalField</li>
<li>IntegerField</li>
<li>TextField</li>
<li>TimeField</li>
</ul>
<p>有的字段属于那种，有也可以，没有也可以的。</p>
<p>FileField 之类的 往往现在都被 CDN 取代</p>
<h5 id="field-options">Field Options</h5>
<ul>
<li>null</li>
<li>blank</li>
<li>choices
<ul>
<li>p.shirt_size</li>
<li>p.get_shirt_size_display()</li>
</ul>
</li>
<li>db_column</li>
<li>db_index</li>
<li>db_tablespace</li>
<li>default</li>
<li>editable</li>
<li>error_messages</li>
<li>help_text</li>
<li>primary_key</li>
<li>unique</li>
<li>unique_for_date</li>
<li>unique_for_month</li>
<li>unique_for_year</li>
<li>verbose_name</li>
<li>validators</li>
</ul>
<p>如此可见，Django 的 ORM 比起 SQLAlchemy 做了不少应用层的校验，一些 help_text</p>
<h4 id="relationship">Relationship</h4>
<p>表和表之间的关系</p>
<ol>
<li>A 表和 B 表 一对多 / 多对一</li>
<li>A 表和 B 表 一对一 （特殊的一对多）</li>
<li>A 表和 B 表 简单多对多 （借助中间的 Mapping 表进行映射）</li>
<li>A 表和 B 表 复杂多对多</li>
<li>A 表和 B 表 一对多</li>
</ol>
<pre><code>from django.db import models

class Manufacturer(models.Model):
    # ...
    pass

class Car(models.Model):
    manufacturer = models.ForeignKey(Manufacturer, on_delete=models.CASCADE)
    # ...
</code></pre><pre><code>from django.db import models

class Topping(models.Model):
    # ...
    pass

class Pizza(models.Model):
    # ...
    toppings = models.ManyToManyField(Topping)
</code></pre><pre><code>from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=128)

    def __str__(self):
        return self.name

class Group(models.Model):
    name = models.CharField(max_length=128)
    members = models.ManyToManyField(Person, through='Membership')

    def __str__(self):
        return self.name

class Membership(models.Model):
    person = models.ForeignKey(Person, on_delete=models.CASCADE)
    group = models.ForeignKey(Group, on_delete=models.CASCADE)
    date_joined = models.DateField()
    invite_reason = models.CharField(max_length=64)
</code></pre><pre><code>Models across files
</code></pre><pre><code>objects
</code></pre><pre><code>Models 重写方法
</code></pre><pre><code>Models 继承
https://docs.djangoproject.com/en/2.0/topics/db/models/#model-inheritance
</code></pre><pre><code>组织代码 - 以及应对循环引用
</code></pre><h3 id="22-queryset">2.2 QuerySet</h3>
<h4 id="create">Create</h4>
<pre><code>c = Child(name=&quot;苏轼&quot;)
c.save()
p = Parent(name=&quot;苏辙&quot;)
p.best_child = c
p.children.add([c,c2,c3,c4])
p.save()
</code></pre><h4 id="retrieve">Retrieve</h4>
<p>过滤</p>
<p>filter(**kwargs)
exclude(**kwargs)
.all()</p>
<h5 id="跨关系跨表查询">跨关系（跨表）查询</h5>
<p>Blog.objects.filter(entry__headline__contains=&lsquo;Lennon&rsquo;)</p>
<p><a href="https://docs.djangoproject.com/en/2.0/topics/db/queries/#lookups-that-span-relationships">https://docs.djangoproject.com/en/2.0/topics/db/queries/#lookups-that-span-relationships</a></p>
<p><a href="https://docs.djangoproject.com/en/2.0/topics/db/queries/#spanning-multi-valued-relationships">https://docs.djangoproject.com/en/2.0/topics/db/queries/#spanning-multi-valued-relationships</a></p>
<h5 id="prefetch_related--select_related">prefetch_related &amp;&amp; select_related</h5>
<pre><code>select_related

生成 join 的 SQL, 可以用来减少 N+1 , 不过仅仅支持一对多，和一对一

prefetch_related
</code></pre><h5 id="limit--offset--分页">Limit / Offset / 分页</h5>
<p>Blog.objects.filter(entry__headline__contains=&lsquo;Lennon&rsquo;)[30:20]</p>
<h5 id="链式调用">链式调用</h5>
<p>query = query.filter(**kwargs)
query = query.exclude(**kwargs)</p>
<h5 id="表达式">表达式</h5>
<p>Django 里面最强大的就是其 Q 表达式了</p>
<p>Q(question__startswith=&lsquo;Who&rsquo;) | Q(question__startswith=&lsquo;What&rsquo;)</p>
<p>Poll.objects.get(
Q(question__startswith=&lsquo;Who&rsquo;),
Q(pub_date=date(2005, 5, 2)) | Q(pub_date=date(2005, 5, 6))
)</p>
<p>这个表达式甚至可以嵌套超级深从而完成一个比较深的跨表查询。</p>
<blockquote>
<p>并且，这种 API 查询反而在写前端 API 的时候，可以传入 question__startswith 这类参数，从而直接完成一组搜索。</p>
</blockquote>
<p>Q / F</p>
<h5 id="执行查询">执行查询</h5>
<p>需要注意的的是，SQLAlchemy 必须显式执行查询，而 Django 不一定。</p>
<p><a href="https://docs.djangoproject.com/en/2.0/ref/models/querysets/#when-querysets-are-evaluated">https://docs.djangoproject.com/en/2.0/ref/models/querysets/#when-querysets-are-evaluated</a></p>
<p>在 Django 内部实现的时候，一个 queryset 创建 / 过滤 / 切片 / 传送，<strong>除非这个 queryset 被 evaluated 了</strong>, 否则不会做数据库的操作。</p>
<ul>
<li>iteration</li>
<li>Slicing</li>
<li>Pickling/Caching</li>
<li>repr</li>
<li>len</li>
<li>list</li>
<li>bool</li>
</ul>
<pre><code>all()
first()
last()
exist()
</code></pre><h5 id="比较">比较</h5>
<ul>
<li>pk</li>
<li>model</li>
</ul>
<h5 id="复制-实例">复制 实例</h5>
<pre><code>blog = Blog(name='My blog', tagline='Blogging is easy')
blog.save() # blog.pk == 1

blog.pk = None
blog.save() # blog.pk == 2

# 但这个并不拷贝外键？???
https://docs.djangoproject.com/en/2.0/topics/db/queries/#copying-model-instances
</code></pre><h5 id="其他">其他</h5>
<pre><code># 默认查询的是所有字段，但我希望查询部分字段
# TODO: 阿萨德
# Distinct
# OrderBy

</code></pre><h5 id="缓存机制">缓存机制</h5>
<p><a href="https://docs.djangoproject.com/en/2.0/topics/db/queries/#caching-and-querysets">https://docs.djangoproject.com/en/2.0/topics/db/queries/#caching-and-querysets</a></p>
<h4 id="update">Update</h4>
<p>单个 object 更新</p>
<pre><code>blog.title = &quot;大宝天天见&quot;
blog.save()
</code></pre><p>批量更新</p>
<pre><code>query.update(headline=F('blog__name'))
</code></pre><p>一对多的更新（类似于 Set 操作）</p>
<pre><code>add(obj1, obj2, ...)
create(**kwargs)
remove(obj1, obj2, ...)
clear()
set(objs)
</code></pre><h4 id="delete">Delete</h4>
<h5 id="foreignkey">ForeignKey</h5>
<pre><code>class Car(models.Model):
    manufacturer = models.ForeignKey(
        'production.Manufacturer', # 用来解决循环 circular import
        on_delete=models.CASCADE,
    )
</code></pre><p>on_delete 的情况</p>
<ul>
<li>PROTECT 阻止</li>
<li>CASCADE 应用层的级联删除</li>
<li>SET_NULL 应用层的级联 SET_NULL</li>
<li>SET_DEFAULT</li>
<li>DO_NOTHING</li>
<li>SET() 一个 callback</li>
</ul>
<h4 id="聚集查询">聚集查询</h4>
<p><a href="https://docs.djangoproject.com/en/2.0/topics/db/aggregation/">https://docs.djangoproject.com/en/2.0/topics/db/aggregation/</a></p>
<pre><code>Book.objects.all().aggregate(Max('price'))
Book.objects.aggregate(price_diff=Max('price', output_field=FloatField()) - Avg('price'))
Book.objects.annotate(num_authors=Count('authors'))
Book.objects.annotate(num_authors=Count('authors')).aggregate(Avg('num_authors')) # {'num_authors__avg': 1.66}
</code></pre><h4 id="search">Search</h4>
<p><a href="https://docs.djangoproject.com/en/2.0/topics/db/search/">https://docs.djangoproject.com/en/2.0/topics/db/search/</a></p>
<h4 id="window-function">Window Function</h4>
<pre><code>Option.objects.annotate(
		rank_num=Window(
				expression=Rank(),
				partition_by=F(&quot;vote_id&quot;),
				order_by=[F(&quot;current_vote_count&quot;).desc(), F(&quot;id&quot;).desc()],
		),
		lag_vote_num=Window(
				expression=Lag(&quot;current_vote_count&quot;),
				partition_by=F(&quot;vote_id&quot;),
				order_by=[F(&quot;current_vote_count&quot;).desc(), F(&quot;id&quot;).desc()],
		),
)
.filter(vote=obj.vote)
.order_by(&quot;-current_vote_count&quot;, &quot;id&quot;)
.values(&quot;id&quot;, &quot;rank_num&quot;, &quot;current_vote_count&quot;, &quot;lag_vote_num&quot;)
</code></pre><h3 id="22-model-instances">2.2 Model Instances</h3>
<p><a href="https://docs.djangoproject.com/en/2.0/ref/models/instances/">https://docs.djangoproject.com/en/2.0/ref/models/instances/</a></p>
<h3 id="23-模型实例">2.3 模型实例</h3>
<h3 id="24-迁移机制">2.4 迁移机制</h3>
<ol>
<li>加 INSTALLED_APPS</li>
</ol>
<h2 id="0x03-django-orm-的高级功能">0x03 Django ORM 的高级功能</h2>
<h3 id="maneger">maneger</h3>
<p><a href="https://docs.djangoproject.com/en/2.0/topics/db/managers/">https://docs.djangoproject.com/en/2.0/topics/db/managers/</a></p>
<h3 id="raw-sql">raw sql</h3>
<p><a href="https://docs.djangoproject.com/en/2.0/topics/db/sql/">https://docs.djangoproject.com/en/2.0/topics/db/sql/</a></p>
<h4 id="database-fuction">database-fuction</h4>
<p><a href="https://docs.djangoproject.com/en/2.0/ref/models/database-functions/">https://docs.djangoproject.com/en/2.0/ref/models/database-functions/</a></p>
<h2 id="0x04-database-access-optimization">0x04 Database Access Optimization</h2>
<h3 id="41-使用连接池">4.1 使用连接池</h3>
<p>连接池是一种永远在线模型的实现</p>
<p>连接池：驱动程序类型</p>
<p>连接池：代理类型</p>
<h3 id="42-减少对-mysql-的访问">4.2 减少对 MySQL 的访问</h3>
<pre><code>select count(*) from pg_stat_activity where pid &lt;&gt; pg_backend_pid() and usename = current_user;

</code></pre><h3 id="before">Before</h3>
<pre><code>select count(*) from pg_stat_activity where pid &lt;&gt; pg_backend_pid() and usename = current_user;

</code></pre><h3 id="profile-first">Profile First</h3>
<ol>
<li>django-extentions</li>
<li>django-debug-toolbar</li>
</ol>
<p>手动</p>
<pre><code>queryset.explain

from django.db import connection
connection.queries

from django.db import reset_queries
reset_queries()
</code></pre><h2 id="0x05-django-orm-under-the-hood">0x05 Django ORM Under The Hood</h2>
<h3 id="理解-queryset">理解 QuerySet</h3>
<ul>
<li>querysets-are-lazy when-querysets-are-evaluated
<ul>
<li>Iteration</li>
<li>Slicing</li>
<li>Pickling/Caching</li>
<li>len</li>
<li>repr</li>
<li>list</li>
<li>bool</li>
</ul>
</li>
</ul>
<pre><code>obj == nobj # obj.id == nobj.id
</code></pre><ul>
<li>caching-and-querysets</li>
</ul>
<h3 id="理解-cached-attributes">理解 cached attributes</h3>
<pre><code>&gt;&gt;&gt; entry = Entry.objects.get(id=1)
&gt;&gt;&gt; entry.blog   # Blog object is retrieved at this point
&gt;&gt;&gt; entry.blog   # cached version, no DB access

&gt;&gt;&gt; entry = Entry.objects.get(id=1)
&gt;&gt;&gt; entry.authors.all()   # query performed
&gt;&gt;&gt; entry.authors.all()   # query performed again
</code></pre><h2 id="0xee-参考链接">0xEE 参考链接</h2>
<hr>
<p>ChangeLog:</p>
<ul>
<li><strong>2018-03-09</strong> 重修文字</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2020-01-01</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/orm/">ORM</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/20180331_sqlalchemycheatsheet/" class="prev" rel="prev" title="SQLAlchemy CheatSheet"><i class="fas fa-angle-left fa-fw"></i>SQLAlchemy CheatSheet</a>
            <a href="/posts/20180516_pycondjango/" class="next" rel="next" title="PyCon 2018 之 Django 专题">PyCon 2018 之 Django 专题<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.79.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="http://twocucao.xyz" target="_blank">twocucao</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
