<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Python 程序员如何优雅的看斗鱼 TV | 海拉鲁编程客</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/49455a07b6dd33600cdf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/49455a07b6dd33600cdf.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-20d43e08bea62467b090.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-4777350f2a9ff73ea2b0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3050679c6e5142ffcaf5.js" defer=""></script><script src="/_next/static/chunks/ea88be26-9bcf6ead520f4ac26973.js" defer=""></script><script src="/_next/static/chunks/421-f2f33a86b546237f0325.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-173fe2de48c90365db9d.js" defer=""></script><script src="/_next/static/oDi_oBCBuu3qj6v7hDnrL/_buildManifest.js" defer=""></script><script src="/_next/static/oDi_oBCBuu3qj6v7hDnrL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="v-page"><nav class="shadow"><div class="flex flex-col container mx-auto h-12 px-40 md:flex-row md:items-center md:justify-between"><div class="flex justify-between items-center"><div><a class="text-gray-800 text-xl md:text-xl leading-5" href="/">海拉鲁编程客</a></div><div><button type="button" class="block text-gray-800 hover:text-gray-600 focus:text-gray-600 focus:outline-none md:hidden"><svg viewBox="0 0 24 24" class="h-6 w-6 fill-current"><path d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"></path></svg></button></div></div><div class="md:flex flex-col md:flex-row md:-mx-4 hidden"><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/">首页</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/archive">归档</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/about">关于我</a><button style="cursor:pointer;overflow:hidden;width:50px;height:23.5px;appearance:none;-moz-appearance:none;-webkit-appearance:none;border:none;background-color:transparent;padding:0" aria-hidden="true"><div style="display:flex;align-items:center;justify-content:center;margin-top:-28.749999999999996px;margin-left:-16px;width:82.5px;height:82.5px"><div></div></div></button></div></div></nav><div class="v-article"><div class="v-article-main" style="margin:auto;width:786px"><div><h1 id="python-程序员如何优雅的看斗鱼-tv"><a class="v-toc-item" href="#python-程序员如何优雅的看斗鱼-tv">#</a> Python 程序员如何优雅的看斗鱼 TV</h1>
<h2 id="0x00-前言"><a class="v-toc-item" href="#0x00-前言">#</a> 0x00 前言</h2>
<p>过年的一段时间抽空研究写了一些关于斗鱼 TV 的弹幕的获取。分别使用 Python 和 Ruby 写了弹幕获取的客户端。</p>
<p>文章地址为：</p>
<p>Python 版本：<br>
<a href="http://www.jianshu.com/p/2e0d14978ae9">http://www.jianshu.com/p/2e0d14978ae9</a></p>
<p>Ruby 版本附加原理讲解：<br>
<a href="http://www.jianshu.com/p/ef0225b6bb0e">http://www.jianshu.com/p/ef0225b6bb0e</a></p>
<p>文章末尾写到了我有一个痛点 --rtmp 直播视频无法获取，后来在网友 <a href="http://www.jianshu.com/users/0675b42ac3ba">往事侞湮</a>] 的友善提醒下，终于 Get 到了。</p>
<p>于是，稍微完善了一下，我就发布了第一个命令行版本的斗鱼 TV 浏览弹幕小助手。</p>
<p>如果你是 MacOSX 的用户，你只需要</p>
<pre><code class="language-bash">brew install mplayer
pip3 install danmu<span class="token punctuation">.</span>fm
# danmu<span class="token punctuation">.</span>fm <span class="token operator">-</span>q <span class="token number">1</span> <span class="token operator">-</span>v <span class="token number">1</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span>
# 比如
danmu<span class="token punctuation">.</span>fm <span class="token operator">-</span>q <span class="token number">2</span> <span class="token operator">-</span>v <span class="token number">1</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>douyutv<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">16789</span>
# <span class="token operator">-</span>q 参数 <span class="token number">0</span> 为不调用 mplayer 进行播放，<span class="token number">1</span> 为使用 mplayer 进行普清视频的播放，<span class="token number">2</span> 为使用 mplayer 进行高清视频的播放，<span class="token number">3</span> 为使用 mplayer 进行超清视频的播放
</code></pre>
<p>如果你是 Ubuntu 用户，你只需要</p>
<pre><code class="language-bash">sudo apt<span class="token operator">-</span><span class="token keyword">get</span> install mplayer
pip3 install danmu<span class="token punctuation">.</span>fm
# danmu<span class="token punctuation">.</span>fm  <span class="token operator">-</span>v <span class="token number">1</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span>
# 比如
danmu<span class="token punctuation">.</span>fm  <span class="token operator">-</span>v <span class="token number">1</span> <span class="token operator">-</span>q http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>douyutv<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">16789</span>
#ubuntu 上 mplayer 播放器可以正常播放
</code></pre>
<p>如果你是 Win 用户，</p>
<blockquote>
<p>唉，windows 上面糟糕的编码问题。那单纯来看字幕的话也不是不可以的。只是我暂时没有对 Win 进行兼容。还是换 Linux 吧。</p>
</blockquote>
<h2 id="0x01-演示效果"><a class="v-toc-item" href="#0x01-演示效果">#</a> 0x01 演示效果</h2>
<p><img src="http://upload-images.jianshu.io/upload_images/52890-396d6451c68d2a83.gif?imageMogr2/auto-orient/strip" alt="1123.gif"></p>
<h2 id="0xee-代码地址"><a class="v-toc-item" href="#0xee-代码地址">#</a> 0xEE 代码地址</h2>
<p><a href="https://github.com/twocucao/danmu.fm">https://github.com/twocucao/danmu.fm</a></p>
<p>如果喜欢，请点个喜欢或者 star 一下</p>
<hr>
<p>ChangeLog:</p>
<ul>
<li>**Update 20160609 : ** 更新 Python 客户端，修复由于斗鱼网页版面修改带来的小问题，直接开启海量弹幕模式（请大家不要问我为什么端午节这一天为什么闲着没事更新代码，这个真的和情人节是同一个原因）.</li>
<li>**Update 20160220 : **更新 Python 客户端，增加直播视频的 Live 获取，以及 Mac 平台下面的 Mplayer 的视频播放。代码均放在 Github 上面。<a href="//link.zhihu.com/?target=https%3A//github.com/twocucao/danmu.fm">GitHub - twocucao/danmu.fm: douyutv danmu 斗鱼 TV 弹幕助手**</a></li>
<li>**Update 20160214 : **更新 Python 和 Ruby 客户端（请大家不要问我为什么情人节这一天为什么闲着没事更新代码）**</li>
</ul>
</div></div><div><ul class="v-article-toc">
<li><a href="#python-%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E7%9C%8B%E6%96%97%E9%B1%BC-tv">Python 程序员如何优雅的看斗鱼 TV</a>
<ul>
<li><a href="#0x00-%E5%89%8D%E8%A8%80">0x00 前言</a></li>
<li><a href="#0x01-%E6%BC%94%E7%A4%BA%E6%95%88%E6%9E%9C">0x01 演示效果</a></li>
<li><a href="#0xee-%E4%BB%A3%E7%A0%81%E5%9C%B0%E5%9D%80">0xEE 代码地址</a></li>
</ul>
</li>
</ul>
</div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"tags":["Python"],"path":"20160215_Python斗鱼弹幕助手.md","title":"Python 程序员如何优雅的看斗鱼 TV","slug":"Python 程序员如何优雅的看斗鱼 TV","date":"2016-02-15","category":"Python","lastMod":"2020-01-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"\u003ch1 id=\"python-程序员如何优雅的看斗鱼-tv\"\u003e\u003ca class=\"v-toc-item\" href=\"#python-程序员如何优雅的看斗鱼-tv\"\u003e#\u003c/a\u003e Python 程序员如何优雅的看斗鱼 TV\u003c/h1\u003e\n\u003ch2 id=\"0x00-前言\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x00-前言\"\u003e#\u003c/a\u003e 0x00 前言\u003c/h2\u003e\n\u003cp\u003e过年的一段时间抽空研究写了一些关于斗鱼 TV 的弹幕的获取。分别使用 Python 和 Ruby 写了弹幕获取的客户端。\u003c/p\u003e\n\u003cp\u003e文章地址为：\u003c/p\u003e\n\u003cp\u003ePython 版本：\u003cbr\u003e\n\u003ca href=\"http://www.jianshu.com/p/2e0d14978ae9\"\u003ehttp://www.jianshu.com/p/2e0d14978ae9\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eRuby 版本附加原理讲解：\u003cbr\u003e\n\u003ca href=\"http://www.jianshu.com/p/ef0225b6bb0e\"\u003ehttp://www.jianshu.com/p/ef0225b6bb0e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e文章末尾写到了我有一个痛点 --rtmp 直播视频无法获取，后来在网友 \u003ca href=\"http://www.jianshu.com/users/0675b42ac3ba\"\u003e往事侞湮\u003c/a\u003e] 的友善提醒下，终于 Get 到了。\u003c/p\u003e\n\u003cp\u003e于是，稍微完善了一下，我就发布了第一个命令行版本的斗鱼 TV 浏览弹幕小助手。\u003c/p\u003e\n\u003cp\u003e如果你是 MacOSX 的用户，你只需要\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003ebrew install mplayer\npip3 install danmu\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efm\n# danmu\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efm \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eq \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ev \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eurl\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n# 比如\ndanmu\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efm \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eq \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ev \u003cspan class=\"token number\"\u003e1\u003c/span\u003e http\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ewww\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edouyutv\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecom\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token number\"\u003e16789\u003c/span\u003e\n# \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eq 参数 \u003cspan class=\"token number\"\u003e0\u003c/span\u003e 为不调用 mplayer 进行播放，\u003cspan class=\"token number\"\u003e1\u003c/span\u003e 为使用 mplayer 进行普清视频的播放，\u003cspan class=\"token number\"\u003e2\u003c/span\u003e 为使用 mplayer 进行高清视频的播放，\u003cspan class=\"token number\"\u003e3\u003c/span\u003e 为使用 mplayer 进行超清视频的播放\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e如果你是 Ubuntu 用户，你只需要\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo apt\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e install mplayer\npip3 install danmu\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efm\n# danmu\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efm  \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ev \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eurl\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n# 比如\ndanmu\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efm  \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ev \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eq http\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ewww\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edouyutv\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecom\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token number\"\u003e16789\u003c/span\u003e\n#ubuntu 上 mplayer 播放器可以正常播放\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e如果你是 Win 用户，\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e唉，windows 上面糟糕的编码问题。那单纯来看字幕的话也不是不可以的。只是我暂时没有对 Win 进行兼容。还是换 Linux 吧。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"0x01-演示效果\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x01-演示效果\"\u003e#\u003c/a\u003e 0x01 演示效果\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"http://upload-images.jianshu.io/upload_images/52890-396d6451c68d2a83.gif?imageMogr2/auto-orient/strip\" alt=\"1123.gif\"\u003e\u003c/p\u003e\n\u003ch2 id=\"0xee-代码地址\"\u003e\u003ca class=\"v-toc-item\" href=\"#0xee-代码地址\"\u003e#\u003c/a\u003e 0xEE 代码地址\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/twocucao/danmu.fm\"\u003ehttps://github.com/twocucao/danmu.fm\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e如果喜欢，请点个喜欢或者 star 一下\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eChangeLog:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e**Update 20160609 : ** 更新 Python 客户端，修复由于斗鱼网页版面修改带来的小问题，直接开启海量弹幕模式（请大家不要问我为什么端午节这一天为什么闲着没事更新代码，这个真的和情人节是同一个原因）.\u003c/li\u003e\n\u003cli\u003e**Update 20160220 : **更新 Python 客户端，增加直播视频的 Live 获取，以及 Mac 平台下面的 Mplayer 的视频播放。代码均放在 Github 上面。\u003ca href=\"//link.zhihu.com/?target=https%3A//github.com/twocucao/danmu.fm\"\u003eGitHub - twocucao/danmu.fm: douyutv danmu 斗鱼 TV 弹幕助手**\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e**Update 20160214 : **更新 Python 和 Ruby 客户端（请大家不要问我为什么情人节这一天为什么闲着没事更新代码）**\u003c/li\u003e\n\u003c/ul\u003e\n","toc":"\u003cul class=\"v-article-toc\"\u003e\n\u003cli\u003e\u003ca href=\"#python-%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E7%9C%8B%E6%96%97%E9%B1%BC-tv\"\u003ePython 程序员如何优雅的看斗鱼 TV\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#0x00-%E5%89%8D%E8%A8%80\"\u003e0x00 前言\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x01-%E6%BC%94%E7%A4%BA%E6%95%88%E6%9E%9C\"\u003e0x01 演示效果\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0xee-%E4%BB%A3%E7%A0%81%E5%9C%B0%E5%9D%80\"\u003e0xEE 代码地址\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"Python 程序员如何优雅的看斗鱼 TV"},"buildId":"oDi_oBCBuu3qj6v7hDnrL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>