<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Ubuntu CheatSheet | 海拉鲁编程客</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/49455a07b6dd33600cdf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/49455a07b6dd33600cdf.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-20d43e08bea62467b090.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-4777350f2a9ff73ea2b0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3050679c6e5142ffcaf5.js" defer=""></script><script src="/_next/static/chunks/ea88be26-9bcf6ead520f4ac26973.js" defer=""></script><script src="/_next/static/chunks/421-f2f33a86b546237f0325.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-173fe2de48c90365db9d.js" defer=""></script><script src="/_next/static/uCwe9m-iio9bnoWMgWDqE/_buildManifest.js" defer=""></script><script src="/_next/static/uCwe9m-iio9bnoWMgWDqE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="v-page"><nav class="shadow"><div class="flex flex-col container mx-auto h-12 px-40 md:flex-row md:items-center md:justify-between"><div class="flex justify-between items-center"><div><a class="text-gray-800 text-xl md:text-xl leading-5" href="/">海拉鲁编程客</a></div><div><button type="button" class="block text-gray-800 hover:text-gray-600 focus:text-gray-600 focus:outline-none md:hidden"><svg viewBox="0 0 24 24" class="h-6 w-6 fill-current"><path d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"></path></svg></button></div></div><div class="md:flex flex-col md:flex-row md:-mx-4 hidden"><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/">首页</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/archive">归档</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/about">关于我</a><button style="cursor:pointer;overflow:hidden;width:50px;height:23.5px;appearance:none;-moz-appearance:none;-webkit-appearance:none;border:none;background-color:transparent;padding:0" aria-hidden="true"><div style="display:flex;align-items:center;justify-content:center;margin-top:-28.749999999999996px;margin-left:-16px;width:82.5px;height:82.5px"><div></div></div></button></div></div></nav><div class="v-article"><div class="v-article-main" style="margin:auto;width:786px"><div><h1 id="ubuntu-cheatsheet"><a class="v-toc-item" href="#ubuntu-cheatsheet">#</a> Ubuntu CheatSheet</h1>
<h2 id="0x01-基础设置"><a class="v-toc-item" href="#0x01-基础设置">#</a> 0x01 基础设置</h2>
<h2 id="0x02-软件安装"><a class="v-toc-item" href="#0x02-软件安装">#</a> 0x02 软件安装</h2>
<pre><code>sudo apt-get --purge autoremove
</code></pre>
<pre><code class="language-bash"># 更新
sudo apt update
sudo apt install git<span class="token operator">-</span>core curl zlib1g<span class="token operator">-</span>dev build<span class="token operator">-</span>essential libssl<span class="token operator">-</span>dev libreadline<span class="token operator">-</span>dev libyaml<span class="token operator">-</span>dev libsqlite3<span class="token operator">-</span>dev sqlite3 libxml2<span class="token operator">-</span>dev libxslt1<span class="token operator">-</span>dev libcurl4<span class="token operator">-</span>openssl<span class="token operator">-</span>dev python<span class="token operator">-</span>software<span class="token operator">-</span>properties libffi<span class="token operator">-</span>devsudo apt<span class="token operator">-</span><span class="token keyword">get</span> install zsh tree htopsudo apt<span class="token operator">-</span><span class="token keyword">get</span> install build<span class="token operator">-</span>essential acl ntp htop git libpq<span class="token operator">-</span>dev libmysqlclient<span class="token operator">-</span>dev libffi<span class="token operator">-</span>dev libfreetype6<span class="token operator">-</span>dev libjpeg8<span class="token operator">-</span>dev liblcms2<span class="token operator">-</span>dev libtiff5<span class="token operator">-</span>dev libwebp<span class="token operator">-</span>dev libxml2<span class="token operator">-</span>dev libxslt1<span class="token operator">-</span>dev tcl8<span class="token punctuation">.</span><span class="token number">6</span><span class="token operator">-</span>dev tk8<span class="token punctuation">.</span><span class="token number">6</span><span class="token operator">-</span>dev zlib1g<span class="token operator">-</span>dev python<span class="token operator">-</span>dev python<span class="token operator">-</span>pip python<span class="token operator">-</span>pycurl python<span class="token operator">-</span>tk ipython supervisor python3<span class="token punctuation">.</span><span class="token number">5</span> python3<span class="token punctuation">.</span><span class="token number">5</span><span class="token operator">-</span>dev python3<span class="token operator">-</span>pip python3<span class="token operator">-</span>lxml python3<span class="token operator">-</span>tk ipython3sudo apt<span class="token operator">-</span><span class="token keyword">get</span> install mysql<span class="token operator">-</span>server mysql<span class="token operator">-</span>client libmysqlclient<span class="token operator">-</span>dev slurm

# <span class="token constant">GIT</span> 配置
git config <span class="token operator">--</span>global color<span class="token punctuation">.</span>ui <span class="token boolean">true</span>
git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>name <span class="token string">"twocucao"</span>
git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>email <span class="token string">"twocucao@gmail.com"</span>
ssh<span class="token operator">-</span>keygen <span class="token operator">-</span>t rsa <span class="token operator">-</span>b <span class="token number">4096</span> <span class="token operator">-</span><span class="token constant">C</span> <span class="token string">"twocucao@gmail.com"</span>
</code></pre>
<p>第一步，更新源：</p>
<h3 id="21-设置无登录密钥"><a class="v-toc-item" href="#21-设置无登录密钥">#</a> 2.1 设置无登录密钥</h3>
<pre><code># 刚开始用了一个很蠢的方法
scp ~/.ssh/id_rsa.pub twocucao@192.168.2.156:.ssh/id_rsa.pub
ssh twocucao@192.168.2.156 &quot;mkdir .ssh;chmod 0700 .ssh&quot;
# 现在想想，可以直接 ssh-copy-id
ssh-copy-id twocucao@192.168.2.156
</code></pre>
<h2 id="0x02-了解-linux-服务器运行情况"><a class="v-toc-item" href="#0x02-了解-linux-服务器运行情况">#</a> 0x02 了解 Linux 服务器运行情况</h2>
<pre><code># 运行时间 uptime
# 内存情况 free -h
# 网络类
## 实时流量监控 iftop
## 进程占用带宽 nethogs
## sudo nethogs eth0
iptraf
# 磁盘类 iotop
## 当 dstat 的 wai 字段值比较大时，可以使用 iotop 找出哪些进程出了问题
# 综合类 之 监控进程，进程管理
top
htop
glances # PS , 这个监控粒度更细
# 综合类 可以取代 vmstat , iostat , netstat , ifstatdstat
# 综合类
# 约等于 strace + tcpdump + htop + iftop + lsofsysdig
</code></pre>
<h2 id="0x04-踩坑集合"><a class="v-toc-item" href="#0x04-踩坑集合">#</a> 0x04 踩坑集合</h2>
<h3 id="31-磁盘问题"><a class="v-toc-item" href="#31-磁盘问题">#</a> 3.1 磁盘问题</h3>
<pre><code>df -h 查看磁盘块占用的文件（block）
df -i 查看索引节点的占用（Inodes）
find / -size +100M |xargs ls -lh
# 删除 5 天前的文件
find /path/to/files* -mtime +5 -exec rm {} \;
du -h
rm xxx.log
echo &quot;&quot; &gt; xxx.log
</code></pre>
<hr>
<p>ChangeLog:</p>
<ul>
<li><strong>2017-03-19</strong> 重修文字，准备整理安装配置将结果转化为 Ansible PlayBook</li>
<li><strong>2017-10-20</strong> 重修文字，准备整理安装配置将结果转化为 Ansible PlayBook</li>
</ul>
</div></div><div><ul class="v-article-toc">
<li><a href="#ubuntu-cheatsheet">Ubuntu CheatSheet</a>
<ul>
<li><a href="#0x01-%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AE">0x01 基础设置</a></li>
<li><a href="#0x02-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85">0x02 软件安装</a>
<ul>
<li><a href="#21-%E8%AE%BE%E7%BD%AE%E6%97%A0%E7%99%BB%E5%BD%95%E5%AF%86%E9%92%A5">2.1 设置无登录密钥</a></li>
</ul>
</li>
<li><a href="#0x02-%E4%BA%86%E8%A7%A3-linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8C%E6%83%85%E5%86%B5">0x02 了解 Linux 服务器运行情况</a></li>
<li><a href="#0x04-%E8%B8%A9%E5%9D%91%E9%9B%86%E5%90%88">0x04 踩坑集合</a>
<ul>
<li><a href="#31-%E7%A3%81%E7%9B%98%E9%97%AE%E9%A2%98">3.1 磁盘问题</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"tags":["Ubuntu"],"path":"20161005_UbuntuCheatSheet.md","title":"Ubuntu CheatSheet","slug":"Ubuntu CheatSheet","date":"2016-10-05","category":"善用佳软","lastMod":"2020-01-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"\u003ch1 id=\"ubuntu-cheatsheet\"\u003e\u003ca class=\"v-toc-item\" href=\"#ubuntu-cheatsheet\"\u003e#\u003c/a\u003e Ubuntu CheatSheet\u003c/h1\u003e\n\u003ch2 id=\"0x01-基础设置\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x01-基础设置\"\u003e#\u003c/a\u003e 0x01 基础设置\u003c/h2\u003e\n\u003ch2 id=\"0x02-软件安装\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x02-软件安装\"\u003e#\u003c/a\u003e 0x02 软件安装\u003c/h2\u003e\n\u003cpre\u003e\u003ccode\u003esudo apt-get --purge autoremove\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# 更新\nsudo apt update\nsudo apt install git\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ecore curl zlib1g\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev build\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eessential libssl\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libreadline\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libyaml\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libsqlite3\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev sqlite3 libxml2\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libxslt1\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libcurl4\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eopenssl\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev python\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esoftware\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eproperties libffi\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edevsudo apt\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e install zsh tree htopsudo apt\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e install build\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eessential acl ntp htop git libpq\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libmysqlclient\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libffi\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libfreetype6\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libjpeg8\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev liblcms2\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libtiff5\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libwebp\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libxml2\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev libxslt1\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev tcl8\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token number\"\u003e6\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev tk8\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token number\"\u003e6\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev zlib1g\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev python\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev python\u003cspan class=\"token operator\"\u003e-\u003c/span\u003epip python\u003cspan class=\"token operator\"\u003e-\u003c/span\u003epycurl python\u003cspan class=\"token operator\"\u003e-\u003c/span\u003etk ipython supervisor python3\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e python3\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev python3\u003cspan class=\"token operator\"\u003e-\u003c/span\u003epip python3\u003cspan class=\"token operator\"\u003e-\u003c/span\u003elxml python3\u003cspan class=\"token operator\"\u003e-\u003c/span\u003etk ipython3sudo apt\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e install mysql\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eserver mysql\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eclient libmysqlclient\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edev slurm\n\n# \u003cspan class=\"token constant\"\u003eGIT\u003c/span\u003e 配置\ngit config \u003cspan class=\"token operator\"\u003e--\u003c/span\u003eglobal color\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eui \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\ngit config \u003cspan class=\"token operator\"\u003e--\u003c/span\u003eglobal user\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"twocucao\"\u003c/span\u003e\ngit config \u003cspan class=\"token operator\"\u003e--\u003c/span\u003eglobal user\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eemail \u003cspan class=\"token string\"\u003e\"twocucao@gmail.com\"\u003c/span\u003e\nssh\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ekeygen \u003cspan class=\"token operator\"\u003e-\u003c/span\u003et rsa \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eb \u003cspan class=\"token number\"\u003e4096\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token constant\"\u003eC\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"twocucao@gmail.com\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e第一步，更新源：\u003c/p\u003e\n\u003ch3 id=\"21-设置无登录密钥\"\u003e\u003ca class=\"v-toc-item\" href=\"#21-设置无登录密钥\"\u003e#\u003c/a\u003e 2.1 设置无登录密钥\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e# 刚开始用了一个很蠢的方法\nscp ~/.ssh/id_rsa.pub twocucao@192.168.2.156:.ssh/id_rsa.pub\nssh twocucao@192.168.2.156 \u0026quot;mkdir .ssh;chmod 0700 .ssh\u0026quot;\n# 现在想想，可以直接 ssh-copy-id\nssh-copy-id twocucao@192.168.2.156\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x02-了解-linux-服务器运行情况\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x02-了解-linux-服务器运行情况\"\u003e#\u003c/a\u003e 0x02 了解 Linux 服务器运行情况\u003c/h2\u003e\n\u003cpre\u003e\u003ccode\u003e# 运行时间 uptime\n# 内存情况 free -h\n# 网络类\n## 实时流量监控 iftop\n## 进程占用带宽 nethogs\n## sudo nethogs eth0\niptraf\n# 磁盘类 iotop\n## 当 dstat 的 wai 字段值比较大时，可以使用 iotop 找出哪些进程出了问题\n# 综合类 之 监控进程，进程管理\ntop\nhtop\nglances # PS , 这个监控粒度更细\n# 综合类 可以取代 vmstat , iostat , netstat , ifstatdstat\n# 综合类\n# 约等于 strace + tcpdump + htop + iftop + lsofsysdig\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x04-踩坑集合\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x04-踩坑集合\"\u003e#\u003c/a\u003e 0x04 踩坑集合\u003c/h2\u003e\n\u003ch3 id=\"31-磁盘问题\"\u003e\u003ca class=\"v-toc-item\" href=\"#31-磁盘问题\"\u003e#\u003c/a\u003e 3.1 磁盘问题\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003edf -h 查看磁盘块占用的文件（block）\ndf -i 查看索引节点的占用（Inodes）\nfind / -size +100M |xargs ls -lh\n# 删除 5 天前的文件\nfind /path/to/files* -mtime +5 -exec rm {} \\;\ndu -h\nrm xxx.log\necho \u0026quot;\u0026quot; \u0026gt; xxx.log\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003cp\u003eChangeLog:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e2017-03-19\u003c/strong\u003e 重修文字，准备整理安装配置将结果转化为 Ansible PlayBook\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e2017-10-20\u003c/strong\u003e 重修文字，准备整理安装配置将结果转化为 Ansible PlayBook\u003c/li\u003e\n\u003c/ul\u003e\n","toc":"\u003cul class=\"v-article-toc\"\u003e\n\u003cli\u003e\u003ca href=\"#ubuntu-cheatsheet\"\u003eUbuntu CheatSheet\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#0x01-%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AE\"\u003e0x01 基础设置\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x02-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85\"\u003e0x02 软件安装\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#21-%E8%AE%BE%E7%BD%AE%E6%97%A0%E7%99%BB%E5%BD%95%E5%AF%86%E9%92%A5\"\u003e2.1 设置无登录密钥\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x02-%E4%BA%86%E8%A7%A3-linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8C%E6%83%85%E5%86%B5\"\u003e0x02 了解 Linux 服务器运行情况\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x04-%E8%B8%A9%E5%9D%91%E9%9B%86%E5%90%88\"\u003e0x04 踩坑集合\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#31-%E7%A3%81%E7%9B%98%E9%97%AE%E9%A2%98\"\u003e3.1 磁盘问题\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"Ubuntu CheatSheet"},"buildId":"uCwe9m-iio9bnoWMgWDqE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>