<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MySQL CheatSheet | 海拉鲁编程客</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/49455a07b6dd33600cdf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/49455a07b6dd33600cdf.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-20d43e08bea62467b090.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-4777350f2a9ff73ea2b0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3050679c6e5142ffcaf5.js" defer=""></script><script src="/_next/static/chunks/ea88be26-9bcf6ead520f4ac26973.js" defer=""></script><script src="/_next/static/chunks/421-f2f33a86b546237f0325.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-173fe2de48c90365db9d.js" defer=""></script><script src="/_next/static/uCwe9m-iio9bnoWMgWDqE/_buildManifest.js" defer=""></script><script src="/_next/static/uCwe9m-iio9bnoWMgWDqE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="v-page"><nav class="shadow"><div class="flex flex-col container mx-auto h-12 px-40 md:flex-row md:items-center md:justify-between"><div class="flex justify-between items-center"><div><a class="text-gray-800 text-xl md:text-xl leading-5" href="/">海拉鲁编程客</a></div><div><button type="button" class="block text-gray-800 hover:text-gray-600 focus:text-gray-600 focus:outline-none md:hidden"><svg viewBox="0 0 24 24" class="h-6 w-6 fill-current"><path d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"></path></svg></button></div></div><div class="md:flex flex-col md:flex-row md:-mx-4 hidden"><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/">首页</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/archive">归档</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/about">关于我</a><button style="cursor:pointer;overflow:hidden;width:50px;height:23.5px;appearance:none;-moz-appearance:none;-webkit-appearance:none;border:none;background-color:transparent;padding:0" aria-hidden="true"><div style="display:flex;align-items:center;justify-content:center;margin-top:-28.749999999999996px;margin-left:-16px;width:82.5px;height:82.5px"><div></div></div></button></div></div></nav><div class="v-article"><div class="v-article-main" style="margin:auto;width:786px"><div><h1 id="mysql-cheatsheet"><a class="v-toc-item" href="#mysql-cheatsheet">#</a> MySQL CheatSheet</h1>
<h2 id="0x00-前言"><a class="v-toc-item" href="#0x00-前言">#</a> 0x00 前言</h2>
<p>本文为 Cheatsheet 类型文章，用于记录我在日常编程中经常使用的 MySQL 相关命令。主要包含：</p>
<ul>
<li>MySQL Shell, 其实就是 SQL 命令。</li>
<li>MySQL 配套工具</li>
<li>Python API</li>
</ul>
<p>不定期更新。</p>
<!-- more -->
<h2 id="0x01-安装配置基本-shell-命令"><a class="v-toc-item" href="#0x01-安装配置基本-shell-命令">#</a> 0x01 安装，配置，基本 shell 命令</h2>
<h3 id="字符编码"><a class="v-toc-item" href="#字符编码">#</a> 字符编码</h3>
<blockquote>
<p>UTF-8 , Please</p>
</blockquote>
<p>真的很讨厌那些用 GBK 的程序员啊！</p>
<pre><code class="language-bash"># 注意，下面的设置 MySQL 是无法保存 emoji 的 <span class="token operator">/</span>
<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
<span class="token keyword">default</span><span class="token operator">-</span>character<span class="token operator">-</span>set<span class="token operator">=</span>utf8

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
collation<span class="token operator">-</span>server <span class="token operator">=</span> utf8_general_ci
init<span class="token operator">-</span>connect<span class="token operator">=</span><span class="token string">'SET NAMES utf8'</span>
character<span class="token operator">-</span>set<span class="token operator">-</span>server <span class="token operator">=</span> utf8
</code></pre>
<p>然后在 mysql console 执行：</p>
<pre><code class="language-bash">show variables like <span class="token string">"%character%"</span><span class="token punctuation">;</span>show variables like <span class="token string">"%collation%"</span><span class="token punctuation">;</span>
</code></pre>
<p>如下即可</p>
<h2 id="0x02-mysql-配套工具"><a class="v-toc-item" href="#0x02-mysql-配套工具">#</a> 0x02 MySQL 配套工具</h2>
<ul>
<li>JetBrain 的 Datagrip 作为 编写大段 SQL 语句的 IDE</li>
<li>通过网络或者 Dash 查看文档</li>
<li>强烈推荐 mycli 作为正常情况下的 MySQL 命令的替代品。</li>
<li>MySQL 官方自带工具</li>
</ul>
<p>只挑选几个重要的，常用的说一说。</p>
<pre><code class="language-bash"># 启动 <span class="token constant">MYSQL</span>

# 常规 mysql
mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p password
## 命令的用户名和密码最好与命令合在一起
mysqlshow <span class="token operator">-</span>uroot <span class="token operator">-</span>psomepass some_db<span class="token punctuation">;</span>
# 导入数据
mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p password <span class="token operator">&lt;</span> filename
# 优雅的导入数据，可以查看进度条的 Hacks
pv <span class="token operator">-</span>i <span class="token number">1</span> <span class="token operator">-</span>p <span class="token operator">-</span>t <span class="token operator">-</span>e <span class="token operator">/</span>Users<span class="token operator">/</span>twocucao<span class="token operator">/</span>Codes<span class="token operator">/</span>update_new_date<span class="token punctuation">.</span>sql <span class="token operator">|</span> mysql <span class="token operator">-</span>uadmin <span class="token operator">-</span>p123456 <span class="token operator">-</span>h <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.254</span> <span class="token operator">--</span>port<span class="token operator">=</span><span class="token number">3306</span> some_db
# 导出数据
mysqldump <span class="token operator">-</span>u username <span class="token operator">-</span>p password database <span class="token punctuation">[</span>tables<span class="token punctuation">]</span> <span class="token operator">></span> filename
mysqldump database table_bame <span class="token operator">--</span>where<span class="token operator">=</span><span class="token string">"date_column BETWEEN '2012-07-01 00:00:00' and '2012-12-01 00:00:00'"</span>

# ref <span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>dev<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>com<span class="token operator">/</span>doc<span class="token operator">/</span>refman<span class="token operator">/</span><span class="token number">5.7</span><span class="token operator">/</span>en<span class="token operator">/</span>mysqldump<span class="token punctuation">.</span>html#option_mysqldump_where
</code></pre>
<h2 id="0x03-mysql-常用代码"><a class="v-toc-item" href="#0x03-mysql-常用代码">#</a> 0x03 MySQL 常用代码</h2>
<pre><code class="language-bash"><span class="token constant">SHOW</span> <span class="token constant">DATABASES</span><span class="token punctuation">;</span>
<span class="token constant">CREATE</span> <span class="token constant">DATABASE</span> database<span class="token punctuation">;</span>
<span class="token constant">USE</span> database<span class="token punctuation">;</span>
<span class="token constant">SHOW</span> <span class="token constant">TABLES</span><span class="token punctuation">;</span>
<span class="token constant">DESCRIBE</span> table<span class="token punctuation">;</span>
<span class="token constant">SHOW</span> <span class="token constant">COLUMN</span> <span class="token constant">FROM</span> table<span class="token punctuation">;</span>
<span class="token constant">DROP</span> <span class="token constant">DATEBASE</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="0x04-常用代码片段"><a class="v-toc-item" href="#0x04-常用代码片段">#</a> 0x04 常用代码片段</h2>
<h3 id="1-数据清洗常用脚本"><a class="v-toc-item" href="#1-数据清洗常用脚本">#</a> 1. 数据清洗常用脚本</h3>
<pre><code class="language-sql"><span class="token operator">--</span> 少量去重
<span class="token constant">CREATE</span> <span class="token constant">TABLE</span> everyday_info_temp <span class="token constant">AS</span> <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span>  everyday_info <span class="token constant">GROUP</span> <span class="token constant">BY</span> id<span class="token punctuation">,</span>date<span class="token punctuation">,</span>numbers<span class="token punctuation">;</span>
<span class="token operator">--</span> 大量去重
<span class="token constant">CREATE</span> <span class="token constant">TABLE</span> everyday_info_temp <span class="token constant">AS</span> <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span>  everyday_info <span class="token constant">GROUP</span> <span class="token constant">BY</span> id<span class="token punctuation">,</span>date<span class="token punctuation">,</span>numbers <span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre>
<p><a href="http://stackoverflow.com/questions/16568228/how-to-transpose-mysql-table-rows-into-columns">http://stackoverflow.com/questions/16568228/how-to-transpose-mysql-table-rows-into-columns</a></p>
<pre><code>  SELECT @max := MAX(ID)+ 1 FROM ABC;

  PREPARE stmt FROM 'ALTER TABLE ABC AUTO_INCREMENT = ?';
  EXECUTE stmt USING @max;

  DEALLOCATE PREPARE stmt;
</code></pre>
<p>mysql&gt; delete from shophtml;<br>
Query OK, 117141 rows affected (4 min 2.92 sec)<br>
TRUNCATE shophtml;</p>
<h3 id="2-用户管理常用脚本"><a class="v-toc-item" href="#2-用户管理常用脚本">#</a> 2. 用户管理常用脚本</h3>
<pre><code class="language-bash"><span class="token constant">SELECT</span> User <span class="token constant">FROM</span> mysql<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
</code></pre>
<h3 id="3-备份迁移常用脚本"><a class="v-toc-item" href="#3-备份迁移常用脚本">#</a> 3. 备份迁移常用脚本</h3>
<pre><code>#! /bin/bash

TIMESTAMP=$(date +&quot;%F&quot;)
BACKUP_DIR=&quot;/mnt/$TIMESTAMP&quot;
MYSQL_USER=&quot;root&quot;
MYSQL=/usr/bin/mysql
MYSQL_PASSWORD=&quot;password&quot;
MYSQLDUMP=/usr/bin/mysqldump
DATABASE=&quot;cyjoycity&quot;

mkdir -p &quot;$BACKUP_DIR/mysql&quot;

for t in $($MYSQL -NBA -u $MYSQL_USER -p$MYSQL_PASSWORD -D $DATABASE -e 'show tables')
do
    echo &quot;DUMPING TABLE: $DB.$t&quot;
    $MYSQLDUMP --force --opt --user=$MYSQL_USER -p$MYSQL_PASSWORD $DATABASE $t | gzip &gt; &quot;$BACKUP_DIR/mysql/$t.sql.gz&quot;
done

</code></pre>
<h3 id="4-性能优化常用脚本"><a class="v-toc-item" href="#4-性能优化常用脚本">#</a> 4. 性能优化常用脚本</h3>
<p>SHOW FULL PROCESSLIST;</p>
<h3 id="6-远程连接"><a class="v-toc-item" href="#6-远程连接">#</a> 6. 远程连接</h3>
<pre><code class="language-mysql">
<span class="token operator">/</span>etc<span class="token operator">/</span>mysql<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf

# bind<span class="token operator">-</span>address <span class="token operator">=</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>

<span class="token constant">GRANT</span> <span class="token constant">ALL</span> <span class="token constant">PRIVILEGES</span> <span class="token constant">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token constant">TO</span> <span class="token string">'root'</span>@<span class="token string">'%'</span> <span class="token constant">IDENTIFIED</span> <span class="token constant">BY</span> <span class="token string">'password'</span> <span class="token constant">WITH</span> <span class="token constant">GRANT</span> <span class="token constant">OPTION</span><span class="token punctuation">;</span>
<span class="token constant">FLUSH</span> <span class="token constant">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="5-其他脚本"><a class="v-toc-item" href="#5-其他脚本">#</a> 5. 其他脚本</h3>
<pre><code class="language-sql">
# <span class="token number">6.</span> 随机选择 <span class="token number">10</span> 组记录
<span class="token operator">--</span> 慢速
<span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> Table_Name <span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token constant">RAND</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token constant">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span>

<span class="token operator">--</span> 快速
<span class="token constant">SELECT</span> name
  <span class="token constant">FROM</span> random <span class="token constant">AS</span> r1 <span class="token constant">JOIN</span>
       <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token constant">CEIL</span><span class="token punctuation">(</span><span class="token constant">RAND</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>
                     <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token constant">MAX</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
                        <span class="token constant">FROM</span> random<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> id<span class="token punctuation">)</span>
        <span class="token constant">AS</span> r2
 <span class="token constant">WHERE</span> r1<span class="token punctuation">.</span>id <span class="token operator">>=</span> r2<span class="token punctuation">.</span>id
 <span class="token constant">ORDER</span> <span class="token constant">BY</span> r1<span class="token punctuation">.</span>id <span class="token constant">ASC</span>
 <span class="token constant">LIMIT</span> <span class="token number">1</span>
</code></pre>
<pre><code class="language-sql">
# <span class="token number">1.</span> 查询时间
select <span class="token function">date_format</span><span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> day from table_name
select <span class="token function">from_unixtime</span><span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> day from table_name

# <span class="token number">2.</span> <span class="token constant">CASE</span> <span class="token constant">WHEN</span> 案例

## <span class="token number">2.1</span> 返回同一列多个结果

## <span class="token number">2.2</span> 行列值颠倒

# <span class="token number">3.</span> 替换某字段内容
update table_name <span class="token keyword">set</span> content <span class="token operator">=</span> <span class="token constant">REPLACE</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token string">'bbb'</span><span class="token punctuation">)</span>  <span class="token function">where</span> <span class="token punctuation">(</span>content like <span class="token string">'%aaa%'</span><span class="token punctuation">)</span>

# <span class="token number">4.</span> 获取表中某字段包含某字符串的数据
<span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">表名</span><span class="token template-punctuation string">`</span></span> <span class="token constant">WHERE</span> <span class="token constant">LOCATE</span><span class="token punctuation">(</span><span class="token string">'关键字'</span><span class="token punctuation">,</span> 字段名）

# <span class="token number">5.</span> 字符串处理
<span class="token constant">SELECT</span> <span class="token constant">SUBSTRING</span>（字段名，<span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token constant">FROM</span> 表名

# <span class="token number">6.</span> 求解数字的连续范围

select <span class="token function">min</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> start_range<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> end_range
<span class="token function">from</span>
<span class="token punctuation">(</span>
    select number<span class="token punctuation">,</span>rn<span class="token punctuation">,</span>number<span class="token operator">-</span>rn diff <span class="token function">from</span>
    <span class="token punctuation">(</span>
        select number<span class="token punctuation">,</span>@number<span class="token operator">:</span><span class="token operator">=</span>@number<span class="token operator">+</span><span class="token number">1</span> rn from test_number<span class="token punctuation">,</span><span class="token punctuation">(</span>select @number<span class="token operator">:</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> number
    <span class="token punctuation">)</span> b
<span class="token punctuation">)</span> c group by diff<span class="token punctuation">;</span>

</code></pre>
<h2 id="0x05-性能优化切入点"><a class="v-toc-item" href="#0x05-性能优化切入点">#</a> 0x05 性能优化切入点</h2>
<p>应用的切入点也比较简单和暴力：</p>
<ol>
<li>优化应用层面的查询。</li>
<li>优化数据库的 SQL 查询。</li>
<li>优化数据库的存储结构。</li>
<li>优化单个数据库服务器的性能。</li>
<li>遵循『机多运算大』的原则，上几台机器。</li>
<li>更好的机器，即加内存条，上好的 CPU。</li>
</ol>
<p>优化前三点，则需要理解取数据的客户端从发送 SQL 语句到接受数据之间都发生了什么？流程如下：</p>
<ol>
<li>开启连接</li>
<li>发送查询给服务器</li>
<li>分析查询</li>
<li>执行查询</li>
<li>传输数据</li>
<li>关闭连接</li>
</ol>
<h3 id="优化应用层面的查询"><a class="v-toc-item" href="#优化应用层面的查询">#</a> 优化应用层面的查询</h3>
<p>在同样工作量的情况下不断的减少数据库的连接，将多个动作放在一起使用 TRANSACTION 可以显著提高速度。</p>
<ol>
<li>对于 OLTP 类型的数据库设计的数据库，一些耗时查询往往是可以在应用层面查询进行优化的，比如在手写代码应用级缓存，借助外部组件 (redis) 应用内缓存。</li>
<li>对于一些有性能要求的场景，不要使用 select * from xxx 这种查询，服务器到客户端传输也是需要时间的，而是要选择需要的字段。</li>
<li>如果有必要，不要在循环内部进行数据库查询，而是直接取出来放在内存中进行运算。学过的算法与数据结构用起来！!</li>
</ol>
<h3 id="优化数据库的-sql-查询"><a class="v-toc-item" href="#优化数据库的-sql-查询">#</a> 优化数据库的 SQL 查询</h3>
<p>如同前文所见，到了 SQL 命令这层切入点能够优化的地方只有步骤 4.</p>
<p>对于查找，效率取决于：</p>
<ol>
<li>取记录数量</li>
<li>搜索到这些记录的时间。</li>
</ol>
<p>对于插入，执行查询则插入记录和更新索引两个部分，也是插入的瓶颈所在：</p>
<ol>
<li>插入记录 速度取决于记录数量，记录大小</li>
<li>更新索引 速度取决于索引数量。</li>
</ol>
<p>对于更新，执行查询则有查找，更新记录和更新索引两个部分，也是更新的瓶颈所在：</p>
<ol>
<li>查找 需要参考查找</li>
<li>更新记录 速度取决于记录数量，记录大小</li>
<li>更新索引 速度取决于更新索引字段的数量。</li>
</ol>
<p>对于删除，执行查询则有查找，删除记录和删除索引两个部分，也是删除的瓶颈所在：</p>
<ol>
<li>查找 需要参考查找</li>
<li>删除记录 速度取决于记录数量，记录大小</li>
<li>更新索引 速度取决于更新索引字段的数量。</li>
</ol>
<h4 id="查询的优化"><a class="v-toc-item" href="#查询的优化">#</a> 查询的优化</h4>
<h4 id="索引的代价"><a class="v-toc-item" href="#索引的代价">#</a> 索引的代价</h4>
<blockquote>
<p>在计算机这个神奇的世界里面，没有一个算法与数据结构的挑选是没有代价的。便于查询，则不便于插入更新。</p>
</blockquote>
<p>有的人把索引比作字典。说字典的索引页面就好像是数据表中的索引。</p>
<p>这个比方很贴切，可以用在索引的比方上，也可以用在索引的代价上。</p>
<ul>
<li>一个没有索引的页面，即是一个只有页码，编号的字典。当我们查询一个新字的时候，只能从第一页翻到结尾，效率很低。</li>
<li>一个有一个索引的页面，即是一个有页码，编号，拼音索引的字典。当我们查询一个新字的时候，先查询索引，然后从索引查页码，于是很快找到字。当我们<strong>增加 / 删除 / 更新</strong>一个字之后，还需要更新拼音索引。</li>
<li>一个有多个索引的页面，即是一个有页码，编号，拼音索引和部首索引以及其他索引的字典。当我们<strong>增加 / 删除 / 更新</strong>一个字之后，还需要更新拼音索引，部首索引等等索引。</li>
</ul>
<blockquote>
<p><strong>计算机世界就是这样，没有完美的算法，也没有完美的模型。</strong></p>
</blockquote>
<h3 id="数据存储结构"><a class="v-toc-item" href="#数据存储结构">#</a> 数据存储结构</h3>
<h3 id="硬件优化"><a class="v-toc-item" href="#硬件优化">#</a> 硬件优化</h3>
<p>留空，这个可能比较接近运维或者 DBA 的工作</p>
<h3 id="配置优化"><a class="v-toc-item" href="#配置优化">#</a> 配置优化</h3>
<p>留空，这个可能比较接近运维或者 DBA 的工作</p>
<h2 id="0x06-常见问题"><a class="v-toc-item" href="#0x06-常见问题">#</a> 0x06 常见问题</h2>
<h3 id="密码忘了怎么办"><a class="v-toc-item" href="#密码忘了怎么办">#</a> 密码忘了怎么办？</h3>
<pre><code class="language-bash"><span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>mysql stop
mysqld_safe <span class="token operator">--</span>skip<span class="token operator">-</span>grant<span class="token operator">-</span>tables <span class="token operator">&amp;</span>
# 在另一个终端 输入 mysql 进入终端
在另一端执行 <span class="token constant">SQL</span> 命令
<span class="token constant">UPDATE</span> mysql<span class="token punctuation">.</span>user <span class="token constant">SET</span> password<span class="token operator">=</span><span class="token constant">PASSWORD</span><span class="token punctuation">(</span><span class="token string">'nouveau'</span><span class="token punctuation">)</span> <span class="token constant">WHERE</span> user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
## Kill mysqld_safe from the terminal<span class="token punctuation">,</span> using Control <span class="token operator">+</span> \
<span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>mysql start
</code></pre>
<h2 id="0xee-参考链接"><a class="v-toc-item" href="#0xee-参考链接">#</a> 0xEE 参考链接</h2>
<p>关于 SQL 与数据库的有趣解释</p>
<ol>
<li><a href="http://stackoverflow.com/questions/38549/what-is-the-difference-between-inner-join-and-outer-join">Inner Join 和 Outer Join</a></li>
<li><a href="http://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php">如何防止 SQL 注入</a></li>
<li><a href="http://stackoverflow.com/questions/1108/how-does-database-indexing-work">索引是怎么工作的</a></li>
<li><a href="https://gold.xitu.io/post/584e7b298d6d81005456eb53">Mysql 常用 SQL 语句集锦（本文部分 SQL 语句取自此博文）</a></li>
</ol>
<p><a href="http://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string">http://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string</a></p>
</div></div><div><ul class="v-article-toc">
<li><a href="#mysql-cheatsheet">MySQL CheatSheet</a>
<ul>
<li><a href="#0x00-%E5%89%8D%E8%A8%80">0x00 前言</a></li>
<li><a href="#0x01-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%9F%BA%E6%9C%AC-shell-%E5%91%BD%E4%BB%A4">0x01 安装，配置，基本 shell 命令</a>
<ul>
<li><a href="#%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81">字符编码</a></li>
</ul>
</li>
<li><a href="#0x02-mysql-%E9%85%8D%E5%A5%97%E5%B7%A5%E5%85%B7">0x02 MySQL 配套工具</a></li>
<li><a href="#0x03-mysql-%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81">0x03 MySQL 常用代码</a></li>
<li><a href="#0x04-%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5">0x04 常用代码片段</a>
<ul>
<li><a href="#1-%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC">1. 数据清洗常用脚本</a></li>
<li><a href="#2-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC">2. 用户管理常用脚本</a></li>
<li><a href="#3-%E5%A4%87%E4%BB%BD%E8%BF%81%E7%A7%BB%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC">3. 备份迁移常用脚本</a></li>
<li><a href="#4-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC">4. 性能优化常用脚本</a></li>
<li><a href="#6-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5">6. 远程连接</a></li>
<li><a href="#5-%E5%85%B6%E4%BB%96%E8%84%9A%E6%9C%AC">5. 其他脚本</a></li>
</ul>
</li>
<li><a href="#0x05-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%87%E5%85%A5%E7%82%B9">0x05 性能优化切入点</a>
<ul>
<li><a href="#%E4%BC%98%E5%8C%96%E5%BA%94%E7%94%A8%E5%B1%82%E9%9D%A2%E7%9A%84%E6%9F%A5%E8%AF%A2">优化应用层面的查询</a></li>
<li><a href="#%E4%BC%98%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84-sql-%E6%9F%A5%E8%AF%A2">优化数据库的 SQL 查询</a>
<ul>
<li><a href="#%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%BC%98%E5%8C%96">查询的优化</a></li>
<li><a href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BB%A3%E4%BB%B7">索引的代价</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84">数据存储结构</a></li>
<li><a href="#%E7%A1%AC%E4%BB%B6%E4%BC%98%E5%8C%96">硬件优化</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96">配置优化</a></li>
</ul>
</li>
<li><a href="#0x06-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">0x06 常见问题</a>
<ul>
<li><a href="#%E5%AF%86%E7%A0%81%E5%BF%98%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E">密码忘了怎么办？</a></li>
</ul>
</li>
<li><a href="#0xee-%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">0xEE 参考链接</a></li>
</ul>
</li>
</ul>
</div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"tags":["MySQL"],"path":"20160912_MySQLCheatSheet.md","title":"MySQL CheatSheet","slug":"MySQL CheatSheet","date":"2016-09-02","category":"DevOps","lastMod":"2020-01-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"\u003ch1 id=\"mysql-cheatsheet\"\u003e\u003ca class=\"v-toc-item\" href=\"#mysql-cheatsheet\"\u003e#\u003c/a\u003e MySQL CheatSheet\u003c/h1\u003e\n\u003ch2 id=\"0x00-前言\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x00-前言\"\u003e#\u003c/a\u003e 0x00 前言\u003c/h2\u003e\n\u003cp\u003e本文为 Cheatsheet 类型文章，用于记录我在日常编程中经常使用的 MySQL 相关命令。主要包含：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMySQL Shell, 其实就是 SQL 命令。\u003c/li\u003e\n\u003cli\u003eMySQL 配套工具\u003c/li\u003e\n\u003cli\u003ePython API\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e不定期更新。\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003ch2 id=\"0x01-安装配置基本-shell-命令\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x01-安装配置基本-shell-命令\"\u003e#\u003c/a\u003e 0x01 安装，配置，基本 shell 命令\u003c/h2\u003e\n\u003ch3 id=\"字符编码\"\u003e\u003ca class=\"v-toc-item\" href=\"#字符编码\"\u003e#\u003c/a\u003e 字符编码\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUTF-8 , Please\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e真的很讨厌那些用 GBK 的程序员啊！\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# 注意，下面的设置 MySQL 是无法保存 emoji 的 \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003emysql\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003echaracter\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eset\u003cspan class=\"token operator\"\u003e=\u003c/span\u003eutf8\n\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003emysqld\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\ncollation\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eserver \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e utf8_general_ci\ninit\u003cspan class=\"token operator\"\u003e-\u003c/span\u003econnect\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e'SET NAMES utf8'\u003c/span\u003e\ncharacter\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eset\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eserver \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e utf8\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e然后在 mysql console 执行：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eshow variables like \u003cspan class=\"token string\"\u003e\"%character%\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003eshow variables like \u003cspan class=\"token string\"\u003e\"%collation%\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e如下即可\u003c/p\u003e\n\u003ch2 id=\"0x02-mysql-配套工具\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x02-mysql-配套工具\"\u003e#\u003c/a\u003e 0x02 MySQL 配套工具\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eJetBrain 的 Datagrip 作为 编写大段 SQL 语句的 IDE\u003c/li\u003e\n\u003cli\u003e通过网络或者 Dash 查看文档\u003c/li\u003e\n\u003cli\u003e强烈推荐 mycli 作为正常情况下的 MySQL 命令的替代品。\u003c/li\u003e\n\u003cli\u003eMySQL 官方自带工具\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e只挑选几个重要的，常用的说一说。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# 启动 \u003cspan class=\"token constant\"\u003eMYSQL\u003c/span\u003e\n\n# 常规 mysql\nmysql \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eu username \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ep password\n## 命令的用户名和密码最好与命令合在一起\nmysqlshow \u003cspan class=\"token operator\"\u003e-\u003c/span\u003euroot \u003cspan class=\"token operator\"\u003e-\u003c/span\u003epsomepass some_db\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n# 导入数据\nmysql \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eu username \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ep password \u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e filename\n# 优雅的导入数据，可以查看进度条的 Hacks\npv \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ei \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ep \u003cspan class=\"token operator\"\u003e-\u003c/span\u003et \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ee \u003cspan class=\"token operator\"\u003e/\u003c/span\u003eUsers\u003cspan class=\"token operator\"\u003e/\u003c/span\u003etwocucao\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eCodes\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eupdate_new_date\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esql \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e mysql \u003cspan class=\"token operator\"\u003e-\u003c/span\u003euadmin \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ep123456 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eh \u003cspan class=\"token number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"token number\"\u003e.2\u003c/span\u003e\u003cspan class=\"token number\"\u003e.254\u003c/span\u003e \u003cspan class=\"token operator\"\u003e--\u003c/span\u003eport\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e3306\u003c/span\u003e some_db\n# 导出数据\nmysqldump \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eu username \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ep password database \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003etables\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e filename\nmysqldump database table_bame \u003cspan class=\"token operator\"\u003e--\u003c/span\u003ewhere\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"date_column BETWEEN '2012-07-01 00:00:00' and '2012-12-01 00:00:00'\"\u003c/span\u003e\n\n# ref \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e http\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003edev\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emysql\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecom\u003cspan class=\"token operator\"\u003e/\u003c/span\u003edoc\u003cspan class=\"token operator\"\u003e/\u003c/span\u003erefman\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token number\"\u003e5.7\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003een\u003cspan class=\"token operator\"\u003e/\u003c/span\u003emysqldump\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehtml#option_mysqldump_where\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x03-mysql-常用代码\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x03-mysql-常用代码\"\u003e#\u003c/a\u003e 0x03 MySQL 常用代码\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token constant\"\u003eSHOW\u003c/span\u003e \u003cspan class=\"token constant\"\u003eDATABASES\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token constant\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token constant\"\u003eDATABASE\u003c/span\u003e database\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token constant\"\u003eUSE\u003c/span\u003e database\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token constant\"\u003eSHOW\u003c/span\u003e \u003cspan class=\"token constant\"\u003eTABLES\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token constant\"\u003eDESCRIBE\u003c/span\u003e table\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token constant\"\u003eSHOW\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCOLUMN\u003c/span\u003e \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e table\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token constant\"\u003eDROP\u003c/span\u003e \u003cspan class=\"token constant\"\u003eDATEBASE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x04-常用代码片段\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x04-常用代码片段\"\u003e#\u003c/a\u003e 0x04 常用代码片段\u003c/h2\u003e\n\u003ch3 id=\"1-数据清洗常用脚本\"\u003e\u003ca class=\"v-toc-item\" href=\"#1-数据清洗常用脚本\"\u003e#\u003c/a\u003e 1. 数据清洗常用脚本\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token operator\"\u003e--\u003c/span\u003e 少量去重\n\u003cspan class=\"token constant\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token constant\"\u003eTABLE\u003c/span\u003e everyday_info_temp \u003cspan class=\"token constant\"\u003eAS\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e  everyday_info \u003cspan class=\"token constant\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"token constant\"\u003eBY\u003c/span\u003e id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003edate\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003enumbers\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e--\u003c/span\u003e 大量去重\n\u003cspan class=\"token constant\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token constant\"\u003eTABLE\u003c/span\u003e everyday_info_temp \u003cspan class=\"token constant\"\u003eAS\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e  everyday_info \u003cspan class=\"token constant\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"token constant\"\u003eBY\u003c/span\u003e id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003edate\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003enumbers \u003cspan class=\"token constant\"\u003eORDER\u003c/span\u003e \u003cspan class=\"token constant\"\u003eBY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"http://stackoverflow.com/questions/16568228/how-to-transpose-mysql-table-rows-into-columns\"\u003ehttp://stackoverflow.com/questions/16568228/how-to-transpose-mysql-table-rows-into-columns\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e  SELECT @max := MAX(ID)+ 1 FROM ABC;\n\n  PREPARE stmt FROM 'ALTER TABLE ABC AUTO_INCREMENT = ?';\n  EXECUTE stmt USING @max;\n\n  DEALLOCATE PREPARE stmt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003emysql\u0026gt; delete from shophtml;\u003cbr\u003e\nQuery OK, 117141 rows affected (4 min 2.92 sec)\u003cbr\u003e\nTRUNCATE shophtml;\u003c/p\u003e\n\u003ch3 id=\"2-用户管理常用脚本\"\u003e\u003ca class=\"v-toc-item\" href=\"#2-用户管理常用脚本\"\u003e#\u003c/a\u003e 2. 用户管理常用脚本\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e User \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e mysql\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003euser\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"3-备份迁移常用脚本\"\u003e\u003ca class=\"v-toc-item\" href=\"#3-备份迁移常用脚本\"\u003e#\u003c/a\u003e 3. 备份迁移常用脚本\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e#! /bin/bash\n\nTIMESTAMP=$(date +\u0026quot;%F\u0026quot;)\nBACKUP_DIR=\u0026quot;/mnt/$TIMESTAMP\u0026quot;\nMYSQL_USER=\u0026quot;root\u0026quot;\nMYSQL=/usr/bin/mysql\nMYSQL_PASSWORD=\u0026quot;password\u0026quot;\nMYSQLDUMP=/usr/bin/mysqldump\nDATABASE=\u0026quot;cyjoycity\u0026quot;\n\nmkdir -p \u0026quot;$BACKUP_DIR/mysql\u0026quot;\n\nfor t in $($MYSQL -NBA -u $MYSQL_USER -p$MYSQL_PASSWORD -D $DATABASE -e 'show tables')\ndo\n    echo \u0026quot;DUMPING TABLE: $DB.$t\u0026quot;\n    $MYSQLDUMP --force --opt --user=$MYSQL_USER -p$MYSQL_PASSWORD $DATABASE $t | gzip \u0026gt; \u0026quot;$BACKUP_DIR/mysql/$t.sql.gz\u0026quot;\ndone\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"4-性能优化常用脚本\"\u003e\u003ca class=\"v-toc-item\" href=\"#4-性能优化常用脚本\"\u003e#\u003c/a\u003e 4. 性能优化常用脚本\u003c/h3\u003e\n\u003cp\u003eSHOW FULL PROCESSLIST;\u003c/p\u003e\n\u003ch3 id=\"6-远程连接\"\u003e\u003ca class=\"v-toc-item\" href=\"#6-远程连接\"\u003e#\u003c/a\u003e 6. 远程连接\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-mysql\"\u003e\n\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eetc\u003cspan class=\"token operator\"\u003e/\u003c/span\u003emysql\u003cspan class=\"token operator\"\u003e/\u003c/span\u003emy\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecnf\n\n# bind\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eaddress \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"token number\"\u003e.0\u003c/span\u003e\u003cspan class=\"token number\"\u003e.1\u003c/span\u003e\n\n\u003cspan class=\"token constant\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"token constant\"\u003eALL\u003c/span\u003e \u003cspan class=\"token constant\"\u003ePRIVILEGES\u003c/span\u003e \u003cspan class=\"token constant\"\u003eON\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token constant\"\u003eTO\u003c/span\u003e \u003cspan class=\"token string\"\u003e'root'\u003c/span\u003e@\u003cspan class=\"token string\"\u003e'%'\u003c/span\u003e \u003cspan class=\"token constant\"\u003eIDENTIFIED\u003c/span\u003e \u003cspan class=\"token constant\"\u003eBY\u003c/span\u003e \u003cspan class=\"token string\"\u003e'password'\u003c/span\u003e \u003cspan class=\"token constant\"\u003eWITH\u003c/span\u003e \u003cspan class=\"token constant\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"token constant\"\u003eOPTION\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token constant\"\u003eFLUSH\u003c/span\u003e \u003cspan class=\"token constant\"\u003ePRIVILEGES\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"5-其他脚本\"\u003e\u003ca class=\"v-toc-item\" href=\"#5-其他脚本\"\u003e#\u003c/a\u003e 5. 其他脚本\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003e\n# \u003cspan class=\"token number\"\u003e6.\u003c/span\u003e 随机选择 \u003cspan class=\"token number\"\u003e10\u003c/span\u003e 组记录\n\u003cspan class=\"token operator\"\u003e--\u003c/span\u003e 慢速\n\u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e Table_Name \u003cspan class=\"token constant\"\u003eORDER\u003c/span\u003e \u003cspan class=\"token constant\"\u003eBY\u003c/span\u003e \u003cspan class=\"token constant\"\u003eRAND\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token constant\"\u003eLIMIT\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token operator\"\u003e--\u003c/span\u003e 快速\n\u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e name\n  \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e random \u003cspan class=\"token constant\"\u003eAS\u003c/span\u003e r1 \u003cspan class=\"token constant\"\u003eJOIN\u003c/span\u003e\n       \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCEIL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eRAND\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\n                     \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMAX\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n                        \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e random\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token constant\"\u003eAS\u003c/span\u003e id\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token constant\"\u003eAS\u003c/span\u003e r2\n \u003cspan class=\"token constant\"\u003eWHERE\u003c/span\u003e r1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eid \u003cspan class=\"token operator\"\u003e\u003e=\u003c/span\u003e r2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eid\n \u003cspan class=\"token constant\"\u003eORDER\u003c/span\u003e \u003cspan class=\"token constant\"\u003eBY\u003c/span\u003e r1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eid \u003cspan class=\"token constant\"\u003eASC\u003c/span\u003e\n \u003cspan class=\"token constant\"\u003eLIMIT\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003e\n# \u003cspan class=\"token number\"\u003e1.\u003c/span\u003e 查询时间\nselect \u003cspan class=\"token function\"\u003edate_format\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecreate_time\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'%Y-%m-%d'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e day from table_name\nselect \u003cspan class=\"token function\"\u003efrom_unixtime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecreate_time\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'%Y-%m-%d'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e day from table_name\n\n# \u003cspan class=\"token number\"\u003e2.\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCASE\u003c/span\u003e \u003cspan class=\"token constant\"\u003eWHEN\u003c/span\u003e 案例\n\n## \u003cspan class=\"token number\"\u003e2.1\u003c/span\u003e 返回同一列多个结果\n\n## \u003cspan class=\"token number\"\u003e2.2\u003c/span\u003e 行列值颠倒\n\n# \u003cspan class=\"token number\"\u003e3.\u003c/span\u003e 替换某字段内容\nupdate table_name \u003cspan class=\"token keyword\"\u003eset\u003c/span\u003e content \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eREPLACE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econtent\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'aaa'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'bbb'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token function\"\u003ewhere\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econtent like \u003cspan class=\"token string\"\u003e'%aaa%'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n# \u003cspan class=\"token number\"\u003e4.\u003c/span\u003e 获取表中某字段包含某字符串的数据\n\u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e表名\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"token constant\"\u003eLOCATE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'关键字'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 字段名）\n\n# \u003cspan class=\"token number\"\u003e5.\u003c/span\u003e 字符串处理\n\u003cspan class=\"token constant\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSUBSTRING\u003c/span\u003e（字段名，\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token constant\"\u003eFROM\u003c/span\u003e 表名\n\n# \u003cspan class=\"token number\"\u003e6.\u003c/span\u003e 求解数字的连续范围\n\nselect \u003cspan class=\"token function\"\u003emin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enumber\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e start_range\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token function\"\u003emax\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enumber\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e end_range\n\u003cspan class=\"token function\"\u003efrom\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    select number\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003ern\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003enumber\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ern diff \u003cspan class=\"token function\"\u003efrom\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n        select number\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e@number\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e@number\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e rn from test_number\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eselect @number\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e number\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e b\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e c group by diff\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x05-性能优化切入点\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x05-性能优化切入点\"\u003e#\u003c/a\u003e 0x05 性能优化切入点\u003c/h2\u003e\n\u003cp\u003e应用的切入点也比较简单和暴力：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e优化应用层面的查询。\u003c/li\u003e\n\u003cli\u003e优化数据库的 SQL 查询。\u003c/li\u003e\n\u003cli\u003e优化数据库的存储结构。\u003c/li\u003e\n\u003cli\u003e优化单个数据库服务器的性能。\u003c/li\u003e\n\u003cli\u003e遵循『机多运算大』的原则，上几台机器。\u003c/li\u003e\n\u003cli\u003e更好的机器，即加内存条，上好的 CPU。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e优化前三点，则需要理解取数据的客户端从发送 SQL 语句到接受数据之间都发生了什么？流程如下：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e开启连接\u003c/li\u003e\n\u003cli\u003e发送查询给服务器\u003c/li\u003e\n\u003cli\u003e分析查询\u003c/li\u003e\n\u003cli\u003e执行查询\u003c/li\u003e\n\u003cli\u003e传输数据\u003c/li\u003e\n\u003cli\u003e关闭连接\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"优化应用层面的查询\"\u003e\u003ca class=\"v-toc-item\" href=\"#优化应用层面的查询\"\u003e#\u003c/a\u003e 优化应用层面的查询\u003c/h3\u003e\n\u003cp\u003e在同样工作量的情况下不断的减少数据库的连接，将多个动作放在一起使用 TRANSACTION 可以显著提高速度。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e对于 OLTP 类型的数据库设计的数据库，一些耗时查询往往是可以在应用层面查询进行优化的，比如在手写代码应用级缓存，借助外部组件 (redis) 应用内缓存。\u003c/li\u003e\n\u003cli\u003e对于一些有性能要求的场景，不要使用 select * from xxx 这种查询，服务器到客户端传输也是需要时间的，而是要选择需要的字段。\u003c/li\u003e\n\u003cli\u003e如果有必要，不要在循环内部进行数据库查询，而是直接取出来放在内存中进行运算。学过的算法与数据结构用起来！!\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"优化数据库的-sql-查询\"\u003e\u003ca class=\"v-toc-item\" href=\"#优化数据库的-sql-查询\"\u003e#\u003c/a\u003e 优化数据库的 SQL 查询\u003c/h3\u003e\n\u003cp\u003e如同前文所见，到了 SQL 命令这层切入点能够优化的地方只有步骤 4.\u003c/p\u003e\n\u003cp\u003e对于查找，效率取决于：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e取记录数量\u003c/li\u003e\n\u003cli\u003e搜索到这些记录的时间。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e对于插入，执行查询则插入记录和更新索引两个部分，也是插入的瓶颈所在：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e插入记录 速度取决于记录数量，记录大小\u003c/li\u003e\n\u003cli\u003e更新索引 速度取决于索引数量。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e对于更新，执行查询则有查找，更新记录和更新索引两个部分，也是更新的瓶颈所在：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e查找 需要参考查找\u003c/li\u003e\n\u003cli\u003e更新记录 速度取决于记录数量，记录大小\u003c/li\u003e\n\u003cli\u003e更新索引 速度取决于更新索引字段的数量。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e对于删除，执行查询则有查找，删除记录和删除索引两个部分，也是删除的瓶颈所在：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e查找 需要参考查找\u003c/li\u003e\n\u003cli\u003e删除记录 速度取决于记录数量，记录大小\u003c/li\u003e\n\u003cli\u003e更新索引 速度取决于更新索引字段的数量。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"查询的优化\"\u003e\u003ca class=\"v-toc-item\" href=\"#查询的优化\"\u003e#\u003c/a\u003e 查询的优化\u003c/h4\u003e\n\u003ch4 id=\"索引的代价\"\u003e\u003ca class=\"v-toc-item\" href=\"#索引的代价\"\u003e#\u003c/a\u003e 索引的代价\u003c/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003e在计算机这个神奇的世界里面，没有一个算法与数据结构的挑选是没有代价的。便于查询，则不便于插入更新。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e有的人把索引比作字典。说字典的索引页面就好像是数据表中的索引。\u003c/p\u003e\n\u003cp\u003e这个比方很贴切，可以用在索引的比方上，也可以用在索引的代价上。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e一个没有索引的页面，即是一个只有页码，编号的字典。当我们查询一个新字的时候，只能从第一页翻到结尾，效率很低。\u003c/li\u003e\n\u003cli\u003e一个有一个索引的页面，即是一个有页码，编号，拼音索引的字典。当我们查询一个新字的时候，先查询索引，然后从索引查页码，于是很快找到字。当我们\u003cstrong\u003e增加 / 删除 / 更新\u003c/strong\u003e一个字之后，还需要更新拼音索引。\u003c/li\u003e\n\u003cli\u003e一个有多个索引的页面，即是一个有页码，编号，拼音索引和部首索引以及其他索引的字典。当我们\u003cstrong\u003e增加 / 删除 / 更新\u003c/strong\u003e一个字之后，还需要更新拼音索引，部首索引等等索引。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e计算机世界就是这样，没有完美的算法，也没有完美的模型。\u003c/strong\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"数据存储结构\"\u003e\u003ca class=\"v-toc-item\" href=\"#数据存储结构\"\u003e#\u003c/a\u003e 数据存储结构\u003c/h3\u003e\n\u003ch3 id=\"硬件优化\"\u003e\u003ca class=\"v-toc-item\" href=\"#硬件优化\"\u003e#\u003c/a\u003e 硬件优化\u003c/h3\u003e\n\u003cp\u003e留空，这个可能比较接近运维或者 DBA 的工作\u003c/p\u003e\n\u003ch3 id=\"配置优化\"\u003e\u003ca class=\"v-toc-item\" href=\"#配置优化\"\u003e#\u003c/a\u003e 配置优化\u003c/h3\u003e\n\u003cp\u003e留空，这个可能比较接近运维或者 DBA 的工作\u003c/p\u003e\n\u003ch2 id=\"0x06-常见问题\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x06-常见问题\"\u003e#\u003c/a\u003e 0x06 常见问题\u003c/h2\u003e\n\u003ch3 id=\"密码忘了怎么办\"\u003e\u003ca class=\"v-toc-item\" href=\"#密码忘了怎么办\"\u003e#\u003c/a\u003e 密码忘了怎么办？\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eetc\u003cspan class=\"token operator\"\u003e/\u003c/span\u003einit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ed\u003cspan class=\"token operator\"\u003e/\u003c/span\u003emysql stop\nmysqld_safe \u003cspan class=\"token operator\"\u003e--\u003c/span\u003eskip\u003cspan class=\"token operator\"\u003e-\u003c/span\u003egrant\u003cspan class=\"token operator\"\u003e-\u003c/span\u003etables \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\n# 在另一个终端 输入 mysql 进入终端\n在另一端执行 \u003cspan class=\"token constant\"\u003eSQL\u003c/span\u003e 命令\n\u003cspan class=\"token constant\"\u003eUPDATE\u003c/span\u003e mysql\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003euser \u003cspan class=\"token constant\"\u003eSET\u003c/span\u003e password\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token constant\"\u003ePASSWORD\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'nouveau'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token constant\"\u003eWHERE\u003c/span\u003e user\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e'root'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n## Kill mysqld_safe from the terminal\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e using Control \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \\\n\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eetc\u003cspan class=\"token operator\"\u003e/\u003c/span\u003einit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ed\u003cspan class=\"token operator\"\u003e/\u003c/span\u003emysql start\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0xee-参考链接\"\u003e\u003ca class=\"v-toc-item\" href=\"#0xee-参考链接\"\u003e#\u003c/a\u003e 0xEE 参考链接\u003c/h2\u003e\n\u003cp\u003e关于 SQL 与数据库的有趣解释\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"http://stackoverflow.com/questions/38549/what-is-the-difference-between-inner-join-and-outer-join\"\u003eInner Join 和 Outer Join\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php\"\u003e如何防止 SQL 注入\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://stackoverflow.com/questions/1108/how-does-database-indexing-work\"\u003e索引是怎么工作的\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gold.xitu.io/post/584e7b298d6d81005456eb53\"\u003eMysql 常用 SQL 语句集锦（本文部分 SQL 语句取自此博文）\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ca href=\"http://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string\"\u003ehttp://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string\u003c/a\u003e\u003c/p\u003e\n","toc":"\u003cul class=\"v-article-toc\"\u003e\n\u003cli\u003e\u003ca href=\"#mysql-cheatsheet\"\u003eMySQL CheatSheet\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#0x00-%E5%89%8D%E8%A8%80\"\u003e0x00 前言\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x01-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%9F%BA%E6%9C%AC-shell-%E5%91%BD%E4%BB%A4\"\u003e0x01 安装，配置，基本 shell 命令\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81\"\u003e字符编码\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x02-mysql-%E9%85%8D%E5%A5%97%E5%B7%A5%E5%85%B7\"\u003e0x02 MySQL 配套工具\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x03-mysql-%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81\"\u003e0x03 MySQL 常用代码\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x04-%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5\"\u003e0x04 常用代码片段\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#1-%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC\"\u003e1. 数据清洗常用脚本\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#2-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC\"\u003e2. 用户管理常用脚本\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#3-%E5%A4%87%E4%BB%BD%E8%BF%81%E7%A7%BB%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC\"\u003e3. 备份迁移常用脚本\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#4-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC\"\u003e4. 性能优化常用脚本\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#6-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5\"\u003e6. 远程连接\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#5-%E5%85%B6%E4%BB%96%E8%84%9A%E6%9C%AC\"\u003e5. 其他脚本\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x05-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%87%E5%85%A5%E7%82%B9\"\u003e0x05 性能优化切入点\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E4%BC%98%E5%8C%96%E5%BA%94%E7%94%A8%E5%B1%82%E9%9D%A2%E7%9A%84%E6%9F%A5%E8%AF%A2\"\u003e优化应用层面的查询\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E4%BC%98%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84-sql-%E6%9F%A5%E8%AF%A2\"\u003e优化数据库的 SQL 查询\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%BC%98%E5%8C%96\"\u003e查询的优化\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BB%A3%E4%BB%B7\"\u003e索引的代价\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84\"\u003e数据存储结构\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E7%A1%AC%E4%BB%B6%E4%BC%98%E5%8C%96\"\u003e硬件优化\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96\"\u003e配置优化\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x06-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\"\u003e0x06 常见问题\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%AF%86%E7%A0%81%E5%BF%98%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E\"\u003e密码忘了怎么办？\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0xee-%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"\u003e0xEE 参考链接\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"MySQL CheatSheet"},"buildId":"uCwe9m-iio9bnoWMgWDqE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>