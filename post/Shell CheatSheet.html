<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Shell CheatSheet | 海拉鲁编程客</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/49455a07b6dd33600cdf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/49455a07b6dd33600cdf.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-20d43e08bea62467b090.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-4777350f2a9ff73ea2b0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3050679c6e5142ffcaf5.js" defer=""></script><script src="/_next/static/chunks/ea88be26-9bcf6ead520f4ac26973.js" defer=""></script><script src="/_next/static/chunks/421-f2f33a86b546237f0325.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-173fe2de48c90365db9d.js" defer=""></script><script src="/_next/static/oDi_oBCBuu3qj6v7hDnrL/_buildManifest.js" defer=""></script><script src="/_next/static/oDi_oBCBuu3qj6v7hDnrL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="v-page"><nav class="shadow"><div class="flex flex-col container mx-auto h-12 px-40 md:flex-row md:items-center md:justify-between"><div class="flex justify-between items-center"><div><a class="text-gray-800 text-xl md:text-xl leading-5" href="/">海拉鲁编程客</a></div><div><button type="button" class="block text-gray-800 hover:text-gray-600 focus:text-gray-600 focus:outline-none md:hidden"><svg viewBox="0 0 24 24" class="h-6 w-6 fill-current"><path d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"></path></svg></button></div></div><div class="md:flex flex-col md:flex-row md:-mx-4 hidden"><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/">首页</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/archive">归档</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/about">关于我</a><button style="cursor:pointer;overflow:hidden;width:50px;height:23.5px;appearance:none;-moz-appearance:none;-webkit-appearance:none;border:none;background-color:transparent;padding:0" aria-hidden="true"><div style="display:flex;align-items:center;justify-content:center;margin-top:-28.749999999999996px;margin-left:-16px;width:82.5px;height:82.5px"><div></div></div></button></div></div></nav><div class="v-article"><div class="v-article-main" style="margin:auto;width:786px"><div><h1 id="shell-cheatsheet"><a class="v-toc-item" href="#shell-cheatsheet">#</a> Shell CheatSheet</h1>
<h2 id="0x00-前言"><a class="v-toc-item" href="#0x00-前言">#</a> 0x00 前言</h2>
<p>本文为 Cheatsheet 类型文章，用于记录我在日常编程中经常使用的 Shell 单行命令。</p>
<h2 id="0x01-快捷键"><a class="v-toc-item" href="#0x01-快捷键">#</a> 0x01 快捷键</h2>
<pre><code>- 「c-c」 : 中断当前命令。
- 「c-z」 : 当前程序暂停，bg 切换后台运行，使用 fg 可以调回
- 「tab」 : 补全
- 「tabx2」 : 补全提示
- 「c-r」 : 搜索命令行
- 「c-w」 : 同 vim
- 「c-u」 : 删除整行
- 「a-b/a-f」 : 移动一个词
- 「c-a」 : 移动至行首
- 「c-e」 : 移动至行尾
- 「c-k」 : 删除光标到行尾
- 「c-l」 : 清屏
- 「c-x,c-e」 : 用默认编辑器编辑当前命令（这样就可以把其他文本移动扔掉了。)
</code></pre>
<h2 id="0x02-帮助"><a class="v-toc-item" href="#0x02-帮助">#</a> 0x02 帮助</h2>
<p>查找帮助</p>
<pre><code>- man
- whatis / which / where
- tldr
</code></pre>
<p>值得一提的就是 tldr, 直接可以在上面查看命令的常规使用。实在是碉堡了。</p>
<pre><code>&gt; tldr ssh
Local data is older than two weeks, use --update to update it.

ssh

Secure Shell is a protocol used to securely log onto remote systems.
It can be used for logging or executing commands on a remote server.

- Connect to a remote server:
    ssh username@remote_host

- Connect to a remote server with a specific identity (private key):
    ssh -i path/to/key_file username@remote_host

- Connect to a remote server using a specific port:
    ssh username@remote_host -p 2222

- Run a command on a remote server:
    ssh remote_host command -with -flags

- SSH tunneling: Dynamic port forwarding (SOCKS proxy on localhost:9999):
    ssh -D 9999 -C username@remote_host

- SSH tunneling: Forward a specific port (localhost:9999 to slashdot.org:80) along with disabling pseudo-[t]ty allocation and executio[n] of remote commands:
    ssh -L 9999:slashdot.org:80 -N -T username@remote_host

- SSH jumping: Connect through a jumphost to a remote server (Multiple jump hops may be specified separated by comma characters):
    ssh -J username@jump_host username@remote_host

- Agent forwarding: Forward the authentication information to the remote machine (see `man ssh_config` for available options):
    ssh -A username@remote_host
</code></pre>
<h2 id="0x03-macos-用户"><a class="v-toc-item" href="#0x03-macos-用户">#</a> 0x03 macOS 用户</h2>
<p>如果你和我一样使用的是 mac 系统</p>
<p>可以考虑将部分 FreeBSD 的工具换成 gnu</p>
<pre><code>brew install autoconf bash binutils coreutils diffutils ed findutils flex gawk \
    gnu-indent gnu-sed gnu-tar gnu-which gpatch grep gzip less m4 make nano \
    screen watch wdiff wget
</code></pre>
<p>bashrc/zshrc 加上如下命令</p>
<pre><code>if type brew &amp;&gt;/dev/null; then
  HOMEBREW_PREFIX=$(brew --prefix)
  # gnubin; gnuman
  for d in ${HOMEBREW_PREFIX}/opt/*/libexec/gnubin; do export PATH=$d:$PATH; done
  # I actually like that man grep gives the BSD grep man page
  #for d in ${HOMEBREW_PREFIX}/opt/*/libexec/gnuman; do export MANPATH=$d:$MANPATH; done
fi
</code></pre>
<p>经过上面一步，则基本上 find sed tar which 这些命令使用的 gnu 版本 (linux 版本）, 而非系统自带的 unix 版本了。</p>
<h2 id="0x04-基本命令-old-fashion"><a class="v-toc-item" href="#0x04-基本命令-old-fashion">#</a> 0x04 基本命令 - old fashion</h2>
<pre><code class="language-bash">文件 <span class="token operator">/</span> 目录 mkdir <span class="token operator">/</span> rm
查找文件 cd <span class="token operator">/</span> cp <span class="token operator">/</span> pwd <span class="token operator">/</span> find
查看文件 more <span class="token operator">/</span> less <span class="token operator">/</span> tail <span class="token operator">/</span> diff <span class="token operator">/</span> cat <span class="token operator">/</span> grep
用户权限 chown <span class="token operator">/</span> chmod
复制 <span class="token operator">/</span> 粘贴 <span class="token operator">/</span> 同步 <span class="token operator">/</span> 链接 cp <span class="token operator">/</span> rsync <span class="token operator">/</span> ln
挂载 mount
</code></pre>
<pre><code class="language-bash"># 创建和删除
mkdir
mkdir <span class="token operator">-</span>p a<span class="token operator">/</span>b<span class="token operator">/</span>c

rm
rm <span class="token operator">-</span>rf dir<span class="token operator">/</span>file<span class="token operator">/</span>regex
rm <span class="token operator">*</span>log# 等价 find <span class="token punctuation">.</span><span class="token operator">/</span> <span class="token operator">-</span>name <span class="token string">"*log"</span> <span class="token operator">-</span>exec rm <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

mv
cp
cp <span class="token operator">-</span>r source_dir dest_dir
rsync <span class="token operator">--</span>progress <span class="token operator">-</span>a source_dir dest_dir
rsync <span class="token operator">-</span>vr <span class="token operator">--</span>progress you_folder_here twocucao@<span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.151</span><span class="token operator">:</span><span class="token operator">/</span>Users<span class="token operator">/</span>twocucao<span class="token operator">/</span>Codes<span class="token operator">/</span># 目录切换 ls <span class="token operator">-</span>lrt
find <span class="token punctuation">.</span><span class="token operator">/</span> <span class="token operator">-</span>name <span class="token string">"*.o"</span> <span class="token operator">-</span>exec rm <span class="token punctuation">{</span><span class="token punctuation">}</span> \<span class="token punctuation">;</span>
more
head
tail
tail <span class="token operator">-</span>f filename
diff
chown
chmod
chown <span class="token operator">-</span><span class="token constant">R</span> tuxapp source<span class="token operator">/</span>chmod a<span class="token operator">+</span>x myscript
ln cc ccA
ln <span class="token operator">-</span>s cc ccTo
cat <span class="token operator">-</span>v record<span class="token punctuation">.</span>log <span class="token operator">|</span> grep <span class="token constant">AAA</span> <span class="token operator">|</span> grep <span class="token operator">-</span>v <span class="token constant">BBB</span> <span class="token operator">|</span> wc <span class="token operator">-</span>l
find <span class="token punctuation">.</span><span class="token operator">/</span> <span class="token operator">|</span> wc <span class="token operator">-</span>l
</code></pre>
<pre><code class="language-bash">查找文件之 <span class="token function">find</span> <span class="token punctuation">(</span>gfind<span class="token punctuation">)</span>
## Find
find <span class="token punctuation">.</span> \<span class="token punctuation">(</span> <span class="token operator">-</span>name <span class="token string">"*.txt"</span> <span class="token operator">-</span>o <span class="token operator">-</span>name <span class="token string">"*.pdf"</span> \<span class="token punctuation">)</span> <span class="token operator">-</span>print
# 正则方式查找 txt 和 pdf
find <span class="token punctuation">.</span> <span class="token operator">-</span>regex  <span class="token string">".*\(\.txt|\.pdf\)$"</span>
find <span class="token punctuation">.</span> <span class="token operator">!</span> <span class="token operator">-</span>name <span class="token string">"*.txt"</span> <span class="token operator">-</span>print
find <span class="token punctuation">.</span> <span class="token operator">-</span>maxdepth <span class="token number">1</span> <span class="token operator">-</span>type f
# 定制搜索
## 按照类型搜索
find <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>print  #只列出所有文件
find <span class="token punctuation">.</span> <span class="token operator">-</span>type d <span class="token operator">-</span>print  #只列出所有目录
find <span class="token punctuation">.</span> <span class="token operator">-</span>type l <span class="token operator">-</span>print  #只列出所有符号链接
## 按照时间搜索
find <span class="token punctuation">.</span> <span class="token operator">-</span>atime <span class="token number">7</span> <span class="token operator">-</span>type f <span class="token operator">-</span>print
# 最近第 <span class="token number">7</span> 天被访问过的所有文件：
find <span class="token punctuation">.</span> <span class="token operator">-</span>atime <span class="token operator">-</span><span class="token number">7</span> <span class="token operator">-</span>type f <span class="token operator">-</span>print
# 最近 <span class="token number">7</span> 天内被访问过的所有文件：
find <span class="token punctuation">.</span> <span class="token operator">-</span>atime <span class="token operator">+</span><span class="token number">7</span> type f <span class="token operator">-</span>print
# 查询 <span class="token number">7</span> 天前被访问过的所有文件：
# w<span class="token punctuation">,</span>k<span class="token punctuation">,</span><span class="token constant">M</span><span class="token punctuation">,</span>Gfind <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>size <span class="token operator">+</span><span class="token number">2</span>kfind <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>perm <span class="token number">644</span> <span class="token operator">-</span>print 
# 找具有可执行权限的所有文件 find <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>user weber <span class="token operator">-</span>print
# 找用户 weber 所拥有的文件
# 后续动作
## 删除 find <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">"*.swp"</span> <span class="token operator">-</span><span class="token keyword">delete</span>
## 执行动作
find <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">"*.swp"</span> <span class="token operator">|</span> xargs rmfind <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>user root <span class="token operator">-</span>exec chown weber <span class="token punctuation">{</span><span class="token punctuation">}</span> \<span class="token punctuation">;</span>
## eg<span class="token operator">:</span> copy 到另一个目录
find <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>mtime <span class="token operator">+</span><span class="token number">10</span> <span class="token operator">-</span>name <span class="token string">"*.txt"</span> <span class="token operator">-</span>exec cp <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token constant">OLD</span> \<span class="token punctuation">;</span>
##  <span class="token operator">-</span>exec <span class="token punctuation">.</span><span class="token operator">/</span>commands<span class="token punctuation">.</span>sh <span class="token punctuation">{</span><span class="token punctuation">}</span> \<span class="token punctuation">;</span>
# <span class="token number">2.</span> 删除内部为空的文件夹# 递归删除 a<span class="token operator">/</span>b<span class="token operator">/</span>c
find <span class="token punctuation">.</span> <span class="token operator">-</span>type d <span class="token operator">-</span>empty <span class="token operator">-</span><span class="token keyword">delete</span>
# 使用<span class="token punctuation">.</span>gitkeep 进行填充
find <span class="token punctuation">.</span> <span class="token operator">-</span>type d <span class="token operator">-</span>empty <span class="token operator">-</span>exec touch <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">.</span>gitkeep \<span class="token punctuation">;</span>
find <span class="token punctuation">.</span> <span class="token operator">-</span>type d <span class="token operator">-</span>empty <span class="token operator">-</span>not <span class="token operator">-</span>path <span class="token string">'*/\.*'</span> <span class="token operator">-</span>exec touch <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">.</span>gitkeep \<span class="token punctuation">;</span>
# 不初始化<span class="token punctuation">.</span>git<span class="token operator">/</span>
# <span class="token number">3.</span> 寻找 <span class="token constant">TOP</span> <span class="token number">10</span>
find <span class="token punctuation">.</span> <span class="token operator">-</span>type f <span class="token operator">-</span>printf <span class="token string">'%s %p\n'</span><span class="token operator">|</span> sort <span class="token operator">-</span>nr <span class="token operator">|</span> head <span class="token operator">-</span><span class="token number">10</span> <span class="token operator">|</span> awk <span class="token string">'{$1/=1024*1024;printf "%.2fMB - %s\n",$1,$2}'</span>
# <span class="token number">4.</span> 寻找文件夹 <span class="token constant">TOP</span> <span class="token number">10</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token constant">A</span> placeholder token that will be replaced <span class="token keyword">with</span> the path <span class="token keyword">of</span> the search <span class="token function">result</span> <span class="token punctuation">(</span>documents<span class="token operator">/</span>images<span class="token operator">/</span>party<span class="token punctuation">.</span>jpg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token operator">:</span> Like <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> but without the file <span class="token function">extension</span> <span class="token punctuation">(</span>documents<span class="token operator">/</span>images<span class="token operator">/</span>party<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">/</span><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token constant">A</span> placeholder that will be replaced by the basename <span class="token keyword">of</span> the search <span class="token function">result</span> <span class="token punctuation">(</span>party<span class="token punctuation">.</span>jpg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token comment">//}: Uses the parent of the discovered path (documents/images).{/.}: Uses the basename, with the extension removed (party).# Convert all jpg files to png files:fd -e jpg -x convert {} {.}.png# Unpack all zip files (if no placeholder is given, the path is appended):fd -e zip -x unzip# Convert all flac files into opus files:fd -e flac -x ffmpeg -i {} -c:a libopus {.}.opus# Count the number of lines in Rust files (the command template can be terminated with ';'):fd -x wc -l \; -e rs</span>
</code></pre>
<pre><code class="language-bash"># 压缩 <span class="token operator">/</span> 解压缩
<span class="token number">7</span>z <span class="token operator">/</span> <span class="token number">7</span>za <span class="token operator">/</span><span class="token number">7</span>zr
tar <span class="token operator">/</span> gzip <span class="token operator">/</span> unzip<span class="token operator">/</span> unrar
# 打包
tar <span class="token operator">-</span>cvf
# 解包
tar <span class="token operator">-</span>xvf
# 压缩
gzip
# 解压缩
gunzip
bzip
tar 是将多个文件放在一起变成一个 tar <span class="token function">文件</span> <span class="token punctuation">(</span>Tape Archiver<span class="token punctuation">)</span>
gzip 是讲一个文件变成一个压缩文件
则 foo<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz 指的是 先把文件转为 tar 文件，然后 gzip 之
</code></pre>
<h3 id="文本篇"><a class="v-toc-item" href="#文本篇">#</a> 文本篇</h3>
<pre><code class="language-bash">grep match_pattern file

	<span class="token operator">-</span>o 只输出匹配的文本行
	<span class="token operator">-</span>v 只输出没有匹配的文本行
	<span class="token operator">-</span>c 统计文件中包含文本的次数
	<span class="token operator">-</span>n 打印匹配行号
	<span class="token operator">-</span>i 搜索时符合大小写
	<span class="token operator">-</span>l 之打印文件名

grep <span class="token string">"class"</span> <span class="token punctuation">.</span> <span class="token operator">-</span><span class="token constant">R</span> <span class="token operator">-</span>n # 多级目录中对文本递归搜索
grep <span class="token operator">-</span>e <span class="token string">"class"</span> <span class="token operator">-</span>e <span class="token string">"vitural"</span> file # 匹配多个模式
grep <span class="token string">"test"</span> file<span class="token operator">*</span> <span class="token operator">-</span>lZ<span class="token operator">|</span> xargs <span class="token operator">-</span><span class="token number">0</span> rm # grep 输出以、<span class="token number">0</span> 作为结尾符的文件名：（<span class="token operator">-</span>z）<span class="token operator">-</span>d 定义定界符<span class="token operator">-</span>n 输出为多行<span class="token operator">-</span>l <span class="token punctuation">{</span><span class="token punctuation">}</span> 指定替换字符串 cat file<span class="token punctuation">.</span>txt <span class="token operator">|</span> xargs # 打印多行 cat file<span class="token punctuation">.</span>txt <span class="token operator">|</span> xargs <span class="token operator">-</span>n <span class="token number">3</span> # 分割多行
cat file<span class="token punctuation">.</span>txt <span class="token operator">|</span> xargs <span class="token operator">-</span><span class="token constant">I</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">.</span><span class="token operator">/</span>command<span class="token punctuation">.</span>sh <span class="token operator">-</span>p <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">0</span> 指定、<span class="token number">0</span> 为输入定界符
find source_dir<span class="token operator">/</span> <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">"*.cpp"</span> <span class="token operator">-</span>print0 <span class="token operator">|</span>xargs <span class="token operator">-</span><span class="token number">0</span> wc <span class="token operator">-</span>l

# sort 排序

<span class="token operator">-</span>n 按数字进行排序
<span class="token operator">-</span>d 按字典序进行排序
<span class="token operator">-</span>r 逆序排序
<span class="token operator">-</span>k <span class="token constant">N</span> 指定按照第 <span class="token constant">N</span> 列排序
sort <span class="token operator">-</span>nrk <span class="token number">1</span> data<span class="token punctuation">.</span>txtsort <span class="token operator">-</span>bd data <span class="token comment">// 忽略像空格之类的前导空白字符</span>
sort unsort<span class="token punctuation">.</span>txt <span class="token operator">|</span> uniq <span class="token operator">></span> sorted<span class="token punctuation">.</span>txt # 消除重复行
sort unsort<span class="token punctuation">.</span>txt <span class="token operator">|</span> uniq <span class="token operator">-</span>c # 统计各行在文件中出现的次数
sort unsort<span class="token punctuation">.</span>txt <span class="token operator">|</span> uniq <span class="token operator">-</span>d # 找出重复行# 用 tr 进行转换

# cut 按列切分文本 cut <span class="token operator">-</span>f2<span class="token punctuation">,</span><span class="token number">4</span> filename
# 截取文件的第 <span class="token number">2</span> 列和第 <span class="token number">4</span> 列 cut <span class="token operator">-</span>f3 <span class="token operator">--</span>complement filename #去文件除第 <span class="token number">3</span> 列的所有列 cut <span class="token operator">-</span>f2 <span class="token operator">-</span>d<span class="token string">";"</span> filename <span class="token operator">-</span>d #指定定界符 cut <span class="token operator">-</span>c1<span class="token operator">-</span><span class="token number">5</span> file
# 打印第一到 <span class="token number">5</span> 个字符 cut <span class="token operator">-</span>c<span class="token operator">-</span><span class="token number">2</span> file 
# 打印前 <span class="token number">2</span> 个字符# paste 按列拼接文本 paste file1 file2 <span class="token operator">-</span>d <span class="token string">","</span>

# wc 统计行和字符的工具 wc <span class="token operator">-</span>l file # 统计行数 wc <span class="token operator">-</span>w file # 统计单词数 wc <span class="token operator">-</span>c file # 统计字符数

# sed 文本替换利器 sed <span class="token string">'s/text/replace_text/'</span> file 
# 首处替换 sed <span class="token string">'s/text/replace_text/g'</span> file 
# 全局替换 sed <span class="token operator">-</span>i <span class="token string">'s/text/repalce_text/g'</span> file # 替换文件 sed <span class="token string">'/^$/d'</span> file 
# 移除空白行 sed <span class="token operator">-</span>i <span class="token string">'s/twocucao/micheal/g'</span> xx<span class="token punctuation">.</span>dump<span class="token punctuation">.</span>sqlsed <span class="token operator">-</span>n <span class="token number">634428</span><span class="token punctuation">,</span><span class="token number">887831</span>p insert_doc_ids_new<span class="token punctuation">.</span>sql <span class="token operator">></span> uninserted_sql<span class="token punctuation">.</span>sql
</code></pre>
<h3 id="用户篇"><a class="v-toc-item" href="#用户篇">#</a> 用户篇</h3>
<pre><code class="language-bash"># 添加 yaweb 为 sudo 用户
usermod <span class="token operator">-</span>aG sudo yaweb
所有用户和用户组信息保存在：<span class="token operator">/</span>etc<span class="token operator">/</span>passwd <span class="token punctuation">,</span> <span class="token operator">/</span>etc<span class="token operator">/</span>group
用户
useradd <span class="token operator">-</span>m yaweb # 创建相关账号，和用户目录 <span class="token operator">/</span>home<span class="token operator">/</span>yawebpasswd yawebuserdel <span class="token operator">-</span>r yaweb # 删除
用户组
usermod <span class="token operator">-</span>g groupName username # 变更组 usermod <span class="token operator">-</span><span class="token constant">G</span> groupName username # 添加到组 usermod <span class="token operator">-</span>aG sudo yaweb # 添加 yaweb 到 sudo 组
用户权限
chown <span class="token function">userMark</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">)</span>PermissionsMark
userMark 取值： <span class="token operator">-</span> u：用户 <span class="token operator">-</span> g：组 <span class="token operator">-</span> o：其它用户 <span class="token operator">-</span> a：所有用户
PermissionsMark 取值： <span class="token operator">-</span> r<span class="token operator">:</span> 读 <span class="token operator">-</span> w：写 <span class="token operator">-</span> x：执行
chmod a<span class="token operator">+</span>x main         对所有用户给文件 main 增加可执行权限 chmod g<span class="token operator">+</span>w blogs        对组用户给文件 blogs 增加可写权限 chown <span class="token operator">-</span><span class="token constant">R</span> weber server<span class="token operator">/</span>
远程登录
ssh <span class="token operator">-</span>l root <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.253</span>
ssh<span class="token operator">-</span>copy<span class="token operator">-</span>id root@<span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.253</span>
</code></pre>
<h3 id="网络篇"><a class="v-toc-item" href="#网络篇">#</a> 网络篇</h3>
<pre><code class="language-bash"><span class="token operator">/</span>etc<span class="token operator">/</span>hostname
<span class="token operator">/</span>etc<span class="token operator">/</span>hosts
netstat <span class="token operator">-</span>a
</code></pre>
<h3 id="磁盘篇"><a class="v-toc-item" href="#磁盘篇">#</a> 磁盘篇</h3>
<pre><code class="language-bash"># 查看当前目录大小
du <span class="token operator">-</span>sh
du <span class="token operator">-</span>sh <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ls</span><span class="token template-punctuation string">`</span></span> <span class="token operator">|</span> sort
# 查看当前目录的下一级文件和子目录的磁盘容量
du <span class="token operator">-</span>lh <span class="token operator">--</span>max<span class="token operator">-</span>depth<span class="token operator">=</span><span class="token number">1</span>
</code></pre>
<h3 id="进程管理"><a class="v-toc-item" href="#进程管理">#</a> 进程管理</h3>
<pre><code class="language-bash">ps <span class="token operator">-</span>ef <span class="token operator">|</span> grep twocucao ps <span class="token operator">-</span>lu twocucao # 完整显示
ps <span class="token operator">-</span>ajx
ps au <span class="token operator">|</span> grep phantomjs <span class="token operator">|</span> awk <span class="token string">'{ print $2 }'</span> <span class="token operator">|</span> xargs kill <span class="token operator">-</span><span class="token number">9</span> 
top htop 
lsof <span class="token operator">-</span>i<span class="token operator">:</span><span class="token number">3306</span>
lsof <span class="token operator">-</span>u twocucao 
kill <span class="token operator">-</span><span class="token number">9</span> pidnum 
# 将用户 colin115 下的所有进程名以 av_开头的进程终止
ps <span class="token operator">-</span>u colin115 <span class="token operator">|</span>  awk <span class="token string">'/av_/ {print "kill -9 " $1}'</span> <span class="token operator">|</span> sh
# 将用户 colin115 下所有进程名中包含 <span class="token constant">HOST</span> 的进程终止：
ps <span class="token operator">-</span>fe <span class="token operator">|</span> grep colin115 <span class="token operator">|</span> grep <span class="token constant">HOST</span> <span class="token operator">|</span> awk <span class="token string">'{print $2}'</span> <span class="token operator">|</span> xargs kill <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">;</span>
</code></pre>
<p>Systemd<br>
创建一个 Systemd 服务</p>
<pre><code># /etc/systemd/system/gunicorn.service: 

[Unit]
Description=gunicorn daemon
Requires=gunicorn.socket
After=network.target 

[Service]
PIDFile=/run/gunicorn/pid
User=someuser
Group=someuser
RuntimeDirectory=gunicorn
WorkingDirectory=/home/someuser/applicationroot
ExecStart=/usr/bin/gunicorn --pid /run/gunicorn/pid  
\\           --bind unix:/run/gunicorn/socket applicationname.wsgi
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s TERM $MAINPID PrivateTmp=true 

[Install]
WantedBy=multi-user.target
</code></pre>
<h3 id="性能监控"><a class="v-toc-item" href="#性能监控">#</a> 性能监控</h3>
<h3 id="内存瓶颈"><a class="v-toc-item" href="#内存瓶颈">#</a> 内存瓶颈</h3>
<pre><code>htop
free # 从 /proc/meminfo 读取数据
IO 瓶颈
# ubuntu 下 可以 mac 下不可以 iostat -d -x -k 1 1
如果 %iowait 的值过高，表示硬盘存在 I/O 瓶颈。
如果 %util 接近 100%，说明产生的 I/O 请求太多，I/O 系统已经满负荷，该磁盘可能存在瓶颈。
如果 svctm 比较接近 await，说明 I/O 几乎没有等待时间；
如果 await 远大于 svctm，说明 I/O 队列太长，io 响应太慢，则需要进行必要优化。
如果 avgqu-sz 比较大，也表示有大量 io 在等待。
</code></pre>
<h2 id="0x06-资料推荐"><a class="v-toc-item" href="#0x06-资料推荐">#</a> 0x06 资料推荐</h2>
<ul>
<li>一个关于 Linux 命令的各种奇技的网站 <a href="http://www.commandlinefu.com/commands/browse">http://www.commandlinefu.com/commands/browse</a></li>
<li>Linux 工具快速教程 <a href="http://linuxtools-rst.readthedocs.org/zh_CN/latest/index.html">http://linuxtools-rst.readthedocs.org/zh_CN/latest/index.html</a></li>
<li>一个 Awesome List, <a href="https://github.com/jaywcjlove/linux-command">https://github.com/jaywcjlove/linux-command</a></li>
<li>命令行的艺术 <a href="https://github.com/jlevy/the-art-of-command-line">https://github.com/jlevy/the-art-of-command-line</a></li>
<li>man command 需要好好研读，特别是 man bash 至少要研读几遍</li>
</ul>
<hr>
<p>ChangeLog:</p>
<ul>
<li><strong>2015-04-18</strong> 初始化本文</li>
<li><strong>2018-08-28</strong> 重修文字</li>
<li><strong>2020-10-24</strong> 重修文字</li>
</ul>
</div></div><div><ul class="v-article-toc">
<li><a href="#shell-cheatsheet">Shell CheatSheet</a>
<ul>
<li><a href="#0x00-%E5%89%8D%E8%A8%80">0x00 前言</a></li>
<li><a href="#0x01-%E5%BF%AB%E6%8D%B7%E9%94%AE">0x01 快捷键</a></li>
<li><a href="#0x02-%E5%B8%AE%E5%8A%A9">0x02 帮助</a></li>
<li><a href="#0x03-macos-%E7%94%A8%E6%88%B7">0x03 macOS 用户</a></li>
<li><a href="#0x04-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4-old-fashion">0x04 基本命令 - old fashion</a>
<ul>
<li><a href="#%E6%96%87%E6%9C%AC%E7%AF%87">文本篇</a></li>
<li><a href="#%E7%94%A8%E6%88%B7%E7%AF%87">用户篇</a></li>
<li><a href="#%E7%BD%91%E7%BB%9C%E7%AF%87">网络篇</a></li>
<li><a href="#%E7%A3%81%E7%9B%98%E7%AF%87">磁盘篇</a></li>
<li><a href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86">进程管理</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7">性能监控</a></li>
<li><a href="#%E5%86%85%E5%AD%98%E7%93%B6%E9%A2%88">内存瓶颈</a></li>
</ul>
</li>
<li><a href="#0x06-%E8%B5%84%E6%96%99%E6%8E%A8%E8%8D%90">0x06 资料推荐</a></li>
</ul>
</li>
</ul>
</div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"tags":["Shell"],"path":"20150418_ShellCheatSheet.md","title":"Shell CheatSheet","slug":"Shell CheatSheet","date":"2017-12-01","category":"善用佳软","lastMod":"2020-01-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"\u003ch1 id=\"shell-cheatsheet\"\u003e\u003ca class=\"v-toc-item\" href=\"#shell-cheatsheet\"\u003e#\u003c/a\u003e Shell CheatSheet\u003c/h1\u003e\n\u003ch2 id=\"0x00-前言\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x00-前言\"\u003e#\u003c/a\u003e 0x00 前言\u003c/h2\u003e\n\u003cp\u003e本文为 Cheatsheet 类型文章，用于记录我在日常编程中经常使用的 Shell 单行命令。\u003c/p\u003e\n\u003ch2 id=\"0x01-快捷键\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x01-快捷键\"\u003e#\u003c/a\u003e 0x01 快捷键\u003c/h2\u003e\n\u003cpre\u003e\u003ccode\u003e- 「c-c」 : 中断当前命令。\n- 「c-z」 : 当前程序暂停，bg 切换后台运行，使用 fg 可以调回\n- 「tab」 : 补全\n- 「tabx2」 : 补全提示\n- 「c-r」 : 搜索命令行\n- 「c-w」 : 同 vim\n- 「c-u」 : 删除整行\n- 「a-b/a-f」 : 移动一个词\n- 「c-a」 : 移动至行首\n- 「c-e」 : 移动至行尾\n- 「c-k」 : 删除光标到行尾\n- 「c-l」 : 清屏\n- 「c-x,c-e」 : 用默认编辑器编辑当前命令（这样就可以把其他文本移动扔掉了。)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x02-帮助\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x02-帮助\"\u003e#\u003c/a\u003e 0x02 帮助\u003c/h2\u003e\n\u003cp\u003e查找帮助\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e- man\n- whatis / which / where\n- tldr\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e值得一提的就是 tldr, 直接可以在上面查看命令的常规使用。实在是碉堡了。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026gt; tldr ssh\nLocal data is older than two weeks, use --update to update it.\n\nssh\n\nSecure Shell is a protocol used to securely log onto remote systems.\nIt can be used for logging or executing commands on a remote server.\n\n- Connect to a remote server:\n    ssh username@remote_host\n\n- Connect to a remote server with a specific identity (private key):\n    ssh -i path/to/key_file username@remote_host\n\n- Connect to a remote server using a specific port:\n    ssh username@remote_host -p 2222\n\n- Run a command on a remote server:\n    ssh remote_host command -with -flags\n\n- SSH tunneling: Dynamic port forwarding (SOCKS proxy on localhost:9999):\n    ssh -D 9999 -C username@remote_host\n\n- SSH tunneling: Forward a specific port (localhost:9999 to slashdot.org:80) along with disabling pseudo-[t]ty allocation and executio[n] of remote commands:\n    ssh -L 9999:slashdot.org:80 -N -T username@remote_host\n\n- SSH jumping: Connect through a jumphost to a remote server (Multiple jump hops may be specified separated by comma characters):\n    ssh -J username@jump_host username@remote_host\n\n- Agent forwarding: Forward the authentication information to the remote machine (see `man ssh_config` for available options):\n    ssh -A username@remote_host\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x03-macos-用户\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x03-macos-用户\"\u003e#\u003c/a\u003e 0x03 macOS 用户\u003c/h2\u003e\n\u003cp\u003e如果你和我一样使用的是 mac 系统\u003c/p\u003e\n\u003cp\u003e可以考虑将部分 FreeBSD 的工具换成 gnu\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ebrew install autoconf bash binutils coreutils diffutils ed findutils flex gawk \\\n    gnu-indent gnu-sed gnu-tar gnu-which gpatch grep gzip less m4 make nano \\\n    screen watch wdiff wget\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ebashrc/zshrc 加上如下命令\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eif type brew \u0026amp;\u0026gt;/dev/null; then\n  HOMEBREW_PREFIX=$(brew --prefix)\n  # gnubin; gnuman\n  for d in ${HOMEBREW_PREFIX}/opt/*/libexec/gnubin; do export PATH=$d:$PATH; done\n  # I actually like that man grep gives the BSD grep man page\n  #for d in ${HOMEBREW_PREFIX}/opt/*/libexec/gnuman; do export MANPATH=$d:$MANPATH; done\nfi\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e经过上面一步，则基本上 find sed tar which 这些命令使用的 gnu 版本 (linux 版本）, 而非系统自带的 unix 版本了。\u003c/p\u003e\n\u003ch2 id=\"0x04-基本命令-old-fashion\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x04-基本命令-old-fashion\"\u003e#\u003c/a\u003e 0x04 基本命令 - old fashion\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e文件 \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e 目录 mkdir \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e rm\n查找文件 cd \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e cp \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e pwd \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e find\n查看文件 more \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e less \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e tail \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e diff \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e cat \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e grep\n用户权限 chown \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e chmod\n复制 \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e 粘贴 \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e 同步 \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e 链接 cp \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e rsync \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e ln\n挂载 mount\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# 创建和删除\nmkdir\nmkdir \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ep a\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eb\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ec\n\nrm\nrm \u003cspan class=\"token operator\"\u003e-\u003c/span\u003erf dir\u003cspan class=\"token operator\"\u003e/\u003c/span\u003efile\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eregex\nrm \u003cspan class=\"token operator\"\u003e*\u003c/span\u003elog# 等价 find \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*log\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eexec rm \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\nmv\ncp\ncp \u003cspan class=\"token operator\"\u003e-\u003c/span\u003er source_dir dest_dir\nrsync \u003cspan class=\"token operator\"\u003e--\u003c/span\u003eprogress \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ea source_dir dest_dir\nrsync \u003cspan class=\"token operator\"\u003e-\u003c/span\u003evr \u003cspan class=\"token operator\"\u003e--\u003c/span\u003eprogress you_folder_here twocucao@\u003cspan class=\"token number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"token number\"\u003e.2\u003c/span\u003e\u003cspan class=\"token number\"\u003e.151\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eUsers\u003cspan class=\"token operator\"\u003e/\u003c/span\u003etwocucao\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eCodes\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e# 目录切换 ls \u003cspan class=\"token operator\"\u003e-\u003c/span\u003elrt\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*.o\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eexec rm \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \\\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nmore\nhead\ntail\ntail \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ef filename\ndiff\nchown\nchmod\nchown \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token constant\"\u003eR\u003c/span\u003e tuxapp source\u003cspan class=\"token operator\"\u003e/\u003c/span\u003echmod a\u003cspan class=\"token operator\"\u003e+\u003c/span\u003ex myscript\nln cc ccA\nln \u003cspan class=\"token operator\"\u003e-\u003c/span\u003es cc ccTo\ncat \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ev record\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003elog \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e grep \u003cspan class=\"token constant\"\u003eAAA\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e grep \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ev \u003cspan class=\"token constant\"\u003eBBB\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e wc \u003cspan class=\"token operator\"\u003e-\u003c/span\u003el\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e wc \u003cspan class=\"token operator\"\u003e-\u003c/span\u003el\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e查找文件之 \u003cspan class=\"token function\"\u003efind\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egfind\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n## Find\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \\\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*.txt\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eo \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*.pdf\"\u003c/span\u003e \\\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint\n# 正则方式查找 txt 和 pdf\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eregex  \u003cspan class=\"token string\"\u003e\".*\\(\\.txt|\\.pdf\\)$\"\u003c/span\u003e\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*.txt\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003emaxdepth \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f\n# 定制搜索\n## 按照类型搜索\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint  #只列出所有文件\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype d \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint  #只列出所有目录\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype l \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint  #只列出所有符号链接\n## 按照时间搜索\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eatime \u003cspan class=\"token number\"\u003e7\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint\n# 最近第 \u003cspan class=\"token number\"\u003e7\u003c/span\u003e 天被访问过的所有文件：\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eatime \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e7\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint\n# 最近 \u003cspan class=\"token number\"\u003e7\u003c/span\u003e 天内被访问过的所有文件：\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eatime \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token number\"\u003e7\u003c/span\u003e type f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint\n# 查询 \u003cspan class=\"token number\"\u003e7\u003c/span\u003e 天前被访问过的所有文件：\n# w\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003ek\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token constant\"\u003eM\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003eGfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003esize \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003ekfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eperm \u003cspan class=\"token number\"\u003e644\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint \n# 找具有可执行权限的所有文件 find \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003euser weber \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint\n# 找用户 weber 所拥有的文件\n# 后续动作\n## 删除 find \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*.swp\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003edelete\u003c/span\u003e\n## 执行动作\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*.swp\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e xargs rmfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003euser root \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eexec chown weber \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \\\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n## eg\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e copy 到另一个目录\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003emtime \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token number\"\u003e10\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*.txt\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eexec cp \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token constant\"\u003eOLD\u003c/span\u003e \\\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n##  \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eexec \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ecommands\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esh \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \\\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n# \u003cspan class=\"token number\"\u003e2.\u003c/span\u003e 删除内部为空的文件夹# 递归删除 a\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eb\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ec\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype d \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eempty \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003edelete\u003c/span\u003e\n# 使用\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egitkeep 进行填充\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype d \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eempty \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eexec touch \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egitkeep \\\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype d \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eempty \u003cspan class=\"token operator\"\u003e-\u003c/span\u003enot \u003cspan class=\"token operator\"\u003e-\u003c/span\u003epath \u003cspan class=\"token string\"\u003e'*/\\.*'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eexec touch \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egitkeep \\\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n# 不初始化\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egit\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\n# \u003cspan class=\"token number\"\u003e3.\u003c/span\u003e 寻找 \u003cspan class=\"token constant\"\u003eTOP\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\nfind \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprintf \u003cspan class=\"token string\"\u003e'%s %p\\n'\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e sort \u003cspan class=\"token operator\"\u003e-\u003c/span\u003enr \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e head \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e10\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e awk \u003cspan class=\"token string\"\u003e'{$1/=1024*1024;printf \"%.2fMB - %s\\n\",$1,$2}'\u003c/span\u003e\n# \u003cspan class=\"token number\"\u003e4.\u003c/span\u003e 寻找文件夹 \u003cspan class=\"token constant\"\u003eTOP\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eA\u003c/span\u003e placeholder token that will be replaced \u003cspan class=\"token keyword\"\u003ewith\u003c/span\u003e the path \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e the search \u003cspan class=\"token function\"\u003eresult\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edocuments\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eimages\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eparty\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ejpg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Like \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e but without the file \u003cspan class=\"token function\"\u003eextension\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edocuments\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eimages\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eparty\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eA\u003c/span\u003e placeholder that will be replaced by the basename \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e the search \u003cspan class=\"token function\"\u003eresult\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eparty\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ejpg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token comment\"\u003e//}: Uses the parent of the discovered path (documents/images).{/.}: Uses the basename, with the extension removed (party).# Convert all jpg files to png files:fd -e jpg -x convert {} {.}.png# Unpack all zip files (if no placeholder is given, the path is appended):fd -e zip -x unzip# Convert all flac files into opus files:fd -e flac -x ffmpeg -i {} -c:a libopus {.}.opus# Count the number of lines in Rust files (the command template can be terminated with ';'):fd -x wc -l \\; -e rs\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# 压缩 \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e 解压缩\n\u003cspan class=\"token number\"\u003e7\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e7\u003c/span\u003eza \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token number\"\u003e7\u003c/span\u003ezr\ntar \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e gzip \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e unzip\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e unrar\n# 打包\ntar \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ecvf\n# 解包\ntar \u003cspan class=\"token operator\"\u003e-\u003c/span\u003exvf\n# 压缩\ngzip\n# 解压缩\ngunzip\nbzip\ntar 是将多个文件放在一起变成一个 tar \u003cspan class=\"token function\"\u003e文件\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eTape Archiver\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ngzip 是讲一个文件变成一个压缩文件\n则 foo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etar\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egz 指的是 先把文件转为 tar 文件，然后 gzip 之\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"文本篇\"\u003e\u003ca class=\"v-toc-item\" href=\"#文本篇\"\u003e#\u003c/a\u003e 文本篇\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003egrep match_pattern file\n\n\t\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eo 只输出匹配的文本行\n\t\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ev 只输出没有匹配的文本行\n\t\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ec 统计文件中包含文本的次数\n\t\u003cspan class=\"token operator\"\u003e-\u003c/span\u003en 打印匹配行号\n\t\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ei 搜索时符合大小写\n\t\u003cspan class=\"token operator\"\u003e-\u003c/span\u003el 之打印文件名\n\ngrep \u003cspan class=\"token string\"\u003e\"class\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token constant\"\u003eR\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003en # 多级目录中对文本递归搜索\ngrep \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ee \u003cspan class=\"token string\"\u003e\"class\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ee \u003cspan class=\"token string\"\u003e\"vitural\"\u003c/span\u003e file # 匹配多个模式\ngrep \u003cspan class=\"token string\"\u003e\"test\"\u003c/span\u003e file\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003elZ\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e xargs \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e rm # grep 输出以、\u003cspan class=\"token number\"\u003e0\u003c/span\u003e 作为结尾符的文件名：（\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ez）\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ed 定义定界符\u003cspan class=\"token operator\"\u003e-\u003c/span\u003en 输出为多行\u003cspan class=\"token operator\"\u003e-\u003c/span\u003el \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e 指定替换字符串 cat file\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etxt \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e xargs # 打印多行 cat file\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etxt \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e xargs \u003cspan class=\"token operator\"\u003e-\u003c/span\u003en \u003cspan class=\"token number\"\u003e3\u003c/span\u003e # 分割多行\ncat file\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etxt \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e xargs \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token constant\"\u003eI\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ecommand\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esh \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ep \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e 指定、\u003cspan class=\"token number\"\u003e0\u003c/span\u003e 为输入定界符\nfind source_dir\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003etype f \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ename \u003cspan class=\"token string\"\u003e\"*.cpp\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eprint0 \u003cspan class=\"token operator\"\u003e|\u003c/span\u003exargs \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e wc \u003cspan class=\"token operator\"\u003e-\u003c/span\u003el\n\n# sort 排序\n\n\u003cspan class=\"token operator\"\u003e-\u003c/span\u003en 按数字进行排序\n\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ed 按字典序进行排序\n\u003cspan class=\"token operator\"\u003e-\u003c/span\u003er 逆序排序\n\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ek \u003cspan class=\"token constant\"\u003eN\u003c/span\u003e 指定按照第 \u003cspan class=\"token constant\"\u003eN\u003c/span\u003e 列排序\nsort \u003cspan class=\"token operator\"\u003e-\u003c/span\u003enrk \u003cspan class=\"token number\"\u003e1\u003c/span\u003e data\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etxtsort \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ebd data \u003cspan class=\"token comment\"\u003e// 忽略像空格之类的前导空白字符\u003c/span\u003e\nsort unsort\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etxt \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e uniq \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e sorted\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etxt # 消除重复行\nsort unsort\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etxt \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e uniq \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ec # 统计各行在文件中出现的次数\nsort unsort\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etxt \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e uniq \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ed # 找出重复行# 用 tr 进行转换\n\n# cut 按列切分文本 cut \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ef2\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4\u003c/span\u003e filename\n# 截取文件的第 \u003cspan class=\"token number\"\u003e2\u003c/span\u003e 列和第 \u003cspan class=\"token number\"\u003e4\u003c/span\u003e 列 cut \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ef3 \u003cspan class=\"token operator\"\u003e--\u003c/span\u003ecomplement filename #去文件除第 \u003cspan class=\"token number\"\u003e3\u003c/span\u003e 列的所有列 cut \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ef2 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ed\u003cspan class=\"token string\"\u003e\";\"\u003c/span\u003e filename \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ed #指定定界符 cut \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ec1\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e file\n# 打印第一到 \u003cspan class=\"token number\"\u003e5\u003c/span\u003e 个字符 cut \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ec\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e file \n# 打印前 \u003cspan class=\"token number\"\u003e2\u003c/span\u003e 个字符# paste 按列拼接文本 paste file1 file2 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ed \u003cspan class=\"token string\"\u003e\",\"\u003c/span\u003e\n\n# wc 统计行和字符的工具 wc \u003cspan class=\"token operator\"\u003e-\u003c/span\u003el file # 统计行数 wc \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ew file # 统计单词数 wc \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ec file # 统计字符数\n\n# sed 文本替换利器 sed \u003cspan class=\"token string\"\u003e's/text/replace_text/'\u003c/span\u003e file \n# 首处替换 sed \u003cspan class=\"token string\"\u003e's/text/replace_text/g'\u003c/span\u003e file \n# 全局替换 sed \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ei \u003cspan class=\"token string\"\u003e's/text/repalce_text/g'\u003c/span\u003e file # 替换文件 sed \u003cspan class=\"token string\"\u003e'/^$/d'\u003c/span\u003e file \n# 移除空白行 sed \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ei \u003cspan class=\"token string\"\u003e's/twocucao/micheal/g'\u003c/span\u003e xx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edump\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esqlsed \u003cspan class=\"token operator\"\u003e-\u003c/span\u003en \u003cspan class=\"token number\"\u003e634428\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e887831\u003c/span\u003ep insert_doc_ids_new\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esql \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e uninserted_sql\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esql\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"用户篇\"\u003e\u003ca class=\"v-toc-item\" href=\"#用户篇\"\u003e#\u003c/a\u003e 用户篇\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# 添加 yaweb 为 sudo 用户\nusermod \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eaG sudo yaweb\n所有用户和用户组信息保存在：\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eetc\u003cspan class=\"token operator\"\u003e/\u003c/span\u003epasswd \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003eetc\u003cspan class=\"token operator\"\u003e/\u003c/span\u003egroup\n用户\nuseradd \u003cspan class=\"token operator\"\u003e-\u003c/span\u003em yaweb # 创建相关账号，和用户目录 \u003cspan class=\"token operator\"\u003e/\u003c/span\u003ehome\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eyawebpasswd yawebuserdel \u003cspan class=\"token operator\"\u003e-\u003c/span\u003er yaweb # 删除\n用户组\nusermod \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eg groupName username # 变更组 usermod \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token constant\"\u003eG\u003c/span\u003e groupName username # 添加到组 usermod \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eaG sudo yaweb # 添加 yaweb 到 sudo 组\n用户权限\nchown \u003cspan class=\"token function\"\u003euserMark\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003ePermissionsMark\nuserMark 取值： \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e u：用户 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e g：组 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e o：其它用户 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e a：所有用户\nPermissionsMark 取值： \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e r\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e 读 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e w：写 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e x：执行\nchmod a\u003cspan class=\"token operator\"\u003e+\u003c/span\u003ex main         对所有用户给文件 main 增加可执行权限 chmod g\u003cspan class=\"token operator\"\u003e+\u003c/span\u003ew blogs        对组用户给文件 blogs 增加可写权限 chown \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token constant\"\u003eR\u003c/span\u003e weber server\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\n远程登录\nssh \u003cspan class=\"token operator\"\u003e-\u003c/span\u003el root \u003cspan class=\"token number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"token number\"\u003e.2\u003c/span\u003e\u003cspan class=\"token number\"\u003e.253\u003c/span\u003e\nssh\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ecopy\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eid root@\u003cspan class=\"token number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"token number\"\u003e.2\u003c/span\u003e\u003cspan class=\"token number\"\u003e.253\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"网络篇\"\u003e\u003ca class=\"v-toc-item\" href=\"#网络篇\"\u003e#\u003c/a\u003e 网络篇\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eetc\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ehostname\n\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eetc\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ehosts\nnetstat \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ea\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"磁盘篇\"\u003e\u003ca class=\"v-toc-item\" href=\"#磁盘篇\"\u003e#\u003c/a\u003e 磁盘篇\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# 查看当前目录大小\ndu \u003cspan class=\"token operator\"\u003e-\u003c/span\u003esh\ndu \u003cspan class=\"token operator\"\u003e-\u003c/span\u003esh \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003els\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e sort\n# 查看当前目录的下一级文件和子目录的磁盘容量\ndu \u003cspan class=\"token operator\"\u003e-\u003c/span\u003elh \u003cspan class=\"token operator\"\u003e--\u003c/span\u003emax\u003cspan class=\"token operator\"\u003e-\u003c/span\u003edepth\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"进程管理\"\u003e\u003ca class=\"v-toc-item\" href=\"#进程管理\"\u003e#\u003c/a\u003e 进程管理\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eps \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eef \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e grep twocucao ps \u003cspan class=\"token operator\"\u003e-\u003c/span\u003elu twocucao # 完整显示\nps \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eajx\nps au \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e grep phantomjs \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e awk \u003cspan class=\"token string\"\u003e'{ print $2 }'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e xargs kill \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e9\u003c/span\u003e \ntop htop \nlsof \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ei\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e3306\u003c/span\u003e\nlsof \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eu twocucao \nkill \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e9\u003c/span\u003e pidnum \n# 将用户 colin115 下的所有进程名以 av_开头的进程终止\nps \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eu colin115 \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e  awk \u003cspan class=\"token string\"\u003e'/av_/ {print \"kill -9 \" $1}'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e sh\n# 将用户 colin115 下所有进程名中包含 \u003cspan class=\"token constant\"\u003eHOST\u003c/span\u003e 的进程终止：\nps \u003cspan class=\"token operator\"\u003e-\u003c/span\u003efe \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e grep colin115 \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e grep \u003cspan class=\"token constant\"\u003eHOST\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e awk \u003cspan class=\"token string\"\u003e'{print $2}'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e xargs kill \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e9\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSystemd\u003cbr\u003e\n创建一个 Systemd 服务\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# /etc/systemd/system/gunicorn.service: \n\n[Unit]\nDescription=gunicorn daemon\nRequires=gunicorn.socket\nAfter=network.target \n\n[Service]\nPIDFile=/run/gunicorn/pid\nUser=someuser\nGroup=someuser\nRuntimeDirectory=gunicorn\nWorkingDirectory=/home/someuser/applicationroot\nExecStart=/usr/bin/gunicorn --pid /run/gunicorn/pid  \n\\\\           --bind unix:/run/gunicorn/socket applicationname.wsgi\nExecReload=/bin/kill -s HUP $MAINPID\nExecStop=/bin/kill -s TERM $MAINPID PrivateTmp=true \n\n[Install]\nWantedBy=multi-user.target\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"性能监控\"\u003e\u003ca class=\"v-toc-item\" href=\"#性能监控\"\u003e#\u003c/a\u003e 性能监控\u003c/h3\u003e\n\u003ch3 id=\"内存瓶颈\"\u003e\u003ca class=\"v-toc-item\" href=\"#内存瓶颈\"\u003e#\u003c/a\u003e 内存瓶颈\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003ehtop\nfree # 从 /proc/meminfo 读取数据\nIO 瓶颈\n# ubuntu 下 可以 mac 下不可以 iostat -d -x -k 1 1\n如果 %iowait 的值过高，表示硬盘存在 I/O 瓶颈。\n如果 %util 接近 100%，说明产生的 I/O 请求太多，I/O 系统已经满负荷，该磁盘可能存在瓶颈。\n如果 svctm 比较接近 await，说明 I/O 几乎没有等待时间；\n如果 await 远大于 svctm，说明 I/O 队列太长，io 响应太慢，则需要进行必要优化。\n如果 avgqu-sz 比较大，也表示有大量 io 在等待。\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x06-资料推荐\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x06-资料推荐\"\u003e#\u003c/a\u003e 0x06 资料推荐\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e一个关于 Linux 命令的各种奇技的网站 \u003ca href=\"http://www.commandlinefu.com/commands/browse\"\u003ehttp://www.commandlinefu.com/commands/browse\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eLinux 工具快速教程 \u003ca href=\"http://linuxtools-rst.readthedocs.org/zh_CN/latest/index.html\"\u003ehttp://linuxtools-rst.readthedocs.org/zh_CN/latest/index.html\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e一个 Awesome List, \u003ca href=\"https://github.com/jaywcjlove/linux-command\"\u003ehttps://github.com/jaywcjlove/linux-command\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e命令行的艺术 \u003ca href=\"https://github.com/jlevy/the-art-of-command-line\"\u003ehttps://github.com/jlevy/the-art-of-command-line\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eman command 需要好好研读，特别是 man bash 至少要研读几遍\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eChangeLog:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e2015-04-18\u003c/strong\u003e 初始化本文\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e2018-08-28\u003c/strong\u003e 重修文字\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e2020-10-24\u003c/strong\u003e 重修文字\u003c/li\u003e\n\u003c/ul\u003e\n","toc":"\u003cul class=\"v-article-toc\"\u003e\n\u003cli\u003e\u003ca href=\"#shell-cheatsheet\"\u003eShell CheatSheet\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#0x00-%E5%89%8D%E8%A8%80\"\u003e0x00 前言\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x01-%E5%BF%AB%E6%8D%B7%E9%94%AE\"\u003e0x01 快捷键\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x02-%E5%B8%AE%E5%8A%A9\"\u003e0x02 帮助\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x03-macos-%E7%94%A8%E6%88%B7\"\u003e0x03 macOS 用户\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x04-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4-old-fashion\"\u003e0x04 基本命令 - old fashion\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E6%96%87%E6%9C%AC%E7%AF%87\"\u003e文本篇\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E7%94%A8%E6%88%B7%E7%AF%87\"\u003e用户篇\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E7%BD%91%E7%BB%9C%E7%AF%87\"\u003e网络篇\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E7%A3%81%E7%9B%98%E7%AF%87\"\u003e磁盘篇\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86\"\u003e进程管理\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7\"\u003e性能监控\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%86%85%E5%AD%98%E7%93%B6%E9%A2%88\"\u003e内存瓶颈\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x06-%E8%B5%84%E6%96%99%E6%8E%A8%E8%8D%90\"\u003e0x06 资料推荐\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"Shell CheatSheet"},"buildId":"oDi_oBCBuu3qj6v7hDnrL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>