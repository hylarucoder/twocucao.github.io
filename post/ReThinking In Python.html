<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>ReThinking In Python | 海拉鲁编程客</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/49455a07b6dd33600cdf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/49455a07b6dd33600cdf.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-20d43e08bea62467b090.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-4777350f2a9ff73ea2b0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3050679c6e5142ffcaf5.js" defer=""></script><script src="/_next/static/chunks/ea88be26-9bcf6ead520f4ac26973.js" defer=""></script><script src="/_next/static/chunks/421-f2f33a86b546237f0325.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-173fe2de48c90365db9d.js" defer=""></script><script src="/_next/static/oDi_oBCBuu3qj6v7hDnrL/_buildManifest.js" defer=""></script><script src="/_next/static/oDi_oBCBuu3qj6v7hDnrL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="v-page"><nav class="shadow"><div class="flex flex-col container mx-auto h-12 px-40 md:flex-row md:items-center md:justify-between"><div class="flex justify-between items-center"><div><a class="text-gray-800 text-xl md:text-xl leading-5" href="/">海拉鲁编程客</a></div><div><button type="button" class="block text-gray-800 hover:text-gray-600 focus:text-gray-600 focus:outline-none md:hidden"><svg viewBox="0 0 24 24" class="h-6 w-6 fill-current"><path d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"></path></svg></button></div></div><div class="md:flex flex-col md:flex-row md:-mx-4 hidden"><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/">首页</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/archive">归档</a><a class="my-1 text-gray-800 hover:text-blue-500 md:mx-4 md:my-0" href="/about">关于我</a><button style="cursor:pointer;overflow:hidden;width:50px;height:23.5px;appearance:none;-moz-appearance:none;-webkit-appearance:none;border:none;background-color:transparent;padding:0" aria-hidden="true"><div style="display:flex;align-items:center;justify-content:center;margin-top:-28.749999999999996px;margin-left:-16px;width:82.5px;height:82.5px"><div></div></div></button></div></div></nav><div class="v-article"><div class="v-article-main" style="margin:auto;width:786px"><div><h2 id="0x00-前言"><a class="v-toc-item" href="#0x00-前言">#</a> 0x00 前言</h2>
<p>本文诞生于利用 Topic Reading 方法读 Python 和 JavaScript 若干本技术书籍这个过程中结合自己的开发常见场景记录下来的一些笔记。</p>
<h2 id="0x01-python-胡论"><a class="v-toc-item" href="#0x01-python-胡论">#</a> 0x01 Python 胡论</h2>
<h3 id="why-python"><a class="v-toc-item" href="#why-python">#</a> Why Python</h3>
<p>是要用一门编程语言无非是两种原因：</p>
<ul>
<li>这门技术很火，能挣钱</li>
<li>写起来很舒服，开发效率高</li>
</ul>
<p>这也是我在涉猎了很多编程语言为什么选择了 Python 和 TypeScript 作为自己的主要技能树。</p>
<p>Python 具备这两点，TS （更加准确的说是 JavaScript）具备前一点。</p>
<p>Python 写起来真的特别舒服，语法简洁，第三方库丰富，而且也比较火。</p>
<p>有什么东西比，写代码效率高、生态圈好还重要了。</p>
<p>生态圈好，比如</p>
<ul>
<li>Web 开发用 Django/Flask</li>
<li>数据抓取用 Requests</li>
<li>数据分析清洗用 Pandas</li>
<li>机器学习 Tensorflow SCIPY</li>
</ul>
<!-- more -->
<h3 id="工具链"><a class="v-toc-item" href="#工具链">#</a> 工具链</h3>
<p><a href="./ch04/s03_Pythonista_%E7%9A%84%E5%B7%A5%E5%85%B7%E9%9B%86.md">Pythonista 的工具集</a></p>
<h3 id="文档"><a class="v-toc-item" href="#文档">#</a> 文档</h3>
<h3 id="社区"><a class="v-toc-item" href="#社区">#</a> 社区</h3>
<h3 id="书籍"><a class="v-toc-item" href="#书籍">#</a> 书籍</h3>
<h2 id="0x02-基础概念"><a class="v-toc-item" href="#0x02-基础概念">#</a> 0x02 基础概念</h2>
<h3 id="21-数据类型"><a class="v-toc-item" href="#21-数据类型">#</a> 2.1 数据类型</h3>
<h4 id="常量"><a class="v-toc-item" href="#常量">#</a> 常量</h4>
<pre><code>False
True
None
NotImplemented
Elilipsis ...
</code></pre>
<h5 id="布尔"><a class="v-toc-item" href="#布尔">#</a> 布尔</h5>
<p>布尔常量</p>
<pre><code>None
False
0 0.0 0j
'' () []
{}
一个对象 __bool__() = False , 如果上一个为 True 则__len__()
</code></pre>
<p>布尔运算符</p>
<pre><code>x or y
x and y
not x
</code></pre>
<p>布尔比较值</p>
<pre><code># 可以定制
&lt; &lt;= &gt;= &gt; == !=
# 无法定制
is / is not
</code></pre>
<h5 id="字符串"><a class="v-toc-item" href="#字符串">#</a> 字符串</h5>
<p>五种 format 方式</p>
<ol>
<li>古代 %</li>
<li>近代 format</li>
<li>现代 f 字符串</li>
<li>内置的 template</li>
<li>jinja2 的模板</li>
</ol>
<h4 id="数字类型"><a class="v-toc-item" href="#数字类型">#</a> 数字类型</h4>
<ul>
<li>int</li>
<li>float</li>
<li>complex</li>
</ul>
<h5 id="操作符"><a class="v-toc-item" href="#操作符">#</a> 操作符</h5>
<pre><code>+ - * / // % -n +n abs() int() float()
complex(re,im)
c.conjugate()
divmod(x,y)
pow(x,y) x ** y
math.trunc(x)
math.round(x[,n])
math.floor(x) &lt;=x
math.ceil(x)  &gt;=x
| ^ &amp; &lt;&lt; &gt;&gt; ~x
</code></pre>
<p>注意</p>
<pre><code>(-1) / 2 # -1
1 / (-2) # -1
</code></pre>
<h5 id="数值哈希"><a class="v-toc-item" href="#数值哈希">#</a> 数值哈希</h5>
<p>// TODO : 麻蛋居然没看懂 4.4.4. Hashing of numeric types</p>
<h4 id="迭代器类型"><a class="v-toc-item" href="#迭代器类型">#</a> 迭代器类型</h4>
<p>迭代器类型</p>
<h4 id="序列类型"><a class="v-toc-item" href="#序列类型">#</a> 序列类型</h4>
<p>C 实现的按照 item 是否为同一类型分为：</p>
<ul>
<li><strong>Container sequences</strong>: list, tuple, and collections.deque can hold items of different types.</li>
<li><strong>Flat sequences</strong>: str, bytes, bytearray, memoryview, and array.array hold items of one type.</li>
</ul>
<p>C 实现按照 item 是否可修改分为：</p>
<ul>
<li><strong>Mutable sequences</strong>: list, bytearray, array.array, collections.deque, and memoryview</li>
<li><strong>Immutable sequences</strong>: tuple, str, and bytes</li>
</ul>
<h5 id="通用序列操作"><a class="v-toc-item" href="#通用序列操作">#</a> 通用序列操作</h5>
<pre><code class="language-bash">x <span class="token keyword">in</span> s
x not <span class="token keyword">in</span> s
s <span class="token operator">+</span> t
s <span class="token operator">*</span> n 或者 n <span class="token operator">*</span> s
s<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
s<span class="token punctuation">[</span>i<span class="token operator">:</span>j<span class="token punctuation">]</span>
s<span class="token punctuation">[</span>i<span class="token operator">:</span>j<span class="token operator">:</span>s<span class="token punctuation">]</span>
<span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token function">min</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token function">max</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
s<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span>
s<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token comment">// TODO 封装 deepEqual</span>
</code></pre>
<p>切片</p>
<p>为何 Slice 和 Range 会排除 最后一个 Item?</p>
<p>书中讲的太复杂，其实这个和尺子是一个作用，尺子从 0 刻度开始，这样方便丈量。</p>
<p>比如说：</p>
<ul>
<li>items[0:10] 为 10 厘米</li>
<li>items[10] 为 10 刻度后一个单位，即 items[10:11]</li>
<li>items[2:] 为 2 刻度后面若干个单位</li>
<li>items[::3] 以三为单位，从 0 刻度开始，最后为结尾，每三个</li>
</ul>
<pre><code class="language-python">a<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> # 调用 a<span class="token punctuation">.</span><span class="token function">__getitem__</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h5 id="不可变序列"><a class="v-toc-item" href="#不可变序列">#</a> 不可变序列</h5>
<ul>
<li>解包赋值</li>
<li>不要手贱加逗号</li>
<li>下划线可以用作临时变量 （但是 django 中下划线用于中英文）</li>
</ul>
<pre><code class="language-python">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">*</span>rest <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> # <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">*</span>rest <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> # <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">*</span>rest <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> # <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

a<span class="token punctuation">,</span> <span class="token operator">*</span>body<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> # <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token operator">*</span>head<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> # <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre>
<ul>
<li>namedtuple</li>
</ul>
<pre><code class="language-python">City <span class="token operator">=</span> <span class="token function">namedtuple</span><span class="token punctuation">(</span><span class="token string">'City'</span><span class="token punctuation">,</span> <span class="token string">'name country population coordinates'</span><span class="token punctuation">)</span>
tokyo <span class="token operator">=</span> <span class="token function">City</span><span class="token punctuation">(</span><span class="token string">'Tokyo'</span><span class="token punctuation">,</span> <span class="token string">'JP'</span><span class="token punctuation">,</span> <span class="token number">36.933</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">35.689722</span><span class="token punctuation">,</span> <span class="token number">139.691667</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
tokyo<span class="token punctuation">.</span>population
tokyo<span class="token punctuation">.</span>coordinates
tokyo<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
City<span class="token punctuation">.</span>_fields # tuple
</code></pre>
<h5 id="可变序列"><a class="v-toc-item" href="#可变序列">#</a> 可变序列</h5>
<pre><code>s[i] = x
s[i:j] = t
del s[i:j]
s[i:j:k] = t
del s[i:j:k]
s.append(x)
s.clear()
s.copy()
s.extend(t) 或者 s += t

</code></pre>
<h5 id="list-comprehensions-and-generator-expressions"><a class="v-toc-item" href="#list-comprehensions-and-generator-expressions">#</a> List Comprehensions and Generator Expressions</h5>
<pre><code class="language-python">new_items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> items<span class="token punctuation">]</span>
new_items <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token function">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">if</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">]</span>
new_items <span class="token operator">=</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token function">map</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span>lambda x<span class="token operator">:</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
# 可写成
new_items <span class="token operator">=</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token function">map</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token function">filter</span><span class="token punctuation">(</span>lambda x<span class="token operator">:</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>list 往往和 map filter 以及 listcomp 用于创建简单的序列</p>
<h5 id="序列赋值"><a class="v-toc-item" href="#序列赋值">#</a> 序列赋值</h5>
<pre><code class="language-python">对于不可变类型 赋值 l <span class="token operator">*=</span> <span class="token number">2</span> 在内存中则是创建了新的两个长度的元祖，然后赋值
而由于字符串则需要注意，str_a <span class="token operator">+=</span> <span class="token string">"str b"</span> <span class="token punctuation">,</span> 虽然为不可变变量，但并不需要拷贝整个字符串（特殊情况）<span class="token punctuation">,</span> 但字符串的拼接建议还是<span class="token string">""</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span>
# 结果为既赋值成功，又报错
# 但 t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 可以赋值成功
<span class="token keyword">import</span> dis
dis<span class="token punctuation">.</span><span class="token function">dis</span><span class="token punctuation">(</span><span class="token string">'s[a] += b'</span><span class="token punctuation">)</span> # 可以查看字节码
</code></pre>
<ol>
<li>尽量不要在不可变变量内保存可变变量</li>
<li>t[2] += [50,60] 并不是原子操作，因为，当做了一半的时候，抛出的错误。</li>
</ol>
<h5 id="objssort-与-sorted"><a class="v-toc-item" href="#objssort-与-sorted">#</a> objs.sort 与 sorted()</h5>
<p>对于 sort 和 sorted 来说，reverse 代表 desc,key 为单参数用于计算每一个值的结果的函数。<br>
list.sort 直接针对列表排序，并且返回 None（出于编程习惯的问题，直接返回 None 的函数大多是对程序有一定的修改）</p>
<h5 id="二分搜索"><a class="v-toc-item" href="#二分搜索">#</a> 二分搜索</h5>
<pre><code class="language-python"><span class="token keyword">import</span> bisect
bisect <span class="token operator">-</span><span class="token operator">></span> bisect_right
bisect_left
insort <span class="token operator">-</span><span class="token operator">></span> insort_left
insort_right
# 搜索可以用来划分档次
def <span class="token function">grade</span><span class="token punctuation">(</span>score<span class="token punctuation">,</span> breakpoints<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span> grades<span class="token operator">=</span><span class="token string">'FDCBA'</span><span class="token punctuation">)</span><span class="token operator">:</span>
    i <span class="token operator">=</span> bisect<span class="token punctuation">.</span><span class="token function">bisect</span><span class="token punctuation">(</span>breakpoints<span class="token punctuation">,</span> score<span class="token punctuation">)</span>
    <span class="token keyword">return</span> grades<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token function">grade</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">for</span> score <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span> # <span class="token punctuation">[</span><span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">]</span>
</code></pre>
<h5 id="列表"><a class="v-toc-item" href="#列表">#</a> 列表</h5>
<p>list 是一种 mix-typed 的数据结构，即可以存放不同种类型的数据结构，由此带来的问题自然是性能问题：</p>
<ul>
<li>list 第一是 mix-typed 的数据结构</li>
<li>动态数组，并非数组</li>
</ul>
<p>当考虑性能的时候，则需要考虑是不是要换一个更好的数据结构：</p>
<ul>
<li>适用于类型单一的 array</li>
<li>增删比较多，或者需要使用 FIFO,LIFO, 则使用 deque (double-ended queue)</li>
</ul>
<pre><code class="language-python"># Arrays
floats <span class="token operator">=</span> <span class="token function">array</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
# NumPy and SciPy

# Deques and Other Queue
</code></pre>
<h5 id="queue-与-deque"><a class="v-toc-item" href="#queue-与-deque">#</a> Queue 与 Deque</h5>
<ul>
<li>Deque</li>
<li>queue 线程安全 Queue, LifoQueue, and PriorityQueue</li>
<li>multiprocessing Queue 和 JoinableQueue</li>
<li>asyncio Queue, LifoQueue, PriorityQueue, and JoinableQueue</li>
</ul>
<h3 id="22-语句"><a class="v-toc-item" href="#22-语句">#</a> 2.2 语句</h3>
<p>语句</p>
<h3 id="23-函数"><a class="v-toc-item" href="#23-函数">#</a> 2.3 函数</h3>
<h4 id="参数"><a class="v-toc-item" href="#参数">#</a> 参数</h4>
<h4 id="闭包与作用域"><a class="v-toc-item" href="#闭包与作用域">#</a> 闭包与作用域</h4>
<p>本部分具备一定文字量，故单独抽取出来到文章，请参考 Python 中的闭包和作用域。</p>
<h4 id="高阶函数"><a class="v-toc-item" href="#高阶函数">#</a> 高阶函数</h4>
<ul>
<li>map</li>
<li>reduce</li>
<li>filter</li>
</ul>
<h4 id="特殊方法"><a class="v-toc-item" href="#特殊方法">#</a> 特殊方法</h4>
<pre><code class="language-python">obj<span class="token punctuation">.</span><span class="token function">__len__</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>__
</code></pre>
<p>对于内置类型 (list, str , bytearray) 解释器在调用特殊方法的时候调用 C 库，比如 CPython 实现的 len 方法一般直接会调用 PyVarObject C Struct ob_size</p>
<p>特殊方法往往并不是显示调用，而是被隐式调用。比如 init 在 new 中的作用，比如 for item in items 世界上会调用 iter(items), 这也会隐式调用 items.<strong>iter</strong>() .</p>
<p>一般当大量使用特殊方法的时候，都是在进行元编程。</p>
<pre><code class="language-python"><span class="token function">bool</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 先调用 x<span class="token punctuation">.</span><span class="token function">__bool__</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> 如果 x<span class="token punctuation">.</span><span class="token function">__bool__</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 没有实现，则调用 x<span class="token punctuation">.</span><span class="token function">__len__</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 如果为 <span class="token number">0</span> 则返回 False
<span class="token function">sorted</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> 可以直接返回 arr，arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 是排序内部。
</code></pre>
<p>特殊方法名 （有操作符）</p>
<table>
<thead>
<tr>
<th>种类</th>
<th>方法名</th>
</tr>
</thead>
<tbody>
<tr>
<td>String/Bytes</td>
<td>repr , str , format , bytes</td>
</tr>
<tr>
<td>Conversion to number</td>
<td>abs , bool , complex , init , float , hash , index</td>
</tr>
<tr>
<td>Emulating collections</td>
<td>len , getitem , setitem , delitem , contains</td>
</tr>
<tr>
<td>Iteration</td>
<td>iter, reversed , next</td>
</tr>
<tr>
<td>Emulating callables</td>
<td>call</td>
</tr>
<tr>
<td>Context management</td>
<td>enter, exit</td>
</tr>
<tr>
<td>Instance creation &amp; destruction</td>
<td>new , init , del</td>
</tr>
<tr>
<td>Attribute management</td>
<td>getattr , getattribute , setattr , delattr, dir</td>
</tr>
<tr>
<td>Attribute descriptors</td>
<td>get , set ,delete</td>
</tr>
<tr>
<td>Class service</td>
<td>prepare , instancecheck , subclasscheck</td>
</tr>
</tbody>
</table>
<p>特殊方法名 （无操作符）</p>
<table>
<thead>
<tr>
<th>种类</th>
<th>方法名</th>
</tr>
</thead>
<tbody>
<tr>
<td>Unary numeric operators</td>
<td>neg , pos , abs</td>
</tr>
<tr>
<td>Rich comparison operators</td>
<td>lt , le , eq , ne , gt , ge</td>
</tr>
<tr>
<td>Arithmetic operators</td>
<td>add ,sub , mul ,truediv ,floordiv ,mod , divmod , pow , round round</td>
</tr>
<tr>
<td>Reversed arithmetic operators</td>
<td>radd , rsub , rmul , rtruediv, rfloordiv , rmod , rdivmod, rpow</td>
</tr>
<tr>
<td>Augmented assignment mathmatic</td>
<td>iadd , isub , imul , itruediv, ifloordiv</td>
</tr>
<tr>
<td>Bitwise operators</td>
<td>invert , lshift , rshift , and , or</td>
</tr>
<tr>
<td>Reversed bitwise operators</td>
<td>rlshift , rrshift , rand , rxor , ror</td>
</tr>
<tr>
<td>Augmented assignment bitwise</td>
<td>ilshift , irshift , iand , ixor , ior</td>
</tr>
</tbody>
</table>
<p>Why len Is Not a Method</p>
<pre><code class="language-python">因为对 不同类型并不是一定调用 __len__ <span class="token punctuation">,</span> 对于基本类型查看 c struct 中长度，对于其他类型直接调用 __len__ <span class="token punctuation">,</span> 这种区分对待
</code></pre>
<h3 id="24-生成器"><a class="v-toc-item" href="#24-生成器">#</a> 2.4 生成器</h3>
<pre><code class="language-python">def <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">yield</span> <span class="token number">2</span>
    <span class="token keyword">yield</span> <span class="token number">3</span>
    # 这里为了省事，标记 <span class="token number">123</span><span class="token punctuation">,</span> 但是一般会有个循环，或者多个循环

gen # <span class="token operator">&lt;</span><span class="token keyword">function</span> __main__<span class="token punctuation">.</span>gen<span class="token operator">></span>
# 显式调用，返回方法对象
g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> # <span class="token operator">&lt;</span>generator object gen at <span class="token number">0x10ec23dc0</span><span class="token operator">></span>
<span class="token function">next</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
<span class="token function">next</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
<span class="token function">next</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
<span class="token function">next</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span> # 执行到结尾部分或者其他报错 StopIteration

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
</code></pre>
<p>生成器的作用就在于将遍历 lazy 化。嗯？其实编写代码的时候完全不中写生成器也可以 lazy 化很多操作。</p>
<p>需要注意的是，generator 后面支持了一个方法叫做 send(), 是 next() 的升级版本。将原来的数据的单向流通变成了双向流通。</p>
<p>见 <a href="#423-%E5%8D%8F%E7%A8%8B">协程</a></p>
<h2 id="0x03-中级概念"><a class="v-toc-item" href="#0x03-中级概念">#</a> 0x03 中级概念</h2>
<h3 id="类和对象"><a class="v-toc-item" href="#类和对象">#</a> 类和对象</h3>
<p>包含元编程</p>
<h3 id="模块与包"><a class="v-toc-item" href="#模块与包">#</a> 模块与包</h3>
<h4 id="单下划线与双下划线"><a class="v-toc-item" href="#单下划线与双下划线">#</a> 单下划线与双下划线</h4>
<pre><code>前缀单下划线 _var # 在类中被认为是私有变量，在模块中可以通过 amodule._func() 来使用，但是没有办法 from xx.amodule import * 然后调用。
后缀单下划线 var_ # 一般用于表示被占用的关键字 比如 default_ int_ class_ object_
前缀双下划线 __var # 放在类中的话，实例化的时候会被转成'_A__size', 这个解释器进行的操作叫做 name mangling

In [13]: class A:
    ...:     def __init__(self):
    ...:         self.__eq__ = 2
    ...:         self.__size = 34
    ...:         self.__size__ = 44

前后双下划线 __var__
单下划线 _
</code></pre>
<h3 id="错误-调试测试"><a class="v-toc-item" href="#错误-调试测试">#</a> 错误 / 调试测试</h3>
<h3 id="io-编程"><a class="v-toc-item" href="#io-编程">#</a> IO 编程</h3>
<h3 id="正则表达式"><a class="v-toc-item" href="#正则表达式">#</a> 正则表达式</h3>
<pre><code class="language-python"><span class="token punctuation">.</span> <span class="token operator">^</span> $ <span class="token operator">*</span> <span class="token operator">+</span> <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span> \ <span class="token operator">|</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span>

Regular String

<span class="token string">"ab*"</span>
<span class="token string">"\\\\section"</span>
<span class="token string">"\\w+\\s+\\1"</span>

Raw string

r<span class="token string">"ab*"</span>
r<span class="token string">"\\section"</span>
r<span class="token string">"\w+\s+\1"</span>
</code></pre>
<h2 id="0x04-高级概念"><a class="v-toc-item" href="#0x04-高级概念">#</a> 0x04 高级概念</h2>
<h3 id="元编程"><a class="v-toc-item" href="#元编程">#</a> 元编程</h3>
<h4 id="装饰器"><a class="v-toc-item" href="#装饰器">#</a> 装饰器</h4>
<pre><code>enforcing access control and authentication
instrumentation and timing functions
rate-limiting
caching, and more”
</code></pre>
<h4 id="dynamic-attributes-and-properties"><a class="v-toc-item" href="#dynamic-attributes-and-properties">#</a> Dynamic Attributes and Properties</h4>
<pre><code class="language-python">obj<span class="token punctuation">.</span>attr

重写__getattr__

<span class="token comment">// TODO: 什么时候完成 python 的 DICT 以及 JSON 的相等？</span>

accessor<span class="token operator">?</span>
__new__ 是一个 <span class="token keyword">class</span> <span class="token class-name">method</span><span class="token punctuation">,</span> 但是并没有 xxx

x <span class="token operator">=</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>

def <span class="token function">object_maker</span><span class="token punctuation">(</span>the_class<span class="token punctuation">,</span> some_arg<span class="token punctuation">)</span><span class="token operator">:</span>
    new_object <span class="token operator">=</span> the_class<span class="token punctuation">.</span><span class="token function">__new__</span><span class="token punctuation">(</span>some_arg<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token function">isinstance</span><span class="token punctuation">(</span>new_object<span class="token punctuation">,</span> the_class<span class="token punctuation">)</span><span class="token operator">:</span>
        the_class<span class="token punctuation">.</span><span class="token function">__init__</span><span class="token punctuation">(</span>new_object<span class="token punctuation">,</span> some_arg<span class="token punctuation">)</span>
    <span class="token keyword">return</span> new_object

x <span class="token operator">=</span> <span class="token function">object_maker</span><span class="token punctuation">(</span>Foo<span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="attributes-descriptors"><a class="v-toc-item" href="#attributes-descriptors">#</a> Attributes Descriptors</h4>
<pre><code class="language-python">@property

__class__ # 接近 <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
__dict__
__slot__

<span class="token function">dir</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> # 与__dict__接近
getattr
setattr
hasattr

</code></pre>
<h4 id="class-metaprogramming"><a class="v-toc-item" href="#class-metaprogramming">#</a> Class MetaProgramming</h4>
<h3 id="并发编程"><a class="v-toc-item" href="#并发编程">#</a> 并发编程</h3>
<h4 id="gil-global-interpreter-lock"><a class="v-toc-item" href="#gil-global-interpreter-lock">#</a> GIL - Global Interpreter Lock</h4>
<p>并不是所有的解释器语言都有 GIL （尽管 Python 和 Ruby 里面都有）, 也并不是没有尝试过去除 GIL, 但是每次去除都会导致单线程性能的下降。所以暂时保留。</p>
<p>GIL 对程序中的影响：</p>
<blockquote>
<p>一个线程运行 Python , 而其他 N 个睡眠或者等待 I/O - <strong>同一时刻只有一个线程对共享资源进行存取</strong> , Python 线程也可以等待 threading.Lock 或者线程模块中的其他同步对象；</p>
</blockquote>
<h5 id="协同式多任务处理"><a class="v-toc-item" href="#协同式多任务处理">#</a> 协同式多任务处理</h5>
<p>如果有两个线程，同时进行 IO 请求，当其中一个线程连接之后，立即会<strong>主动让出 GIL</strong>, 其他线程就可以运行。</p>
<blockquote>
<p>当 N 个线程在网络 I/O 堵塞，或等待重新获取 GIL，而一个线程运行 Python。</p>
</blockquote>
<p>让出之后还要执行代码呀，所以要有个收回 GIL 的动作。</p>
<h5 id="抢占式多任务处理"><a class="v-toc-item" href="#抢占式多任务处理">#</a> 抢占式多任务处理</h5>
<p>Python 2 GIL , 尝试收回 GIL 为 执行 1000 字节码。<br>
Python 3 GIL , 尝试收回 GIL 检测间隔为 15ms</p>
<h5 id="线程安全"><a class="v-toc-item" href="#线程安全">#</a> 线程安全</h5>
<p>原子操作：sort 之类不需要<br>
非原子操作：n=n+2 的字节码分为 加载 n , 加载 2 , 相加，存储 n, 四个步骤，由于不是原子性，很可能被由于 15 ms 而被打断。</p>
<p>当然，懒人一向是 : <strong>优先级不决加括号，线程不决加 lock</strong></p>
<p>对于 Java, 程序员努力在尽可能短的时间内加锁存取共享数据，减轻线程的争夺，实现最大并行。但 Python 中，线程无法并行运行，细粒度的锁就没有了优势。</p>
<h4 id="多线程"><a class="v-toc-item" href="#多线程">#</a> 多线程</h4>
<blockquote>
<p>Python 多线程约等于并发。</p>
</blockquote>
<h4 id="多进程"><a class="v-toc-item" href="#多进程">#</a> 多进程</h4>
<h4 id="协程"><a class="v-toc-item" href="#协程">#</a> 协程</h4>
<p>Python 中，协程在语法上接近于生成器（函数内包含 yield 关键字）.</p>
<pre><code class="language-python"># 生成器
def <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token keyword">yield</span> a
    pass
</code></pre>
<pre><code class="language-python"># 协程
def <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>
    # b <span class="token operator">=</span> <span class="token keyword">yield</span> a
    b <span class="token operator">=</span> <span class="token keyword">yield</span>
    pass
</code></pre>
<p>协程在</p>
<h2 id="0x05-标准库与第三方库"><a class="v-toc-item" href="#0x05-标准库与第三方库">#</a> 0x05 标准库与第三方库</h2>
<h3 id="数据结构与算法"><a class="v-toc-item" href="#数据结构与算法">#</a> 数据结构与算法</h3>
<h3 id="字符串与文本"><a class="v-toc-item" href="#字符串与文本">#</a> 字符串与文本</h3>
<h3 id="数字日期与时间"><a class="v-toc-item" href="#数字日期与时间">#</a> 数字日期与时间</h3>
<h3 id="迭代器与生成器"><a class="v-toc-item" href="#迭代器与生成器">#</a> 迭代器与生成器</h3>
<ol>
<li>Introduction</li>
<li>Built-in Functions</li>
<li>Built-in Constants</li>
<li>Built-in Types</li>
<li>Built-in Exceptions</li>
<li>Text Processing Services</li>
<li>Binary Data Services</li>
<li>Data Types</li>
<li>Numeric and Mathematical Modules</li>
<li>Functional Programming Modules</li>
<li>File and Directory Access</li>
<li>Data Persistence</li>
<li>Data Compression and Archiving</li>
<li>File Formats</li>
<li>Cryptographic Services</li>
<li>Generic Operating System Services</li>
<li>Concurrent Execution</li>
<li>Interprocess Communication and Networking</li>
<li>Internet Data Handling</li>
<li>Structured Markup Processing Tools</li>
<li>Internet Protocols and Support</li>
<li>Multimedia Services</li>
<li>Internationalization</li>
<li>Program Frameworks</li>
<li>Graphical User Interfaces with Tk</li>
<li>Development Tools</li>
<li>Debugging and Profiling</li>
<li>Software Packaging and Distribution</li>
<li>Python Runtime Services</li>
<li>Custom Python Interpreters</li>
<li>Importing Modules</li>
<li>Python Language Services</li>
<li>Miscellaneous Services</li>
<li>MS Windows Specific Services</li>
<li>Unix Specific Services</li>
<li>Superseded Modules</li>
<li>Undocumented Modules</li>
</ol>
<h2 id="0xaa-测试"><a class="v-toc-item" href="#0xaa-测试">#</a> 0xAA 测试</h2>
<h3 id="单元测试"><a class="v-toc-item" href="#单元测试">#</a> 单元测试</h3>
<p>单元测试我只用 pytest</p>
<ol>
<li>给对象打补丁</li>
<li>测试异常情况</li>
<li>测试输出到日志文件</li>
</ol>
<pre><code>pytest --pdb
pytest --tb=long    # exhaustive, informative traceback formatting
</code></pre>
<h2 id="0xbb-调试技巧"><a class="v-toc-item" href="#0xbb-调试技巧">#</a> 0xBB 调试技巧</h2>
<h3 id="ipython"><a class="v-toc-item" href="#ipython">#</a> IPython</h3>
<h3 id="ipdb"><a class="v-toc-item" href="#ipdb">#</a> IPdb</h3>
<h2 id="0xcc-优化技巧"><a class="v-toc-item" href="#0xcc-优化技巧">#</a> 0xCC 优化技巧</h2>
<pre><code>cProfile
</code></pre>
<h3 id="统计型优化"><a class="v-toc-item" href="#统计型优化">#</a> 统计型优化</h3>
<p><a href="https://github.com/what-studio/profiling">https://github.com/what-studio/profiling</a></p>
<h2 id="0xdd-代码质量"><a class="v-toc-item" href="#0xdd-代码质量">#</a> 0xDD 代码质量</h2>
<h3 id="社区推崇的代码风格-pythonic"><a class="v-toc-item" href="#社区推崇的代码风格-pythonic">#</a> 社区推崇的代码风格 Pythonic</h3>
<pre><code>    The Zen of Python, by Tim Peters

    Beautiful is better than ugly.
    Explicit is better than implicit.
    Simple is better than complex.
    Complex is better than complicated.
    Flat is better than nested.
    Sparse is better than dense.
    Readability counts.
    Special cases aren't special enough to break the rules.
    Although practicality beats purity.
    Errors should never pass silently.
    Unless explicitly silenced.
    In the face of ambiguity, refuse the temptation to guess.
    There should be one-- and preferably only one --obvious way to do it.
    Although that way may not be obvious at first unless you're Dutch.
    Now is better than never.
    Although never is often better than *right* now.
    If the implementation is hard to explain, it's a bad idea.
    If the implementation is easy to explain, it may be a good idea.
    Namespaces are one honking great idea -- let's do more of those!
</code></pre>
<h3 id="python-代码质量"><a class="v-toc-item" href="#python-代码质量">#</a> Python 代码质量</h3>
<pre><code>https://github.com/ambv/black
</code></pre>
<h4 id="正确性"><a class="v-toc-item" href="#正确性">#</a> 正确性</h4>
<ul>
<li>外部<strong>不该</strong>引用 protected member （单下划线）</li>
<li>lambda 为一次使用，最好不要赋值。</li>
<li>不要给 buildin 函数赋值</li>
<li>py3 直接 super()</li>
<li>for in else 如果不内置 break 则出会在最后 for in 为 empty 的时候再执行 else 中的语句</li>
<li>context exit 如果不 catch 掉异常让其自然向上一级抛出错误的话，必须为 (self, exception_type, exception_value, traceback):</li>
<li>不要在 init 里面 return 数据</li>
<li>不要混用 tab 和 space</li>
<li>4 个 space 缩进</li>
<li>staticmethod 直接是 参数，classmethod 第一个参数为 cls</li>
<li>可变的 default value 是不能作为 参数的。（可能是解释器在确定函数的定义的时候完成赋值？)</li>
<li>遵循 exception hierachy <a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy">https://docs.python.org/3/library/exceptions.html#exception-hierarchy</a></li>
<li>defaultdict defaultdict(lambda : 6) , 必须 callable</li>
<li>尽量 unpack 赋值</li>
<li>字典用获取用 get(“myk”,None) , 赋值用 dictionary.setdefault(“list”, []).append(“list_item”)</li>
</ul>
<h4 id="可维护性"><a class="v-toc-item" href="#可维护性">#</a> 可维护性</h4>
<ul>
<li>避免使用 import * , 我觉得这点值得商榷 , 如果是某个模块下，完全可以先把模块拆分成多个，最后 import 进来，接着使用 all.</li>
<li>getxxx 获取实际值，如果不为实际值，返回 None 显然不如 try catch 来的实在。</li>
<li>避免使用 global</li>
<li>命名要注意</li>
<li>动态创建方法 , 我觉得这点值得商榷。</li>
</ul>
<h4 id="可读性"><a class="v-toc-item" href="#可读性">#</a> 可读性</h4>
<ul>
<li>不要检查，如果可能有异常，尽量抛出异常来 trycatch 解决。</li>
<li>a is None , if flag</li>
<li>isinstance , not type® is types.ListType</li>
<li>“{name}{city}”.format(**info_dict)</li>
<li>for k , v in infodict.items()</li>
<li>使用 poiinfo = namedtuple(“poiinfo”,[“name”,“lng”,“lat”]) 返回 poiinfo[‘上海’,121.00,23] 最后返回值打印 <a href="http://poi.name">poi.name</a> , poi.lng , poi lat</li>
<li>for numbers_value, letters_value in zip(numbers, letters):</li>
<li>enumerate</li>
<li>如果能用 listcomp 则不使用 map 和 filter</li>
</ul>
<h4 id="性能"><a class="v-toc-item" href="#性能">#</a> 性能</h4>
<ul>
<li>用 set</li>
<li>d.iteritems() 比 items() 省内存</li>
</ul>
<h2 id="0xee-文章更新"><a class="v-toc-item" href="#0xee-文章更新">#</a> 0xEE 文章更新</h2>
<ul>
<li><strong>2017-05-11 19:43:00</strong> : 增加代码质量模块</li>
<li><strong>2017-08-04 19:43:00</strong> : 增加部分 Fluent Python 的笔记</li>
</ul>
</div></div><div><ul class="v-article-toc">
<li>
<ul>
<li><a href="#0x00-%E5%89%8D%E8%A8%80">0x00 前言</a></li>
<li><a href="#0x01-python-%E8%83%A1%E8%AE%BA">0x01 Python 胡论</a>
<ul>
<li><a href="#why-python">Why Python</a></li>
<li><a href="#%E5%B7%A5%E5%85%B7%E9%93%BE">工具链</a></li>
<li><a href="#%E6%96%87%E6%A1%A3">文档</a></li>
<li><a href="#%E7%A4%BE%E5%8C%BA">社区</a></li>
<li><a href="#%E4%B9%A6%E7%B1%8D">书籍</a></li>
</ul>
</li>
<li><a href="#0x02-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5">0x02 基础概念</a>
<ul>
<li><a href="#21-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">2.1 数据类型</a>
<ul>
<li><a href="#%E5%B8%B8%E9%87%8F">常量</a>
<ul>
<li><a href="#%E5%B8%83%E5%B0%94">布尔</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2">字符串</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B">数字类型</a>
<ul>
<li><a href="#%E6%93%8D%E4%BD%9C%E7%AC%A6">操作符</a></li>
<li><a href="#%E6%95%B0%E5%80%BC%E5%93%88%E5%B8%8C">数值哈希</a></li>
</ul>
</li>
<li><a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%B1%BB%E5%9E%8B">迭代器类型</a></li>
<li><a href="#%E5%BA%8F%E5%88%97%E7%B1%BB%E5%9E%8B">序列类型</a>
<ul>
<li><a href="#%E9%80%9A%E7%94%A8%E5%BA%8F%E5%88%97%E6%93%8D%E4%BD%9C">通用序列操作</a></li>
<li><a href="#%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%BA%8F%E5%88%97">不可变序列</a></li>
<li><a href="#%E5%8F%AF%E5%8F%98%E5%BA%8F%E5%88%97">可变序列</a></li>
<li><a href="#list-comprehensions-and-generator-expressions">List Comprehensions and Generator Expressions</a></li>
<li><a href="#%E5%BA%8F%E5%88%97%E8%B5%8B%E5%80%BC">序列赋值</a></li>
<li><a href="#objssort-%E4%B8%8E-sorted">objs.sort 与 sorted()</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2">二分搜索</a></li>
<li><a href="#%E5%88%97%E8%A1%A8">列表</a></li>
<li><a href="#queue-%E4%B8%8E-deque">Queue 与 Deque</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#22-%E8%AF%AD%E5%8F%A5">2.2 语句</a></li>
<li><a href="#23-%E5%87%BD%E6%95%B0">2.3 函数</a>
<ul>
<li><a href="#%E5%8F%82%E6%95%B0">参数</a></li>
<li><a href="#%E9%97%AD%E5%8C%85%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F">闭包与作用域</a></li>
<li><a href="#%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0">高阶函数</a></li>
<li><a href="#%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95">特殊方法</a></li>
</ul>
</li>
<li><a href="#24-%E7%94%9F%E6%88%90%E5%99%A8">2.4 生成器</a></li>
</ul>
</li>
<li><a href="#0x03-%E4%B8%AD%E7%BA%A7%E6%A6%82%E5%BF%B5">0x03 中级概念</a>
<ul>
<li><a href="#%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1">类和对象</a></li>
<li><a href="#%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85">模块与包</a>
<ul>
<li><a href="#%E5%8D%95%E4%B8%8B%E5%88%92%E7%BA%BF%E4%B8%8E%E5%8F%8C%E4%B8%8B%E5%88%92%E7%BA%BF">单下划线与双下划线</a></li>
</ul>
</li>
<li><a href="#%E9%94%99%E8%AF%AF-%E8%B0%83%E8%AF%95%E6%B5%8B%E8%AF%95">错误 / 调试测试</a></li>
<li><a href="#io-%E7%BC%96%E7%A8%8B">IO 编程</a></li>
<li><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">正则表达式</a></li>
</ul>
</li>
<li><a href="#0x04-%E9%AB%98%E7%BA%A7%E6%A6%82%E5%BF%B5">0x04 高级概念</a>
<ul>
<li><a href="#%E5%85%83%E7%BC%96%E7%A8%8B">元编程</a>
<ul>
<li><a href="#%E8%A3%85%E9%A5%B0%E5%99%A8">装饰器</a></li>
<li><a href="#dynamic-attributes-and-properties">Dynamic Attributes and Properties</a></li>
<li><a href="#attributes-descriptors">Attributes Descriptors</a></li>
<li><a href="#class-metaprogramming">Class MetaProgramming</a></li>
</ul>
</li>
<li><a href="#%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B">并发编程</a>
<ul>
<li><a href="#gil-global-interpreter-lock">GIL - Global Interpreter Lock</a>
<ul>
<li><a href="#%E5%8D%8F%E5%90%8C%E5%BC%8F%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86">协同式多任务处理</a></li>
<li><a href="#%E6%8A%A2%E5%8D%A0%E5%BC%8F%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86">抢占式多任务处理</a></li>
<li><a href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8">线程安全</a></li>
</ul>
</li>
<li><a href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B">多线程</a></li>
<li><a href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B">多进程</a></li>
<li><a href="#%E5%8D%8F%E7%A8%8B">协程</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#0x05-%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%8E%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93">0x05 标准库与第三方库</a>
<ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95">数据结构与算法</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E6%96%87%E6%9C%AC">字符串与文本</a></li>
<li><a href="#%E6%95%B0%E5%AD%97%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4">数字日期与时间</a></li>
<li><a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8">迭代器与生成器</a></li>
</ul>
</li>
<li><a href="#0xaa-%E6%B5%8B%E8%AF%95">0xAA 测试</a>
<ul>
<li><a href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95">单元测试</a></li>
</ul>
</li>
<li><a href="#0xbb-%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7">0xBB 调试技巧</a>
<ul>
<li><a href="#ipython">IPython</a></li>
<li><a href="#ipdb">IPdb</a></li>
</ul>
</li>
<li><a href="#0xcc-%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7">0xCC 优化技巧</a>
<ul>
<li><a href="#%E7%BB%9F%E8%AE%A1%E5%9E%8B%E4%BC%98%E5%8C%96">统计型优化</a></li>
</ul>
</li>
<li><a href="#0xdd-%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F">0xDD 代码质量</a>
<ul>
<li><a href="#%E7%A4%BE%E5%8C%BA%E6%8E%A8%E5%B4%87%E7%9A%84%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC-pythonic">社区推崇的代码风格 Pythonic</a></li>
<li><a href="#python-%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F">Python 代码质量</a>
<ul>
<li><a href="#%E6%AD%A3%E7%A1%AE%E6%80%A7">正确性</a></li>
<li><a href="#%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7">可维护性</a></li>
<li><a href="#%E5%8F%AF%E8%AF%BB%E6%80%A7">可读性</a></li>
<li><a href="#%E6%80%A7%E8%83%BD">性能</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#0xee-%E6%96%87%E7%AB%A0%E6%9B%B4%E6%96%B0">0xEE 文章更新</a></li>
</ul>
</li>
</ul>
</div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"tags":["Python"],"path":"20170804_RethinkingInPython.md","title":"ReThinking In Python","slug":"ReThinking In Python","date":"2017-08-04","category":"Python","lastMod":"2020-01-01","description":"这篇文章展示了基本的 Markdown 语法和格式.","thumbnail":"","content":"\u003ch2 id=\"0x00-前言\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x00-前言\"\u003e#\u003c/a\u003e 0x00 前言\u003c/h2\u003e\n\u003cp\u003e本文诞生于利用 Topic Reading 方法读 Python 和 JavaScript 若干本技术书籍这个过程中结合自己的开发常见场景记录下来的一些笔记。\u003c/p\u003e\n\u003ch2 id=\"0x01-python-胡论\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x01-python-胡论\"\u003e#\u003c/a\u003e 0x01 Python 胡论\u003c/h2\u003e\n\u003ch3 id=\"why-python\"\u003e\u003ca class=\"v-toc-item\" href=\"#why-python\"\u003e#\u003c/a\u003e Why Python\u003c/h3\u003e\n\u003cp\u003e是要用一门编程语言无非是两种原因：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e这门技术很火，能挣钱\u003c/li\u003e\n\u003cli\u003e写起来很舒服，开发效率高\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这也是我在涉猎了很多编程语言为什么选择了 Python 和 TypeScript 作为自己的主要技能树。\u003c/p\u003e\n\u003cp\u003ePython 具备这两点，TS （更加准确的说是 JavaScript）具备前一点。\u003c/p\u003e\n\u003cp\u003ePython 写起来真的特别舒服，语法简洁，第三方库丰富，而且也比较火。\u003c/p\u003e\n\u003cp\u003e有什么东西比，写代码效率高、生态圈好还重要了。\u003c/p\u003e\n\u003cp\u003e生态圈好，比如\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWeb 开发用 Django/Flask\u003c/li\u003e\n\u003cli\u003e数据抓取用 Requests\u003c/li\u003e\n\u003cli\u003e数据分析清洗用 Pandas\u003c/li\u003e\n\u003cli\u003e机器学习 Tensorflow SCIPY\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- more --\u003e\n\u003ch3 id=\"工具链\"\u003e\u003ca class=\"v-toc-item\" href=\"#工具链\"\u003e#\u003c/a\u003e 工具链\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"./ch04/s03_Pythonista_%E7%9A%84%E5%B7%A5%E5%85%B7%E9%9B%86.md\"\u003ePythonista 的工具集\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"文档\"\u003e\u003ca class=\"v-toc-item\" href=\"#文档\"\u003e#\u003c/a\u003e 文档\u003c/h3\u003e\n\u003ch3 id=\"社区\"\u003e\u003ca class=\"v-toc-item\" href=\"#社区\"\u003e#\u003c/a\u003e 社区\u003c/h3\u003e\n\u003ch3 id=\"书籍\"\u003e\u003ca class=\"v-toc-item\" href=\"#书籍\"\u003e#\u003c/a\u003e 书籍\u003c/h3\u003e\n\u003ch2 id=\"0x02-基础概念\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x02-基础概念\"\u003e#\u003c/a\u003e 0x02 基础概念\u003c/h2\u003e\n\u003ch3 id=\"21-数据类型\"\u003e\u003ca class=\"v-toc-item\" href=\"#21-数据类型\"\u003e#\u003c/a\u003e 2.1 数据类型\u003c/h3\u003e\n\u003ch4 id=\"常量\"\u003e\u003ca class=\"v-toc-item\" href=\"#常量\"\u003e#\u003c/a\u003e 常量\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003eFalse\nTrue\nNone\nNotImplemented\nElilipsis ...\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5 id=\"布尔\"\u003e\u003ca class=\"v-toc-item\" href=\"#布尔\"\u003e#\u003c/a\u003e 布尔\u003c/h5\u003e\n\u003cp\u003e布尔常量\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eNone\nFalse\n0 0.0 0j\n'' () []\n{}\n一个对象 __bool__() = False , 如果上一个为 True 则__len__()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e布尔运算符\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ex or y\nx and y\nnot x\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e布尔比较值\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# 可以定制\n\u0026lt; \u0026lt;= \u0026gt;= \u0026gt; == !=\n# 无法定制\nis / is not\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5 id=\"字符串\"\u003e\u003ca class=\"v-toc-item\" href=\"#字符串\"\u003e#\u003c/a\u003e 字符串\u003c/h5\u003e\n\u003cp\u003e五种 format 方式\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e古代 %\u003c/li\u003e\n\u003cli\u003e近代 format\u003c/li\u003e\n\u003cli\u003e现代 f 字符串\u003c/li\u003e\n\u003cli\u003e内置的 template\u003c/li\u003e\n\u003cli\u003ejinja2 的模板\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"数字类型\"\u003e\u003ca class=\"v-toc-item\" href=\"#数字类型\"\u003e#\u003c/a\u003e 数字类型\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eint\u003c/li\u003e\n\u003cli\u003efloat\u003c/li\u003e\n\u003cli\u003ecomplex\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"操作符\"\u003e\u003ca class=\"v-toc-item\" href=\"#操作符\"\u003e#\u003c/a\u003e 操作符\u003c/h5\u003e\n\u003cpre\u003e\u003ccode\u003e+ - * / // % -n +n abs() int() float()\ncomplex(re,im)\nc.conjugate()\ndivmod(x,y)\npow(x,y) x ** y\nmath.trunc(x)\nmath.round(x[,n])\nmath.floor(x) \u0026lt;=x\nmath.ceil(x)  \u0026gt;=x\n| ^ \u0026amp; \u0026lt;\u0026lt; \u0026gt;\u0026gt; ~x\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e注意\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e(-1) / 2 # -1\n1 / (-2) # -1\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5 id=\"数值哈希\"\u003e\u003ca class=\"v-toc-item\" href=\"#数值哈希\"\u003e#\u003c/a\u003e 数值哈希\u003c/h5\u003e\n\u003cp\u003e// TODO : 麻蛋居然没看懂 4.4.4. Hashing of numeric types\u003c/p\u003e\n\u003ch4 id=\"迭代器类型\"\u003e\u003ca class=\"v-toc-item\" href=\"#迭代器类型\"\u003e#\u003c/a\u003e 迭代器类型\u003c/h4\u003e\n\u003cp\u003e迭代器类型\u003c/p\u003e\n\u003ch4 id=\"序列类型\"\u003e\u003ca class=\"v-toc-item\" href=\"#序列类型\"\u003e#\u003c/a\u003e 序列类型\u003c/h4\u003e\n\u003cp\u003eC 实现的按照 item 是否为同一类型分为：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eContainer sequences\u003c/strong\u003e: list, tuple, and collections.deque can hold items of different types.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFlat sequences\u003c/strong\u003e: str, bytes, bytearray, memoryview, and array.array hold items of one type.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eC 实现按照 item 是否可修改分为：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eMutable sequences\u003c/strong\u003e: list, bytearray, array.array, collections.deque, and memoryview\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eImmutable sequences\u003c/strong\u003e: tuple, str, and bytes\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"通用序列操作\"\u003e\u003ca class=\"v-toc-item\" href=\"#通用序列操作\"\u003e#\u003c/a\u003e 通用序列操作\u003c/h5\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003ex \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e s\nx not \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e s\ns \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e t\ns \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e n 或者 n \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e s\ns\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\ns\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token operator\"\u003e:\u003c/span\u003ej\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\ns\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token operator\"\u003e:\u003c/span\u003ej\u003cspan class=\"token operator\"\u003e:\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token function\"\u003elen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003emin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003emax\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ns\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eindex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003ej\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ns\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecount\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// TODO 封装 deepEqual\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e切片\u003c/p\u003e\n\u003cp\u003e为何 Slice 和 Range 会排除 最后一个 Item?\u003c/p\u003e\n\u003cp\u003e书中讲的太复杂，其实这个和尺子是一个作用，尺子从 0 刻度开始，这样方便丈量。\u003c/p\u003e\n\u003cp\u003e比如说：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eitems[0:10] 为 10 厘米\u003c/li\u003e\n\u003cli\u003eitems[10] 为 10 刻度后一个单位，即 items[10:11]\u003c/li\u003e\n\u003cli\u003eitems[2:] 为 2 刻度后面若干个单位\u003c/li\u003e\n\u003cli\u003eitems[::3] 以三为单位，从 0 刻度开始，最后为结尾，每三个\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003ea\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e j\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e # 调用 a\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003e__getitem__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e j\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5 id=\"不可变序列\"\u003e\u003ca class=\"v-toc-item\" href=\"#不可变序列\"\u003e#\u003c/a\u003e 不可变序列\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e解包赋值\u003c/li\u003e\n\u003cli\u003e不要手贱加逗号\u003c/li\u003e\n\u003cli\u003e下划线可以用作临时变量 （但是 django 中下划线用于中英文）\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003erest \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\na\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003erest \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\na\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003erest \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\na\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003ebody\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e c\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e d \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e*\u003c/span\u003ehead\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e c\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e d \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003enamedtuple\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eCity \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003enamedtuple\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'City'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'name country population coordinates'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ntokyo \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eCity\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Tokyo'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'JP'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e36.933\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e35.689722\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e139.691667\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ntokyo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epopulation\ntokyo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecoordinates\ntokyo\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\nCity\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_fields # tuple\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5 id=\"可变序列\"\u003e\u003ca class=\"v-toc-item\" href=\"#可变序列\"\u003e#\u003c/a\u003e 可变序列\u003c/h5\u003e\n\u003cpre\u003e\u003ccode\u003es[i] = x\ns[i:j] = t\ndel s[i:j]\ns[i:j:k] = t\ndel s[i:j:k]\ns.append(x)\ns.clear()\ns.copy()\ns.extend(t) 或者 s += t\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5 id=\"list-comprehensions-and-generator-expressions\"\u003e\u003ca class=\"v-toc-item\" href=\"#list-comprehensions-and-generator-expressions\"\u003e#\u003c/a\u003e List Comprehensions and Generator Expressions\u003c/h5\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003enew_items \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token function\"\u003efunc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e item \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e items\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\nnew_items \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token function\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e x \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\nnew_items \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estr\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token function\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003efilter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003elambda x\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n# 可写成\nnew_items \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estr\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token function\"\u003efilter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003elambda x\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003elist 往往和 map filter 以及 listcomp 用于创建简单的序列\u003c/p\u003e\n\u003ch5 id=\"序列赋值\"\u003e\u003ca class=\"v-toc-item\" href=\"#序列赋值\"\u003e#\u003c/a\u003e 序列赋值\u003c/h5\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e对于不可变类型 赋值 l \u003cspan class=\"token operator\"\u003e*=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e 在内存中则是创建了新的两个长度的元祖，然后赋值\n而由于字符串则需要注意，str_a \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"str b\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 虽然为不可变变量，但并不需要拷贝整个字符串（特殊情况）\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 但字符串的拼接建议还是\u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ejoin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nt \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e30\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e40\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nt\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n# 结果为既赋值成功，又报错\n# 但 t\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eextend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e 可以赋值成功\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e dis\ndis\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003edis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e's[a] += b'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # 可以查看字节码\n\u003c/code\u003e\u003c/pre\u003e\n\u003col\u003e\n\u003cli\u003e尽量不要在不可变变量内保存可变变量\u003c/li\u003e\n\u003cli\u003et[2] += [50,60] 并不是原子操作，因为，当做了一半的时候，抛出的错误。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch5 id=\"objssort-与-sorted\"\u003e\u003ca class=\"v-toc-item\" href=\"#objssort-与-sorted\"\u003e#\u003c/a\u003e objs.sort 与 sorted()\u003c/h5\u003e\n\u003cp\u003e对于 sort 和 sorted 来说，reverse 代表 desc,key 为单参数用于计算每一个值的结果的函数。\u003cbr\u003e\nlist.sort 直接针对列表排序，并且返回 None（出于编程习惯的问题，直接返回 None 的函数大多是对程序有一定的修改）\u003c/p\u003e\n\u003ch5 id=\"二分搜索\"\u003e\u003ca class=\"v-toc-item\" href=\"#二分搜索\"\u003e#\u003c/a\u003e 二分搜索\u003c/h5\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e bisect\nbisect \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e bisect_right\nbisect_left\ninsort \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e insort_left\ninsort_right\n# 搜索可以用来划分档次\ndef \u003cspan class=\"token function\"\u003egrade\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003escore\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e breakpoints\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e60\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e70\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e80\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e90\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e grades\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e'FDCBA'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n    i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e bisect\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebisect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ebreakpoints\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e score\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e grades\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token function\"\u003egrade\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003escore\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e score \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e33\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e99\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e77\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e70\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e89\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e90\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e # \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'F'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'A'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'C'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'C'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'B'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'A'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'A'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5 id=\"列表\"\u003e\u003ca class=\"v-toc-item\" href=\"#列表\"\u003e#\u003c/a\u003e 列表\u003c/h5\u003e\n\u003cp\u003elist 是一种 mix-typed 的数据结构，即可以存放不同种类型的数据结构，由此带来的问题自然是性能问题：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003elist 第一是 mix-typed 的数据结构\u003c/li\u003e\n\u003cli\u003e动态数组，并非数组\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e当考虑性能的时候，则需要考虑是不是要换一个更好的数据结构：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e适用于类型单一的 array\u003c/li\u003e\n\u003cli\u003e增删比较多，或者需要使用 FIFO,LIFO, 则使用 deque (double-ended queue)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# Arrays\nfloats \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003earray\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'd'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003erandom\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token operator\"\u003e**\u003c/span\u003e\u003cspan class=\"token number\"\u003e7\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n# NumPy and SciPy\n\n# Deques and Other Queue\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5 id=\"queue-与-deque\"\u003e\u003ca class=\"v-toc-item\" href=\"#queue-与-deque\"\u003e#\u003c/a\u003e Queue 与 Deque\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eDeque\u003c/li\u003e\n\u003cli\u003equeue 线程安全 Queue, LifoQueue, and PriorityQueue\u003c/li\u003e\n\u003cli\u003emultiprocessing Queue 和 JoinableQueue\u003c/li\u003e\n\u003cli\u003easyncio Queue, LifoQueue, PriorityQueue, and JoinableQueue\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-语句\"\u003e\u003ca class=\"v-toc-item\" href=\"#22-语句\"\u003e#\u003c/a\u003e 2.2 语句\u003c/h3\u003e\n\u003cp\u003e语句\u003c/p\u003e\n\u003ch3 id=\"23-函数\"\u003e\u003ca class=\"v-toc-item\" href=\"#23-函数\"\u003e#\u003c/a\u003e 2.3 函数\u003c/h3\u003e\n\u003ch4 id=\"参数\"\u003e\u003ca class=\"v-toc-item\" href=\"#参数\"\u003e#\u003c/a\u003e 参数\u003c/h4\u003e\n\u003ch4 id=\"闭包与作用域\"\u003e\u003ca class=\"v-toc-item\" href=\"#闭包与作用域\"\u003e#\u003c/a\u003e 闭包与作用域\u003c/h4\u003e\n\u003cp\u003e本部分具备一定文字量，故单独抽取出来到文章，请参考 Python 中的闭包和作用域。\u003c/p\u003e\n\u003ch4 id=\"高阶函数\"\u003e\u003ca class=\"v-toc-item\" href=\"#高阶函数\"\u003e#\u003c/a\u003e 高阶函数\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003emap\u003c/li\u003e\n\u003cli\u003ereduce\u003c/li\u003e\n\u003cli\u003efilter\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"特殊方法\"\u003e\u003ca class=\"v-toc-item\" href=\"#特殊方法\"\u003e#\u003c/a\u003e 特殊方法\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eobj\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003e__len__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003elen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nobj\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e对于内置类型 (list, str , bytearray) 解释器在调用特殊方法的时候调用 C 库，比如 CPython 实现的 len 方法一般直接会调用 PyVarObject C Struct ob_size\u003c/p\u003e\n\u003cp\u003e特殊方法往往并不是显示调用，而是被隐式调用。比如 init 在 new 中的作用，比如 for item in items 世界上会调用 iter(items), 这也会隐式调用 items.\u003cstrong\u003eiter\u003c/strong\u003e() .\u003c/p\u003e\n\u003cp\u003e一般当大量使用特殊方法的时候，都是在进行元编程。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token function\"\u003ebool\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e 先调用 x\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003e__bool__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 如果 x\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003e__bool__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e 没有实现，则调用 x\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003e__len__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 如果为 \u003cspan class=\"token number\"\u003e0\u003c/span\u003e 则返回 False\n\u003cspan class=\"token function\"\u003esorted\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003earr\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e 可以直接返回 arr，arr\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esort\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e 是排序内部。\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e特殊方法名 （有操作符）\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e种类\u003c/th\u003e\n\u003cth\u003e方法名\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eString/Bytes\u003c/td\u003e\n\u003ctd\u003erepr , str , format , bytes\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eConversion to number\u003c/td\u003e\n\u003ctd\u003eabs , bool , complex , init , float , hash , index\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eEmulating collections\u003c/td\u003e\n\u003ctd\u003elen , getitem , setitem , delitem , contains\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eIteration\u003c/td\u003e\n\u003ctd\u003eiter, reversed , next\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eEmulating callables\u003c/td\u003e\n\u003ctd\u003ecall\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eContext management\u003c/td\u003e\n\u003ctd\u003eenter, exit\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eInstance creation \u0026amp; destruction\u003c/td\u003e\n\u003ctd\u003enew , init , del\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAttribute management\u003c/td\u003e\n\u003ctd\u003egetattr , getattribute , setattr , delattr, dir\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAttribute descriptors\u003c/td\u003e\n\u003ctd\u003eget , set ,delete\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eClass service\u003c/td\u003e\n\u003ctd\u003eprepare , instancecheck , subclasscheck\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e特殊方法名 （无操作符）\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e种类\u003c/th\u003e\n\u003cth\u003e方法名\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eUnary numeric operators\u003c/td\u003e\n\u003ctd\u003eneg , pos , abs\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eRich comparison operators\u003c/td\u003e\n\u003ctd\u003elt , le , eq , ne , gt , ge\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eArithmetic operators\u003c/td\u003e\n\u003ctd\u003eadd ,sub , mul ,truediv ,floordiv ,mod , divmod , pow , round round\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eReversed arithmetic operators\u003c/td\u003e\n\u003ctd\u003eradd , rsub , rmul , rtruediv, rfloordiv , rmod , rdivmod, rpow\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAugmented assignment mathmatic\u003c/td\u003e\n\u003ctd\u003eiadd , isub , imul , itruediv, ifloordiv\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBitwise operators\u003c/td\u003e\n\u003ctd\u003einvert , lshift , rshift , and , or\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eReversed bitwise operators\u003c/td\u003e\n\u003ctd\u003erlshift , rrshift , rand , rxor , ror\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAugmented assignment bitwise\u003c/td\u003e\n\u003ctd\u003eilshift , irshift , iand , ixor , ior\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eWhy len Is Not a Method\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e因为对 不同类型并不是一定调用 __len__ \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 对于基本类型查看 c struct 中长度，对于其他类型直接调用 __len__ \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 这种区分对待\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"24-生成器\"\u003e\u003ca class=\"v-toc-item\" href=\"#24-生成器\"\u003e#\u003c/a\u003e 2.4 生成器\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef \u003cspan class=\"token function\"\u003egen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\n    # 这里为了省事，标记 \u003cspan class=\"token number\"\u003e123\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 但是一般会有个循环，或者多个循环\n\ngen # \u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e __main__\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egen\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n# 显式调用，返回方法对象\ng \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # \u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003egenerator object gen at \u003cspan class=\"token number\"\u003e0x10ec23dc0\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"token function\"\u003enext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003enext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003enext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003enext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # 执行到结尾部分或者其他报错 StopIteration\n\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token function\"\u003egen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e生成器的作用就在于将遍历 lazy 化。嗯？其实编写代码的时候完全不中写生成器也可以 lazy 化很多操作。\u003c/p\u003e\n\u003cp\u003e需要注意的是，generator 后面支持了一个方法叫做 send(), 是 next() 的升级版本。将原来的数据的单向流通变成了双向流通。\u003c/p\u003e\n\u003cp\u003e见 \u003ca href=\"#423-%E5%8D%8F%E7%A8%8B\"\u003e协程\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"0x03-中级概念\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x03-中级概念\"\u003e#\u003c/a\u003e 0x03 中级概念\u003c/h2\u003e\n\u003ch3 id=\"类和对象\"\u003e\u003ca class=\"v-toc-item\" href=\"#类和对象\"\u003e#\u003c/a\u003e 类和对象\u003c/h3\u003e\n\u003cp\u003e包含元编程\u003c/p\u003e\n\u003ch3 id=\"模块与包\"\u003e\u003ca class=\"v-toc-item\" href=\"#模块与包\"\u003e#\u003c/a\u003e 模块与包\u003c/h3\u003e\n\u003ch4 id=\"单下划线与双下划线\"\u003e\u003ca class=\"v-toc-item\" href=\"#单下划线与双下划线\"\u003e#\u003c/a\u003e 单下划线与双下划线\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e前缀单下划线 _var # 在类中被认为是私有变量，在模块中可以通过 amodule._func() 来使用，但是没有办法 from xx.amodule import * 然后调用。\n后缀单下划线 var_ # 一般用于表示被占用的关键字 比如 default_ int_ class_ object_\n前缀双下划线 __var # 放在类中的话，实例化的时候会被转成'_A__size', 这个解释器进行的操作叫做 name mangling\n\nIn [13]: class A:\n    ...:     def __init__(self):\n    ...:         self.__eq__ = 2\n    ...:         self.__size = 34\n    ...:         self.__size__ = 44\n\n前后双下划线 __var__\n单下划线 _\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"错误-调试测试\"\u003e\u003ca class=\"v-toc-item\" href=\"#错误-调试测试\"\u003e#\u003c/a\u003e 错误 / 调试测试\u003c/h3\u003e\n\u003ch3 id=\"io-编程\"\u003e\u003ca class=\"v-toc-item\" href=\"#io-编程\"\u003e#\u003c/a\u003e IO 编程\u003c/h3\u003e\n\u003ch3 id=\"正则表达式\"\u003e\u003ca class=\"v-toc-item\" href=\"#正则表达式\"\u003e#\u003c/a\u003e 正则表达式\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e \u003cspan class=\"token operator\"\u003e^\u003c/span\u003e $ \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \\ \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nRegular String\n\n\u003cspan class=\"token string\"\u003e\"ab*\"\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e\"\\\\\\\\section\"\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e\"\\\\w+\\\\s+\\\\1\"\u003c/span\u003e\n\nRaw string\n\nr\u003cspan class=\"token string\"\u003e\"ab*\"\u003c/span\u003e\nr\u003cspan class=\"token string\"\u003e\"\\\\section\"\u003c/span\u003e\nr\u003cspan class=\"token string\"\u003e\"\\w+\\s+\\1\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0x04-高级概念\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x04-高级概念\"\u003e#\u003c/a\u003e 0x04 高级概念\u003c/h2\u003e\n\u003ch3 id=\"元编程\"\u003e\u003ca class=\"v-toc-item\" href=\"#元编程\"\u003e#\u003c/a\u003e 元编程\u003c/h3\u003e\n\u003ch4 id=\"装饰器\"\u003e\u003ca class=\"v-toc-item\" href=\"#装饰器\"\u003e#\u003c/a\u003e 装饰器\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003eenforcing access control and authentication\ninstrumentation and timing functions\nrate-limiting\ncaching, and more”\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"dynamic-attributes-and-properties\"\u003e\u003ca class=\"v-toc-item\" href=\"#dynamic-attributes-and-properties\"\u003e#\u003c/a\u003e Dynamic Attributes and Properties\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eobj\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eattr\n\n重写__getattr__\n\n\u003cspan class=\"token comment\"\u003e// TODO: 什么时候完成 python 的 DICT 以及 JSON 的相等？\u003c/span\u003e\n\naccessor\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\n__new__ 是一个 \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003emethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e 但是并没有 xxx\n\nx \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eFoo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'a'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\ndef \u003cspan class=\"token function\"\u003eobject_maker\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ethe_class\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e some_arg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n    new_object \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e the_class\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003e__new__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esome_arg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token function\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enew_object\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e the_class\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n        the_class\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enew_object\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e some_arg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e new_object\n\nx \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eobject_maker\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eFoo\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string\"\u003e'a'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"attributes-descriptors\"\u003e\u003ca class=\"v-toc-item\" href=\"#attributes-descriptors\"\u003e#\u003c/a\u003e Attributes Descriptors\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e@property\n\n__class__ # 接近 \u003cspan class=\"token function\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n__dict__\n__slot__\n\n\u003cspan class=\"token function\"\u003edir\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e # 与__dict__接近\ngetattr\nsetattr\nhasattr\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"class-metaprogramming\"\u003e\u003ca class=\"v-toc-item\" href=\"#class-metaprogramming\"\u003e#\u003c/a\u003e Class MetaProgramming\u003c/h4\u003e\n\u003ch3 id=\"并发编程\"\u003e\u003ca class=\"v-toc-item\" href=\"#并发编程\"\u003e#\u003c/a\u003e 并发编程\u003c/h3\u003e\n\u003ch4 id=\"gil-global-interpreter-lock\"\u003e\u003ca class=\"v-toc-item\" href=\"#gil-global-interpreter-lock\"\u003e#\u003c/a\u003e GIL - Global Interpreter Lock\u003c/h4\u003e\n\u003cp\u003e并不是所有的解释器语言都有 GIL （尽管 Python 和 Ruby 里面都有）, 也并不是没有尝试过去除 GIL, 但是每次去除都会导致单线程性能的下降。所以暂时保留。\u003c/p\u003e\n\u003cp\u003eGIL 对程序中的影响：\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e一个线程运行 Python , 而其他 N 个睡眠或者等待 I/O - \u003cstrong\u003e同一时刻只有一个线程对共享资源进行存取\u003c/strong\u003e , Python 线程也可以等待 threading.Lock 或者线程模块中的其他同步对象；\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch5 id=\"协同式多任务处理\"\u003e\u003ca class=\"v-toc-item\" href=\"#协同式多任务处理\"\u003e#\u003c/a\u003e 协同式多任务处理\u003c/h5\u003e\n\u003cp\u003e如果有两个线程，同时进行 IO 请求，当其中一个线程连接之后，立即会\u003cstrong\u003e主动让出 GIL\u003c/strong\u003e, 其他线程就可以运行。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e当 N 个线程在网络 I/O 堵塞，或等待重新获取 GIL，而一个线程运行 Python。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e让出之后还要执行代码呀，所以要有个收回 GIL 的动作。\u003c/p\u003e\n\u003ch5 id=\"抢占式多任务处理\"\u003e\u003ca class=\"v-toc-item\" href=\"#抢占式多任务处理\"\u003e#\u003c/a\u003e 抢占式多任务处理\u003c/h5\u003e\n\u003cp\u003ePython 2 GIL , 尝试收回 GIL 为 执行 1000 字节码。\u003cbr\u003e\nPython 3 GIL , 尝试收回 GIL 检测间隔为 15ms\u003c/p\u003e\n\u003ch5 id=\"线程安全\"\u003e\u003ca class=\"v-toc-item\" href=\"#线程安全\"\u003e#\u003c/a\u003e 线程安全\u003c/h5\u003e\n\u003cp\u003e原子操作：sort 之类不需要\u003cbr\u003e\n非原子操作：n=n+2 的字节码分为 加载 n , 加载 2 , 相加，存储 n, 四个步骤，由于不是原子性，很可能被由于 15 ms 而被打断。\u003c/p\u003e\n\u003cp\u003e当然，懒人一向是 : \u003cstrong\u003e优先级不决加括号，线程不决加 lock\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e对于 Java, 程序员努力在尽可能短的时间内加锁存取共享数据，减轻线程的争夺，实现最大并行。但 Python 中，线程无法并行运行，细粒度的锁就没有了优势。\u003c/p\u003e\n\u003ch4 id=\"多线程\"\u003e\u003ca class=\"v-toc-item\" href=\"#多线程\"\u003e#\u003c/a\u003e 多线程\u003c/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePython 多线程约等于并发。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"多进程\"\u003e\u003ca class=\"v-toc-item\" href=\"#多进程\"\u003e#\u003c/a\u003e 多进程\u003c/h4\u003e\n\u003ch4 id=\"协程\"\u003e\u003ca class=\"v-toc-item\" href=\"#协程\"\u003e#\u003c/a\u003e 协程\u003c/h4\u003e\n\u003cp\u003ePython 中，协程在语法上接近于生成器（函数内包含 yield 关键字）.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# 生成器\ndef \u003cspan class=\"token function\"\u003eg\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eyield\u003c/span\u003e a\n    pass\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# 协程\ndef \u003cspan class=\"token function\"\u003ec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n    # b \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eyield\u003c/span\u003e a\n    b \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eyield\u003c/span\u003e\n    pass\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e协程在\u003c/p\u003e\n\u003ch2 id=\"0x05-标准库与第三方库\"\u003e\u003ca class=\"v-toc-item\" href=\"#0x05-标准库与第三方库\"\u003e#\u003c/a\u003e 0x05 标准库与第三方库\u003c/h2\u003e\n\u003ch3 id=\"数据结构与算法\"\u003e\u003ca class=\"v-toc-item\" href=\"#数据结构与算法\"\u003e#\u003c/a\u003e 数据结构与算法\u003c/h3\u003e\n\u003ch3 id=\"字符串与文本\"\u003e\u003ca class=\"v-toc-item\" href=\"#字符串与文本\"\u003e#\u003c/a\u003e 字符串与文本\u003c/h3\u003e\n\u003ch3 id=\"数字日期与时间\"\u003e\u003ca class=\"v-toc-item\" href=\"#数字日期与时间\"\u003e#\u003c/a\u003e 数字日期与时间\u003c/h3\u003e\n\u003ch3 id=\"迭代器与生成器\"\u003e\u003ca class=\"v-toc-item\" href=\"#迭代器与生成器\"\u003e#\u003c/a\u003e 迭代器与生成器\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eIntroduction\u003c/li\u003e\n\u003cli\u003eBuilt-in Functions\u003c/li\u003e\n\u003cli\u003eBuilt-in Constants\u003c/li\u003e\n\u003cli\u003eBuilt-in Types\u003c/li\u003e\n\u003cli\u003eBuilt-in Exceptions\u003c/li\u003e\n\u003cli\u003eText Processing Services\u003c/li\u003e\n\u003cli\u003eBinary Data Services\u003c/li\u003e\n\u003cli\u003eData Types\u003c/li\u003e\n\u003cli\u003eNumeric and Mathematical Modules\u003c/li\u003e\n\u003cli\u003eFunctional Programming Modules\u003c/li\u003e\n\u003cli\u003eFile and Directory Access\u003c/li\u003e\n\u003cli\u003eData Persistence\u003c/li\u003e\n\u003cli\u003eData Compression and Archiving\u003c/li\u003e\n\u003cli\u003eFile Formats\u003c/li\u003e\n\u003cli\u003eCryptographic Services\u003c/li\u003e\n\u003cli\u003eGeneric Operating System Services\u003c/li\u003e\n\u003cli\u003eConcurrent Execution\u003c/li\u003e\n\u003cli\u003eInterprocess Communication and Networking\u003c/li\u003e\n\u003cli\u003eInternet Data Handling\u003c/li\u003e\n\u003cli\u003eStructured Markup Processing Tools\u003c/li\u003e\n\u003cli\u003eInternet Protocols and Support\u003c/li\u003e\n\u003cli\u003eMultimedia Services\u003c/li\u003e\n\u003cli\u003eInternationalization\u003c/li\u003e\n\u003cli\u003eProgram Frameworks\u003c/li\u003e\n\u003cli\u003eGraphical User Interfaces with Tk\u003c/li\u003e\n\u003cli\u003eDevelopment Tools\u003c/li\u003e\n\u003cli\u003eDebugging and Profiling\u003c/li\u003e\n\u003cli\u003eSoftware Packaging and Distribution\u003c/li\u003e\n\u003cli\u003ePython Runtime Services\u003c/li\u003e\n\u003cli\u003eCustom Python Interpreters\u003c/li\u003e\n\u003cli\u003eImporting Modules\u003c/li\u003e\n\u003cli\u003ePython Language Services\u003c/li\u003e\n\u003cli\u003eMiscellaneous Services\u003c/li\u003e\n\u003cli\u003eMS Windows Specific Services\u003c/li\u003e\n\u003cli\u003eUnix Specific Services\u003c/li\u003e\n\u003cli\u003eSuperseded Modules\u003c/li\u003e\n\u003cli\u003eUndocumented Modules\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"0xaa-测试\"\u003e\u003ca class=\"v-toc-item\" href=\"#0xaa-测试\"\u003e#\u003c/a\u003e 0xAA 测试\u003c/h2\u003e\n\u003ch3 id=\"单元测试\"\u003e\u003ca class=\"v-toc-item\" href=\"#单元测试\"\u003e#\u003c/a\u003e 单元测试\u003c/h3\u003e\n\u003cp\u003e单元测试我只用 pytest\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e给对象打补丁\u003c/li\u003e\n\u003cli\u003e测试异常情况\u003c/li\u003e\n\u003cli\u003e测试输出到日志文件\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode\u003epytest --pdb\npytest --tb=long    # exhaustive, informative traceback formatting\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"0xbb-调试技巧\"\u003e\u003ca class=\"v-toc-item\" href=\"#0xbb-调试技巧\"\u003e#\u003c/a\u003e 0xBB 调试技巧\u003c/h2\u003e\n\u003ch3 id=\"ipython\"\u003e\u003ca class=\"v-toc-item\" href=\"#ipython\"\u003e#\u003c/a\u003e IPython\u003c/h3\u003e\n\u003ch3 id=\"ipdb\"\u003e\u003ca class=\"v-toc-item\" href=\"#ipdb\"\u003e#\u003c/a\u003e IPdb\u003c/h3\u003e\n\u003ch2 id=\"0xcc-优化技巧\"\u003e\u003ca class=\"v-toc-item\" href=\"#0xcc-优化技巧\"\u003e#\u003c/a\u003e 0xCC 优化技巧\u003c/h2\u003e\n\u003cpre\u003e\u003ccode\u003ecProfile\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"统计型优化\"\u003e\u003ca class=\"v-toc-item\" href=\"#统计型优化\"\u003e#\u003c/a\u003e 统计型优化\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/what-studio/profiling\"\u003ehttps://github.com/what-studio/profiling\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"0xdd-代码质量\"\u003e\u003ca class=\"v-toc-item\" href=\"#0xdd-代码质量\"\u003e#\u003c/a\u003e 0xDD 代码质量\u003c/h2\u003e\n\u003ch3 id=\"社区推崇的代码风格-pythonic\"\u003e\u003ca class=\"v-toc-item\" href=\"#社区推崇的代码风格-pythonic\"\u003e#\u003c/a\u003e 社区推崇的代码风格 Pythonic\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e    The Zen of Python, by Tim Peters\n\n    Beautiful is better than ugly.\n    Explicit is better than implicit.\n    Simple is better than complex.\n    Complex is better than complicated.\n    Flat is better than nested.\n    Sparse is better than dense.\n    Readability counts.\n    Special cases aren't special enough to break the rules.\n    Although practicality beats purity.\n    Errors should never pass silently.\n    Unless explicitly silenced.\n    In the face of ambiguity, refuse the temptation to guess.\n    There should be one-- and preferably only one --obvious way to do it.\n    Although that way may not be obvious at first unless you're Dutch.\n    Now is better than never.\n    Although never is often better than *right* now.\n    If the implementation is hard to explain, it's a bad idea.\n    If the implementation is easy to explain, it may be a good idea.\n    Namespaces are one honking great idea -- let's do more of those!\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"python-代码质量\"\u003e\u003ca class=\"v-toc-item\" href=\"#python-代码质量\"\u003e#\u003c/a\u003e Python 代码质量\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003ehttps://github.com/ambv/black\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"正确性\"\u003e\u003ca class=\"v-toc-item\" href=\"#正确性\"\u003e#\u003c/a\u003e 正确性\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e外部\u003cstrong\u003e不该\u003c/strong\u003e引用 protected member （单下划线）\u003c/li\u003e\n\u003cli\u003elambda 为一次使用，最好不要赋值。\u003c/li\u003e\n\u003cli\u003e不要给 buildin 函数赋值\u003c/li\u003e\n\u003cli\u003epy3 直接 super()\u003c/li\u003e\n\u003cli\u003efor in else 如果不内置 break 则出会在最后 for in 为 empty 的时候再执行 else 中的语句\u003c/li\u003e\n\u003cli\u003econtext exit 如果不 catch 掉异常让其自然向上一级抛出错误的话，必须为 (self, exception_type, exception_value, traceback):\u003c/li\u003e\n\u003cli\u003e不要在 init 里面 return 数据\u003c/li\u003e\n\u003cli\u003e不要混用 tab 和 space\u003c/li\u003e\n\u003cli\u003e4 个 space 缩进\u003c/li\u003e\n\u003cli\u003estaticmethod 直接是 参数，classmethod 第一个参数为 cls\u003c/li\u003e\n\u003cli\u003e可变的 default value 是不能作为 参数的。（可能是解释器在确定函数的定义的时候完成赋值？)\u003c/li\u003e\n\u003cli\u003e遵循 exception hierachy \u003ca href=\"https://docs.python.org/3/library/exceptions.html#exception-hierarchy\"\u003ehttps://docs.python.org/3/library/exceptions.html#exception-hierarchy\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003edefaultdict defaultdict(lambda : 6) , 必须 callable\u003c/li\u003e\n\u003cli\u003e尽量 unpack 赋值\u003c/li\u003e\n\u003cli\u003e字典用获取用 get(“myk”,None) , 赋值用 dictionary.setdefault(“list”, []).append(“list_item”)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"可维护性\"\u003e\u003ca class=\"v-toc-item\" href=\"#可维护性\"\u003e#\u003c/a\u003e 可维护性\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e避免使用 import * , 我觉得这点值得商榷 , 如果是某个模块下，完全可以先把模块拆分成多个，最后 import 进来，接着使用 all.\u003c/li\u003e\n\u003cli\u003egetxxx 获取实际值，如果不为实际值，返回 None 显然不如 try catch 来的实在。\u003c/li\u003e\n\u003cli\u003e避免使用 global\u003c/li\u003e\n\u003cli\u003e命名要注意\u003c/li\u003e\n\u003cli\u003e动态创建方法 , 我觉得这点值得商榷。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"可读性\"\u003e\u003ca class=\"v-toc-item\" href=\"#可读性\"\u003e#\u003c/a\u003e 可读性\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e不要检查，如果可能有异常，尽量抛出异常来 trycatch 解决。\u003c/li\u003e\n\u003cli\u003ea is None , if flag\u003c/li\u003e\n\u003cli\u003eisinstance , not type® is types.ListType\u003c/li\u003e\n\u003cli\u003e“{name}{city}”.format(**info_dict)\u003c/li\u003e\n\u003cli\u003efor k , v in infodict.items()\u003c/li\u003e\n\u003cli\u003e使用 poiinfo = namedtuple(“poiinfo”,[“name”,“lng”,“lat”]) 返回 poiinfo[‘上海’,121.00,23] 最后返回值打印 \u003ca href=\"http://poi.name\"\u003epoi.name\u003c/a\u003e , poi.lng , poi lat\u003c/li\u003e\n\u003cli\u003efor numbers_value, letters_value in zip(numbers, letters):\u003c/li\u003e\n\u003cli\u003eenumerate\u003c/li\u003e\n\u003cli\u003e如果能用 listcomp 则不使用 map 和 filter\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"性能\"\u003e\u003ca class=\"v-toc-item\" href=\"#性能\"\u003e#\u003c/a\u003e 性能\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e用 set\u003c/li\u003e\n\u003cli\u003ed.iteritems() 比 items() 省内存\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"0xee-文章更新\"\u003e\u003ca class=\"v-toc-item\" href=\"#0xee-文章更新\"\u003e#\u003c/a\u003e 0xEE 文章更新\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e2017-05-11 19:43:00\u003c/strong\u003e : 增加代码质量模块\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e2017-08-04 19:43:00\u003c/strong\u003e : 增加部分 Fluent Python 的笔记\u003c/li\u003e\n\u003c/ul\u003e\n","toc":"\u003cul class=\"v-article-toc\"\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#0x00-%E5%89%8D%E8%A8%80\"\u003e0x00 前言\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x01-python-%E8%83%A1%E8%AE%BA\"\u003e0x01 Python 胡论\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#why-python\"\u003eWhy Python\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%B7%A5%E5%85%B7%E9%93%BE\"\u003e工具链\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%96%87%E6%A1%A3\"\u003e文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E7%A4%BE%E5%8C%BA\"\u003e社区\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E4%B9%A6%E7%B1%8D\"\u003e书籍\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x02-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5\"\u003e0x02 基础概念\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#21-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"\u003e2.1 数据类型\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%B8%B8%E9%87%8F\"\u003e常量\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%B8%83%E5%B0%94\"\u003e布尔\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2\"\u003e字符串\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B\"\u003e数字类型\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E6%93%8D%E4%BD%9C%E7%AC%A6\"\u003e操作符\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%95%B0%E5%80%BC%E5%93%88%E5%B8%8C\"\u003e数值哈希\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%B1%BB%E5%9E%8B\"\u003e迭代器类型\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%BA%8F%E5%88%97%E7%B1%BB%E5%9E%8B\"\u003e序列类型\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E9%80%9A%E7%94%A8%E5%BA%8F%E5%88%97%E6%93%8D%E4%BD%9C\"\u003e通用序列操作\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%BA%8F%E5%88%97\"\u003e不可变序列\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8F%AF%E5%8F%98%E5%BA%8F%E5%88%97\"\u003e可变序列\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#list-comprehensions-and-generator-expressions\"\u003eList Comprehensions and Generator Expressions\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%BA%8F%E5%88%97%E8%B5%8B%E5%80%BC\"\u003e序列赋值\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#objssort-%E4%B8%8E-sorted\"\u003eobjs.sort 与 sorted()\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2\"\u003e二分搜索\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%88%97%E8%A1%A8\"\u003e列表\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#queue-%E4%B8%8E-deque\"\u003eQueue 与 Deque\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#22-%E8%AF%AD%E5%8F%A5\"\u003e2.2 语句\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#23-%E5%87%BD%E6%95%B0\"\u003e2.3 函数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8F%82%E6%95%B0\"\u003e参数\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E9%97%AD%E5%8C%85%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F\"\u003e闭包与作用域\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0\"\u003e高阶函数\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95\"\u003e特殊方法\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#24-%E7%94%9F%E6%88%90%E5%99%A8\"\u003e2.4 生成器\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x03-%E4%B8%AD%E7%BA%A7%E6%A6%82%E5%BF%B5\"\u003e0x03 中级概念\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1\"\u003e类和对象\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85\"\u003e模块与包\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8D%95%E4%B8%8B%E5%88%92%E7%BA%BF%E4%B8%8E%E5%8F%8C%E4%B8%8B%E5%88%92%E7%BA%BF\"\u003e单下划线与双下划线\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E9%94%99%E8%AF%AF-%E8%B0%83%E8%AF%95%E6%B5%8B%E8%AF%95\"\u003e错误 / 调试测试\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#io-%E7%BC%96%E7%A8%8B\"\u003eIO 编程\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F\"\u003e正则表达式\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x04-%E9%AB%98%E7%BA%A7%E6%A6%82%E5%BF%B5\"\u003e0x04 高级概念\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%85%83%E7%BC%96%E7%A8%8B\"\u003e元编程\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E8%A3%85%E9%A5%B0%E5%99%A8\"\u003e装饰器\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#dynamic-attributes-and-properties\"\u003eDynamic Attributes and Properties\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#attributes-descriptors\"\u003eAttributes Descriptors\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#class-metaprogramming\"\u003eClass MetaProgramming\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B\"\u003e并发编程\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#gil-global-interpreter-lock\"\u003eGIL - Global Interpreter Lock\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8D%8F%E5%90%8C%E5%BC%8F%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86\"\u003e协同式多任务处理\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%8A%A2%E5%8D%A0%E5%BC%8F%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86\"\u003e抢占式多任务处理\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8\"\u003e线程安全\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%A4%9A%E7%BA%BF%E7%A8%8B\"\u003e多线程\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%A4%9A%E8%BF%9B%E7%A8%8B\"\u003e多进程\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8D%8F%E7%A8%8B\"\u003e协程\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0x05-%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%8E%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93\"\u003e0x05 标准库与第三方库\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95\"\u003e数据结构与算法\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E6%96%87%E6%9C%AC\"\u003e字符串与文本\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%95%B0%E5%AD%97%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4\"\u003e数字日期与时间\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8\"\u003e迭代器与生成器\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0xaa-%E6%B5%8B%E8%AF%95\"\u003e0xAA 测试\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95\"\u003e单元测试\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0xbb-%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7\"\u003e0xBB 调试技巧\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#ipython\"\u003eIPython\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#ipdb\"\u003eIPdb\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0xcc-%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7\"\u003e0xCC 优化技巧\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E7%BB%9F%E8%AE%A1%E5%9E%8B%E4%BC%98%E5%8C%96\"\u003e统计型优化\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0xdd-%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F\"\u003e0xDD 代码质量\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E7%A4%BE%E5%8C%BA%E6%8E%A8%E5%B4%87%E7%9A%84%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC-pythonic\"\u003e社区推崇的代码风格 Pythonic\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#python-%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F\"\u003ePython 代码质量\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E6%AD%A3%E7%A1%AE%E6%80%A7\"\u003e正确性\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7\"\u003e可维护性\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8F%AF%E8%AF%BB%E6%80%A7\"\u003e可读性\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%80%A7%E8%83%BD\"\u003e性能\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#0xee-%E6%96%87%E7%AB%A0%E6%9B%B4%E6%96%B0\"\u003e0xEE 文章更新\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"ReThinking In Python"},"buildId":"oDi_oBCBuu3qj6v7hDnrL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>